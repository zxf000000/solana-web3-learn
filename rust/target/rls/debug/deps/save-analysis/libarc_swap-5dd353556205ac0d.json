{"config":{"output_file":null,"full_docs":false,"pub_only":true,"reachable_only":true,"distro_crate":false,"signatures":false,"borrow_data":false},"version":"0.19.1","compilation":{"directory":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0","program":"/Users/mr.zhou/.rustup/toolchains/stable-aarch64-apple-darwin/bin/rls","arguments":["--crate-name","arc_swap","--edition=2018","/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","--json=diagnostic-rendered-ansi,artifacts,future-incompat","--crate-type","lib","--emit=dep-info,metadata","-C","embed-bitcode=no","-C","split-debuginfo=unpacked","-C","debuginfo=2","-C","metadata=5dd353556205ac0d","-C","extra-filename=-5dd353556205ac0d","--out-dir","/Users/mr.zhou/Desktop/Demos/rust_learn/sol-learn-program/target/rls/debug/deps","-L","dependency=/Users/mr.zhou/Desktop/Demos/rust_learn/sol-learn-program/target/rls/debug/deps","--cap-lints","allow","--error-format=json","--sysroot","/Users/mr.zhou/.rustup/toolchains/stable-aarch64-apple-darwin"],"output":"/Users/mr.zhou/Desktop/Demos/rust_learn/sol-learn-program/target/rls/debug/deps/libarc_swap-5dd353556205ac0d.rmeta"},"prelude":{"crate_id":{"name":"arc_swap","disambiguator":[11936360413383715453,0]},"crate_root":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src","external_crates":[{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":1,"id":{"name":"std","disambiguator":[17588522495838200792,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":2,"id":{"name":"core","disambiguator":[8278583129772197859,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":3,"id":{"name":"compiler_builtins","disambiguator":[14913712660212466740,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":4,"id":{"name":"rustc_std_workspace_core","disambiguator":[169217235897429410,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":5,"id":{"name":"alloc","disambiguator":[3895911861305942990,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":6,"id":{"name":"libc","disambiguator":[9813622304494305451,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":7,"id":{"name":"unwind","disambiguator":[12767531755122486811,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":8,"id":{"name":"cfg_if","disambiguator":[11042621516499360545,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":9,"id":{"name":"miniz_oxide","disambiguator":[12900059087317885891,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":10,"id":{"name":"rustc_std_workspace_alloc","disambiguator":[2276627185568532740,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":11,"id":{"name":"adler","disambiguator":[6031887558045411683,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":12,"id":{"name":"hashbrown","disambiguator":[1726102652612607821,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":13,"id":{"name":"std_detect","disambiguator":[14945886052262342754,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":14,"id":{"name":"rustc_demangle","disambiguator":[329292103076465253,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":15,"id":{"name":"addr2line","disambiguator":[471687133851620970,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":16,"id":{"name":"gimli","disambiguator":[605306301665063266,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":17,"id":{"name":"object","disambiguator":[11032979542905123237,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":18,"id":{"name":"memchr","disambiguator":[18407608818322377071,0]}},{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","num":19,"id":{"name":"panic_unwind","disambiguator":[7683813092153219624,0]}}],"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":0,"byte_end":49074,"line_start":1,"line_end":1293,"column_start":1,"column_end":2}},"imports":[{"kind":"Use","ref_id":{"krate":0,"index":129},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5677,"byte_end":5682,"line_start":150,"line_end":150,"column_start":24,"column_end":29},"alias_span":null,"name":"AsRaw","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":893},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5706,"byte_end":5711,"line_start":151,"line_end":151,"column_start":23,"column_end":28},"alias_span":null,"name":"Cache","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":402},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5737,"byte_end":5743,"line_start":152,"line_end":152,"column_start":25,"column_end":31},"alias_span":null,"name":"RefCnt","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":563},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5911,"byte_end":5926,"line_start":156,"line_end":156,"column_start":27,"column_end":42},"alias_span":null,"name":"DefaultStrategy","value":"","parent":{"krate":0,"index":0}},{"kind":"Use","ref_id":{"krate":0,"index":564},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5928,"byte_end":5947,"line_start":156,"line_end":156,"column_start":44,"column_end":63},"alias_span":null,"name":"IndependentStrategy","value":"","parent":{"krate":0,"index":0}}],"defs":[{"kind":"Mod","id":{"krate":0,"index":0},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":0,"byte_end":49074,"line_start":1,"line_end":1293,"column_start":1,"column_end":2},"name":"","qualname":"::","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","parent":null,"children":[{"krate":0,"index":1},{"krate":0,"index":2},{"krate":0,"index":3},{"krate":0,"index":116},{"krate":0,"index":163},{"krate":0,"index":211},{"krate":0,"index":212},{"krate":0,"index":387},{"krate":0,"index":392},{"krate":0,"index":427},{"krate":0,"index":593},{"krate":0,"index":596},{"krate":0,"index":597},{"krate":0,"index":598},{"krate":0,"index":600},{"krate":0,"index":603},{"krate":0,"index":606},{"krate":0,"index":609},{"krate":0,"index":610},{"krate":0,"index":612},{"krate":0,"index":615},{"krate":0,"index":618},{"krate":0,"index":621},{"krate":0,"index":622},{"krate":0,"index":625},{"krate":0,"index":628},{"krate":0,"index":631},{"krate":0,"index":632},{"krate":0,"index":635},{"krate":0,"index":638},{"krate":0,"index":641},{"krate":0,"index":644},{"krate":0,"index":647},{"krate":0,"index":648},{"krate":0,"index":649},{"krate":0,"index":651},{"krate":0,"index":654},{"krate":0,"index":657},{"krate":0,"index":658},{"krate":0,"index":661},{"krate":0,"index":664},{"krate":0,"index":665},{"krate":0,"index":668},{"krate":0,"index":671},{"krate":0,"index":675},{"krate":0,"index":681},{"krate":0,"index":687},{"krate":0,"index":691},{"krate":0,"index":695},{"krate":0,"index":699},{"krate":0,"index":703},{"krate":0,"index":707},{"krate":0,"index":713},{"krate":0,"index":717},{"krate":0,"index":721},{"krate":0,"index":725},{"krate":0,"index":729},{"krate":0,"index":733},{"krate":0,"index":752},{"krate":0,"index":754},{"krate":0,"index":758},{"krate":0,"index":760},{"krate":0,"index":766},{"krate":0,"index":769},{"krate":0,"index":771}],"decl_id":null,"docs":" Making [`Arc`][Arc] itself atomic","sig":null,"attributes":[{"value":"warn(missing_docs)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":36,"byte_end":58,"line_start":2,"line_end":2,"column_start":1,"column_end":23}},{"value":"allow(deprecated)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":98,"byte_end":119,"line_start":4,"line_end":4,"column_start":1,"column_end":22}},{"value":"/ Making [`Arc`][Arc] itself atomic","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":121,"byte_end":158,"line_start":6,"line_end":6,"column_start":1,"column_end":38}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":159,"byte_end":162,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ The [`ArcSwap`] type is a container for an `Arc` that can be changed atomically. Semantically,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":163,"byte_end":261,"line_start":8,"line_end":8,"column_start":1,"column_end":99}},{"value":"/ it is similar to something like `Atomic<Arc<T>>` (if there was such a thing) or","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":262,"byte_end":345,"line_start":9,"line_end":9,"column_start":1,"column_end":84}},{"value":"/ `RwLock<Arc<T>>` (but without the need for the locking). It is optimized for read-mostly","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":346,"byte_end":438,"line_start":10,"line_end":10,"column_start":1,"column_end":93}},{"value":"/ scenarios, with consistent performance characteristics.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":439,"byte_end":498,"line_start":11,"line_end":11,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":499,"byte_end":502,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ # Motivation","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":503,"byte_end":519,"line_start":13,"line_end":13,"column_start":1,"column_end":17}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":520,"byte_end":523,"line_start":14,"line_end":14,"column_start":1,"column_end":4}},{"value":"/ There are many situations in which one might want to have some data structure that is often","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":524,"byte_end":619,"line_start":15,"line_end":15,"column_start":1,"column_end":96}},{"value":"/ read and seldom updated. Some examples might be a configuration of a service, routing tables,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":620,"byte_end":717,"line_start":16,"line_end":16,"column_start":1,"column_end":98}},{"value":"/ snapshot of some data that is renewed every few minutes, etc.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":718,"byte_end":783,"line_start":17,"line_end":17,"column_start":1,"column_end":66}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":784,"byte_end":787,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ In all these cases one needs:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":788,"byte_end":821,"line_start":19,"line_end":19,"column_start":1,"column_end":34}},{"value":"/ * Being able to read the current value of the data structure, fast, often and concurrently from","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":822,"byte_end":921,"line_start":20,"line_end":20,"column_start":1,"column_end":100}},{"value":"/   many threads.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":922,"byte_end":941,"line_start":21,"line_end":21,"column_start":1,"column_end":20}},{"value":"/ * Using the same version of the data structure over longer period of time ‒ a query should be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":942,"byte_end":1041,"line_start":22,"line_end":22,"column_start":1,"column_end":98}},{"value":"/   answered by a consistent version of data, a packet should be routed either by an old or by a","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1042,"byte_end":1140,"line_start":23,"line_end":23,"column_start":1,"column_end":99}},{"value":"/   new version of the routing table but not by a combination, etc.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1141,"byte_end":1210,"line_start":24,"line_end":24,"column_start":1,"column_end":70}},{"value":"/ * Perform an update without disrupting the processing.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1211,"byte_end":1269,"line_start":25,"line_end":25,"column_start":1,"column_end":59}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1270,"byte_end":1273,"line_start":26,"line_end":26,"column_start":1,"column_end":4}},{"value":"/ The first idea would be to use [`RwLock<T>`][RwLock] and keep a read-lock for the whole time of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1274,"byte_end":1373,"line_start":27,"line_end":27,"column_start":1,"column_end":100}},{"value":"/ processing. Update would, however, pause all processing until done.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1374,"byte_end":1445,"line_start":28,"line_end":28,"column_start":1,"column_end":72}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1446,"byte_end":1449,"line_start":29,"line_end":29,"column_start":1,"column_end":4}},{"value":"/ Better option would be to have [`RwLock<Arc<T>>`][RwLock]. Then one would lock, clone the [Arc]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1450,"byte_end":1549,"line_start":30,"line_end":30,"column_start":1,"column_end":100}},{"value":"/ and unlock. This suffers from CPU-level contention (on the lock and on the reference count of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1550,"byte_end":1647,"line_start":31,"line_end":31,"column_start":1,"column_end":98}},{"value":"/ the [Arc]) which makes it relatively slow. Depending on the implementation, an update may be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1648,"byte_end":1744,"line_start":32,"line_end":32,"column_start":1,"column_end":97}},{"value":"/ blocked for arbitrary long time by a steady inflow of readers.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1745,"byte_end":1811,"line_start":33,"line_end":33,"column_start":1,"column_end":67}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1812,"byte_end":1815,"line_start":34,"line_end":34,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1816,"byte_end":1827,"line_start":35,"line_end":35,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::{Arc, RwLock};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1828,"byte_end":1863,"line_start":36,"line_end":36,"column_start":1,"column_end":36}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1864,"byte_end":1896,"line_start":37,"line_end":37,"column_start":1,"column_end":33}},{"value":"/ # struct RoutingTable; struct Packet; impl RoutingTable { fn route(&self, _: Packet) {} }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1897,"byte_end":1990,"line_start":38,"line_end":38,"column_start":1,"column_end":94}},{"value":"/ static ROUTING_TABLE: Lazy<RwLock<Arc<RoutingTable>>> = Lazy::new(|| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":1991,"byte_end":2065,"line_start":39,"line_end":39,"column_start":1,"column_end":75}},{"value":"/     RwLock::new(Arc::new(RoutingTable))","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2066,"byte_end":2109,"line_start":40,"line_end":40,"column_start":1,"column_end":44}},{"value":"/ });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2110,"byte_end":2117,"line_start":41,"line_end":41,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2118,"byte_end":2121,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ fn process_packet(packet: Packet) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2122,"byte_end":2161,"line_start":43,"line_end":43,"column_start":1,"column_end":40}},{"value":"/     let table = Arc::clone(&ROUTING_TABLE.read().unwrap());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2162,"byte_end":2225,"line_start":44,"line_end":44,"column_start":1,"column_end":64}},{"value":"/     table.route(packet);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2226,"byte_end":2254,"line_start":45,"line_end":45,"column_start":1,"column_end":29}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2255,"byte_end":2260,"line_start":46,"line_end":46,"column_start":1,"column_end":6}},{"value":"/ # fn main() { process_packet(Packet); }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2261,"byte_end":2304,"line_start":47,"line_end":47,"column_start":1,"column_end":44}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2305,"byte_end":2312,"line_start":48,"line_end":48,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2313,"byte_end":2316,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ The [ArcSwap] can be used instead, which solves the above problems and has better performance","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2317,"byte_end":2414,"line_start":50,"line_end":50,"column_start":1,"column_end":98}},{"value":"/ characteristics than the [RwLock], both in contended and non-contended scenarios.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2415,"byte_end":2500,"line_start":51,"line_end":51,"column_start":1,"column_end":86}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2501,"byte_end":2504,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2505,"byte_end":2516,"line_start":53,"line_end":53,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2517,"byte_end":2545,"line_start":54,"line_end":54,"column_start":1,"column_end":29}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2546,"byte_end":2578,"line_start":55,"line_end":55,"column_start":1,"column_end":33}},{"value":"/ # struct RoutingTable; struct Packet; impl RoutingTable { fn route(&self, _: Packet) {} }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2579,"byte_end":2672,"line_start":56,"line_end":56,"column_start":1,"column_end":94}},{"value":"/ static ROUTING_TABLE: Lazy<ArcSwap<RoutingTable>> = Lazy::new(|| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2673,"byte_end":2743,"line_start":57,"line_end":57,"column_start":1,"column_end":71}},{"value":"/     ArcSwap::from_pointee(RoutingTable)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2744,"byte_end":2787,"line_start":58,"line_end":58,"column_start":1,"column_end":44}},{"value":"/ });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2788,"byte_end":2795,"line_start":59,"line_end":59,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2796,"byte_end":2799,"line_start":60,"line_end":60,"column_start":1,"column_end":4}},{"value":"/ fn process_packet(packet: Packet) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2800,"byte_end":2839,"line_start":61,"line_end":61,"column_start":1,"column_end":40}},{"value":"/     let table = ROUTING_TABLE.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2840,"byte_end":2881,"line_start":62,"line_end":62,"column_start":1,"column_end":42}},{"value":"/     table.route(packet);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2882,"byte_end":2910,"line_start":63,"line_end":63,"column_start":1,"column_end":29}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2911,"byte_end":2916,"line_start":64,"line_end":64,"column_start":1,"column_end":6}},{"value":"/ # fn main() { process_packet(Packet); }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2917,"byte_end":2960,"line_start":65,"line_end":65,"column_start":1,"column_end":44}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2961,"byte_end":2968,"line_start":66,"line_end":66,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2969,"byte_end":2972,"line_start":67,"line_end":67,"column_start":1,"column_end":4}},{"value":"/ # Crate contents","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2973,"byte_end":2993,"line_start":68,"line_end":68,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2994,"byte_end":2997,"line_start":69,"line_end":69,"column_start":1,"column_end":4}},{"value":"/ At the heart of the crate there are [`ArcSwap`] and [`ArcSwapOption`] types, containers for an","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":2998,"byte_end":3096,"line_start":70,"line_end":70,"column_start":1,"column_end":99}},{"value":"/ [`Arc`] and [`Option<Arc>`][Option].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3097,"byte_end":3137,"line_start":71,"line_end":71,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3138,"byte_end":3141,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ Technically, these are type aliases for partial instantiations of the [`ArcSwapAny`] type. The","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3142,"byte_end":3240,"line_start":73,"line_end":73,"column_start":1,"column_end":99}},{"value":"/ [`ArcSwapAny`] is more flexible and allows tweaking of many things (can store other things than","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3241,"byte_end":3340,"line_start":74,"line_end":74,"column_start":1,"column_end":100}},{"value":"/ [`Arc`]s, can configure the locking [`Strategy`]). For details about the tweaking, see the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3341,"byte_end":3435,"line_start":75,"line_end":75,"column_start":1,"column_end":95}},{"value":"/ documentation of the [`strategy`] module and the [`RefCnt`] trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3436,"byte_end":3506,"line_start":76,"line_end":76,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3507,"byte_end":3510,"line_start":77,"line_end":77,"column_start":1,"column_end":4}},{"value":"/ The [`cache`] module provides means for speeding up read access of the contained data at the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3511,"byte_end":3607,"line_start":78,"line_end":78,"column_start":1,"column_end":97}},{"value":"/ cost of delayed reclamation.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3608,"byte_end":3640,"line_start":79,"line_end":79,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3641,"byte_end":3644,"line_start":80,"line_end":80,"column_start":1,"column_end":4}},{"value":"/ The [`access`] module can be used to do projections into the contained data to separate parts","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3645,"byte_end":3742,"line_start":81,"line_end":81,"column_start":1,"column_end":98}},{"value":"/ of application from each other (eg. giving a component access to only its own part of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3743,"byte_end":3832,"line_start":82,"line_end":82,"column_start":1,"column_end":90}},{"value":"/ configuration while still having it reloaded as a whole).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3833,"byte_end":3894,"line_start":83,"line_end":83,"column_start":1,"column_end":62}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3895,"byte_end":3898,"line_start":84,"line_end":84,"column_start":1,"column_end":4}},{"value":"/ # Before using","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3899,"byte_end":3917,"line_start":85,"line_end":85,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3918,"byte_end":3921,"line_start":86,"line_end":86,"column_start":1,"column_end":4}},{"value":"/ The data structure is a bit niche. Before using, please check the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3922,"byte_end":3991,"line_start":87,"line_end":87,"column_start":1,"column_end":70}},{"value":"/ [limitations and common pitfalls][docs::limitations] and the [performance","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":3992,"byte_end":4069,"line_start":88,"line_end":88,"column_start":1,"column_end":78}},{"value":"/ characteristics][docs::performance], including choosing the right [read","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4070,"byte_end":4145,"line_start":89,"line_end":89,"column_start":1,"column_end":76}},{"value":"/ operation][docs::performance#read-operations].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4146,"byte_end":4196,"line_start":90,"line_end":90,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4197,"byte_end":4200,"line_start":91,"line_end":91,"column_start":1,"column_end":4}},{"value":"/ You can also get an inspiration about what's possible in the [common patterns][docs::patterns]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4201,"byte_end":4299,"line_start":92,"line_end":92,"column_start":1,"column_end":99}},{"value":"/ section.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4300,"byte_end":4312,"line_start":93,"line_end":93,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4313,"byte_end":4316,"line_start":94,"line_end":94,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4317,"byte_end":4331,"line_start":95,"line_end":95,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4332,"byte_end":4335,"line_start":96,"line_end":96,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4336,"byte_end":4347,"line_start":97,"line_end":97,"column_start":1,"column_end":12}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4348,"byte_end":4371,"line_start":98,"line_end":98,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4372,"byte_end":4375,"line_start":99,"line_end":99,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4376,"byte_end":4402,"line_start":100,"line_end":100,"column_start":1,"column_end":27}},{"value":"/ use crossbeam_utils::thread;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4403,"byte_end":4435,"line_start":101,"line_end":101,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4436,"byte_end":4439,"line_start":102,"line_end":102,"column_start":1,"column_end":4}},{"value":"/ fn main() {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4440,"byte_end":4455,"line_start":103,"line_end":103,"column_start":1,"column_end":16}},{"value":"/     let config = ArcSwap::from(Arc::new(String::default()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4456,"byte_end":4520,"line_start":104,"line_end":104,"column_start":1,"column_end":65}},{"value":"/     thread::scope(|scope| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4521,"byte_end":4552,"line_start":105,"line_end":105,"column_start":1,"column_end":32}},{"value":"/         scope.spawn(|_| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4553,"byte_end":4582,"line_start":106,"line_end":106,"column_start":1,"column_end":30}},{"value":"/             let new_conf = Arc::new(\"New configuration\".to_owned());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4583,"byte_end":4655,"line_start":107,"line_end":107,"column_start":1,"column_end":73}},{"value":"/             config.store(new_conf);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4656,"byte_end":4695,"line_start":108,"line_end":108,"column_start":1,"column_end":40}},{"value":"/         });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4696,"byte_end":4711,"line_start":109,"line_end":109,"column_start":1,"column_end":16}},{"value":"/         for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4712,"byte_end":4740,"line_start":110,"line_end":110,"column_start":1,"column_end":29}},{"value":"/             scope.spawn(|_| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4741,"byte_end":4774,"line_start":111,"line_end":111,"column_start":1,"column_end":34}},{"value":"/                 loop {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4775,"byte_end":4801,"line_start":112,"line_end":112,"column_start":1,"column_end":27}},{"value":"/                     let cfg = config.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4802,"byte_end":4850,"line_start":113,"line_end":113,"column_start":1,"column_end":49}},{"value":"/                     if !cfg.is_empty() {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4851,"byte_end":4895,"line_start":114,"line_end":114,"column_start":1,"column_end":45}},{"value":"/                         assert_eq!(**cfg, \"New configuration\");","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4896,"byte_end":4963,"line_start":115,"line_end":115,"column_start":1,"column_end":68}},{"value":"/                         return;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":4964,"byte_end":4999,"line_start":116,"line_end":116,"column_start":1,"column_end":36}},{"value":"/                     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5000,"byte_end":5025,"line_start":117,"line_end":117,"column_start":1,"column_end":26}},{"value":"/                 }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5026,"byte_end":5047,"line_start":118,"line_end":118,"column_start":1,"column_end":22}},{"value":"/             });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5048,"byte_end":5067,"line_start":119,"line_end":119,"column_start":1,"column_end":20}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5068,"byte_end":5081,"line_start":120,"line_end":120,"column_start":1,"column_end":14}},{"value":"/     }).unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5082,"byte_end":5102,"line_start":121,"line_end":121,"column_start":1,"column_end":21}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5103,"byte_end":5108,"line_start":122,"line_end":122,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5109,"byte_end":5116,"line_start":123,"line_end":123,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5117,"byte_end":5120,"line_start":124,"line_end":124,"column_start":1,"column_end":4}},{"value":"/ [RwLock]: https://doc.rust-lang.org/std/sync/struct.RwLock.html","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5121,"byte_end":5188,"line_start":125,"line_end":125,"column_start":1,"column_end":68}}]},{"kind":"Mod","id":{"krate":0,"index":3},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"access","qualname":"::access","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","parent":null,"children":[{"krate":0,"index":4},{"krate":0,"index":5},{"krate":0,"index":7},{"krate":0,"index":10},{"krate":0,"index":13},{"krate":0,"index":16},{"krate":0,"index":19},{"krate":0,"index":22},{"krate":0,"index":23},{"krate":0,"index":26},{"krate":0,"index":29},{"krate":0,"index":33},{"krate":0,"index":39},{"krate":0,"index":772},{"krate":0,"index":777},{"krate":0,"index":44},{"krate":0,"index":49},{"krate":0,"index":54},{"krate":0,"index":59},{"krate":0,"index":64},{"krate":0,"index":68},{"krate":0,"index":72},{"krate":0,"index":75},{"krate":0,"index":79},{"krate":0,"index":83},{"krate":0,"index":781},{"krate":0,"index":789},{"krate":0,"index":794},{"krate":0,"index":800},{"krate":0,"index":88},{"krate":0,"index":806},{"krate":0,"index":813},{"krate":0,"index":817},{"krate":0,"index":822},{"krate":0,"index":95},{"krate":0,"index":101},{"krate":0,"index":827},{"krate":0,"index":831},{"krate":0,"index":833},{"krate":0,"index":836},{"krate":0,"index":839},{"krate":0,"index":841},{"krate":0,"index":844},{"krate":0,"index":846},{"krate":0,"index":850},{"krate":0,"index":853},{"krate":0,"index":856},{"krate":0,"index":108},{"krate":0,"index":860},{"krate":0,"index":864},{"krate":0,"index":866},{"krate":0,"index":869},{"krate":0,"index":872},{"krate":0,"index":874},{"krate":0,"index":877},{"krate":0,"index":879},{"krate":0,"index":883},{"krate":0,"index":886},{"krate":0,"index":889},{"krate":0,"index":112}],"decl_id":null,"docs":" Abstracting over accessing parts of stored value.","sig":null,"attributes":[{"value":"deny(unsafe_code)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49076,"byte_end":49097,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/ Abstracting over accessing parts of stored value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49099,"byte_end":49152,"line_start":3,"line_end":3,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49153,"byte_end":49156,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ Sometimes, there's a big globalish data structure (like a configuration for the whole program).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49157,"byte_end":49256,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ Then there are parts of the program that need access to up-to-date version of their *part* of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49257,"byte_end":49354,"line_start":6,"line_end":6,"column_start":1,"column_end":98}},{"value":"/ the configuration, but for reasons of code separation and reusability, it is not desirable to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49355,"byte_end":49452,"line_start":7,"line_end":7,"column_start":1,"column_end":98}},{"value":"/ pass the whole configuration to each of the parts.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49453,"byte_end":49507,"line_start":8,"line_end":8,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49508,"byte_end":49511,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ This module provides means to grant the parts access to the relevant subsets of such global","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49512,"byte_end":49607,"line_start":10,"line_end":10,"column_start":1,"column_end":96}},{"value":"/ data structure while masking the fact it is part of the bigger whole from the component.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49608,"byte_end":49700,"line_start":11,"line_end":11,"column_start":1,"column_end":93}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49701,"byte_end":49704,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ Note that the [`cache`][crate::cache] module has its own [`Access`][crate::cache::Access] trait","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49705,"byte_end":49804,"line_start":13,"line_end":13,"column_start":1,"column_end":100}},{"value":"/ that serves a similar purpose, but with cached access. The signatures are different, therefore","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49805,"byte_end":49903,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ an incompatible trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49904,"byte_end":49930,"line_start":15,"line_end":15,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49931,"byte_end":49934,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ # The general idea","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49935,"byte_end":49957,"line_start":17,"line_end":17,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49958,"byte_end":49961,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ Each part of the code accepts generic [`Access<T>`][Access] for the `T` of its interest. This","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":49962,"byte_end":50059,"line_start":19,"line_end":19,"column_start":1,"column_end":98}},{"value":"/ provides means to load current version of the structure behind the scenes and get only the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50060,"byte_end":50154,"line_start":20,"line_end":20,"column_start":1,"column_end":95}},{"value":"/ relevant part, without knowing what the big structure is.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50155,"byte_end":50216,"line_start":21,"line_end":21,"column_start":1,"column_end":62}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50217,"byte_end":50220,"line_start":22,"line_end":22,"column_start":1,"column_end":4}},{"value":"/ For technical reasons, the [`Access`] trait is not object safe. If type erasure is desired, it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50221,"byte_end":50319,"line_start":23,"line_end":23,"column_start":1,"column_end":99}},{"value":"/ is possible use the [`DynAccess`][crate::access::DynAccess] instead, which is object safe, but","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50320,"byte_end":50418,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ slightly slower.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50419,"byte_end":50439,"line_start":25,"line_end":25,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50440,"byte_end":50443,"line_start":26,"line_end":26,"column_start":1,"column_end":4}},{"value":"/ For some cases, it is possible to use [`ArcSwapAny::map`]. If that is not flexible enough, the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50444,"byte_end":50542,"line_start":27,"line_end":27,"column_start":1,"column_end":99}},{"value":"/ [`Map`] type can be created directly.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50543,"byte_end":50584,"line_start":28,"line_end":28,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50585,"byte_end":50588,"line_start":29,"line_end":29,"column_start":1,"column_end":4}},{"value":"/ Note that the [`Access`] trait is also implemented for [`ArcSwapAny`] itself. Additionally,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50589,"byte_end":50684,"line_start":30,"line_end":30,"column_start":1,"column_end":96}},{"value":"/ there's the [`Constant`][crate::access::Constant] helper type, which is useful mostly for","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50685,"byte_end":50778,"line_start":31,"line_end":31,"column_start":1,"column_end":94}},{"value":"/ testing (it doesn't allow reloading).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50779,"byte_end":50820,"line_start":32,"line_end":32,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50821,"byte_end":50824,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ # Performance","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50825,"byte_end":50842,"line_start":34,"line_end":34,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50843,"byte_end":50846,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ In general, these utilities use [`ArcSwapAny::load`] internally and then apply the provided","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50847,"byte_end":50942,"line_start":36,"line_end":36,"column_start":1,"column_end":96}},{"value":"/ transformation. This has several consequences:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50943,"byte_end":50993,"line_start":37,"line_end":37,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50994,"byte_end":50997,"line_start":38,"line_end":38,"column_start":1,"column_end":4}},{"value":"/ * Limitations of the [`load`][ArcSwapAny::load] apply ‒ including the recommendation to not","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":50998,"byte_end":51095,"line_start":39,"line_end":39,"column_start":1,"column_end":96}},{"value":"/   hold the returned guard object for too long, but long enough to get consistency.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51096,"byte_end":51182,"line_start":40,"line_end":40,"column_start":1,"column_end":87}},{"value":"/ * The transformation should be cheap ‒ optimally just borrowing into the structure.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51183,"byte_end":51272,"line_start":41,"line_end":41,"column_start":1,"column_end":88}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51273,"byte_end":51276,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51277,"byte_end":51291,"line_start":43,"line_end":43,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51292,"byte_end":51295,"line_start":44,"line_end":44,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51296,"byte_end":51307,"line_start":45,"line_end":45,"column_start":1,"column_end":12}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51308,"byte_end":51331,"line_start":46,"line_end":46,"column_start":1,"column_end":24}},{"value":"/ use std::thread::{self, JoinHandle};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51332,"byte_end":51372,"line_start":47,"line_end":47,"column_start":1,"column_end":41}},{"value":"/ use std::time::Duration;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51373,"byte_end":51401,"line_start":48,"line_end":48,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51402,"byte_end":51405,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51406,"byte_end":51432,"line_start":50,"line_end":50,"column_start":1,"column_end":27}},{"value":"/ use arc_swap::access::{Access, Constant, Map};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51433,"byte_end":51483,"line_start":51,"line_end":51,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51484,"byte_end":51487,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ fn work_with_usize<A: Access<usize> + Send + 'static>(a: A) -> JoinHandle<()> {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51488,"byte_end":51571,"line_start":53,"line_end":53,"column_start":1,"column_end":84}},{"value":"/     thread::spawn(move || {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51572,"byte_end":51603,"line_start":54,"line_end":54,"column_start":1,"column_end":32}},{"value":"/         let mut value = 0;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51604,"byte_end":51634,"line_start":55,"line_end":55,"column_start":1,"column_end":31}},{"value":"/         while value != 42 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51635,"byte_end":51666,"line_start":56,"line_end":56,"column_start":1,"column_end":32}},{"value":"/             let guard = a.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51667,"byte_end":51704,"line_start":57,"line_end":57,"column_start":1,"column_end":38}},{"value":"/             value = *guard;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51705,"byte_end":51736,"line_start":58,"line_end":58,"column_start":1,"column_end":32}},{"value":"/             println!(\"{}\", value);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51737,"byte_end":51775,"line_start":59,"line_end":59,"column_start":1,"column_end":39}},{"value":"/             // Not strictly necessary, but dropping the guard can free some resources, like","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51776,"byte_end":51871,"line_start":60,"line_end":60,"column_start":1,"column_end":96}},{"value":"/             // slots for tracking what values are still in use. We do it before the sleeping,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51872,"byte_end":51969,"line_start":61,"line_end":61,"column_start":1,"column_end":98}},{"value":"/             // not at the end of the scope.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":51970,"byte_end":52017,"line_start":62,"line_end":62,"column_start":1,"column_end":48}},{"value":"/             drop(guard);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52018,"byte_end":52046,"line_start":63,"line_end":63,"column_start":1,"column_end":29}},{"value":"/             thread::sleep(Duration::from_millis(50));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52047,"byte_end":52104,"line_start":64,"line_end":64,"column_start":1,"column_end":58}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52105,"byte_end":52118,"line_start":65,"line_end":65,"column_start":1,"column_end":14}},{"value":"/     })","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52119,"byte_end":52129,"line_start":66,"line_end":66,"column_start":1,"column_end":11}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52130,"byte_end":52135,"line_start":67,"line_end":67,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52136,"byte_end":52139,"line_start":68,"line_end":68,"column_start":1,"column_end":4}},{"value":"/ // Passing the whole thing directly","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52140,"byte_end":52179,"line_start":69,"line_end":69,"column_start":1,"column_end":40}},{"value":"/ // (If we kept another Arc to it, we could change the value behind the scenes)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52180,"byte_end":52262,"line_start":70,"line_end":70,"column_start":1,"column_end":83}},{"value":"/ work_with_usize(Arc::new(ArcSwap::from_pointee(42))).join().unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52263,"byte_end":52336,"line_start":71,"line_end":71,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52337,"byte_end":52340,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ // Passing a subset of a structure","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52341,"byte_end":52379,"line_start":73,"line_end":73,"column_start":1,"column_end":39}},{"value":"/ struct Cfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52380,"byte_end":52396,"line_start":74,"line_end":74,"column_start":1,"column_end":17}},{"value":"/     value: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52397,"byte_end":52418,"line_start":75,"line_end":75,"column_start":1,"column_end":22}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52419,"byte_end":52424,"line_start":76,"line_end":76,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52425,"byte_end":52428,"line_start":77,"line_end":77,"column_start":1,"column_end":4}},{"value":"/ let cfg = Arc::new(ArcSwap::from_pointee(Cfg { value: 0 }));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52429,"byte_end":52493,"line_start":78,"line_end":78,"column_start":1,"column_end":65}},{"value":"/ let thread = work_with_usize(Map::new(Arc::clone(&cfg), |cfg: &Cfg| &cfg.value));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52494,"byte_end":52579,"line_start":79,"line_end":79,"column_start":1,"column_end":86}},{"value":"/ cfg.store(Arc::new(Cfg { value: 42 }));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52580,"byte_end":52623,"line_start":80,"line_end":80,"column_start":1,"column_end":44}},{"value":"/ thread.join().unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52624,"byte_end":52651,"line_start":81,"line_end":81,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52652,"byte_end":52655,"line_start":82,"line_end":82,"column_start":1,"column_end":4}},{"value":"/ // Passing a constant that can't change. Useful mostly for testing purposes.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52656,"byte_end":52736,"line_start":83,"line_end":83,"column_start":1,"column_end":81}},{"value":"/ work_with_usize(Constant(42)).join().unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52737,"byte_end":52787,"line_start":84,"line_end":84,"column_start":1,"column_end":51}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52788,"byte_end":52795,"line_start":85,"line_end":85,"column_start":1,"column_end":8}}]},{"kind":"Trait","id":{"krate":0,"index":29},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53222,"byte_end":53228,"line_start":100,"line_end":100,"column_start":11,"column_end":17},"name":"Access","qualname":"::access::Access","value":"Access<T>","parent":null,"children":[{"krate":0,"index":31},{"krate":0,"index":32}],"decl_id":null,"docs":" Abstracts over ways code can get access to a value of type `T`.","sig":null,"attributes":[{"value":"/ Abstracts over ways code can get access to a value of type `T`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":52978,"byte_end":53045,"line_start":96,"line_end":96,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53046,"byte_end":53049,"line_start":97,"line_end":97,"column_start":1,"column_end":4}},{"value":"/ This is the trait that parts of code will use when accessing a subpart of the big data","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53050,"byte_end":53140,"line_start":98,"line_end":98,"column_start":1,"column_end":91}},{"value":"/ structure. See the [module documentation](index.html) for details.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53141,"byte_end":53211,"line_start":99,"line_end":99,"column_start":1,"column_end":71}}]},{"kind":"Type","id":{"krate":0,"index":31},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53523,"byte_end":53528,"line_start":106,"line_end":106,"column_start":10,"column_end":15},"name":"Guard","qualname":"::access::Access::Guard","value":"type Guard: Deref<Target = T>;","parent":{"krate":0,"index":29},"children":[],"decl_id":null,"docs":" A guard object containing the value and keeping it alive.","sig":null,"attributes":[{"value":"/ A guard object containing the value and keeping it alive.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53238,"byte_end":53299,"line_start":101,"line_end":101,"column_start":5,"column_end":66}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53304,"byte_end":53307,"line_start":102,"line_end":102,"column_start":5,"column_end":8}},{"value":"/ For technical reasons, the library doesn't allow direct access into the stored value. A","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53312,"byte_end":53403,"line_start":103,"line_end":103,"column_start":5,"column_end":96}},{"value":"/ temporary guard object must be loaded, that keeps the actual value alive for the time of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53408,"byte_end":53500,"line_start":104,"line_end":104,"column_start":5,"column_end":97}},{"value":"/ use.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53505,"byte_end":53513,"line_start":105,"line_end":105,"column_start":5,"column_end":13}}]},{"kind":"Method","id":{"krate":0,"index":32},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53718,"byte_end":53722,"line_start":112,"line_end":112,"column_start":8,"column_end":12},"name":"load","qualname":"::access::Access::load","value":"pub fn load(&Self) -> Self::Guard","parent":{"krate":0,"index":29},"children":[],"decl_id":null,"docs":" The loading method.","sig":null,"attributes":[{"value":"/ The loading method.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53554,"byte_end":53577,"line_start":108,"line_end":108,"column_start":5,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53582,"byte_end":53585,"line_start":109,"line_end":109,"column_start":5,"column_end":8}},{"value":"/ This returns the guard that holds the actual value. Should be called anew each time a fresh","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53590,"byte_end":53685,"line_start":110,"line_end":110,"column_start":5,"column_end":100}},{"value":"/ value is needed.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53690,"byte_end":53710,"line_start":111,"line_end":111,"column_start":5,"column_end":25}}]},{"kind":"Struct","id":{"krate":0,"index":772},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54115,"byte_end":54126,"line_start":132,"line_end":132,"column_start":12,"column_end":23},"name":"DirectDeref","qualname":"::access::DirectDeref","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":64},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54868,"byte_end":54876,"line_start":163,"line_end":163,"column_start":12,"column_end":20},"name":"DynGuard","qualname":"::access::DynGuard","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":72},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55720,"byte_end":55729,"line_start":192,"line_end":192,"column_start":11,"column_end":20},"name":"DynAccess","qualname":"::access::DynAccess","value":"DynAccess<T>","parent":null,"children":[{"krate":0,"index":74}],"decl_id":null,"docs":" An object-safe version of the [`Access`] trait.","sig":null,"attributes":[{"value":"/ An object-safe version of the [`Access`] trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55032,"byte_end":55083,"line_start":172,"line_end":172,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55084,"byte_end":55087,"line_start":173,"line_end":173,"column_start":1,"column_end":4}},{"value":"/ This can be used instead of the [`Access`] trait in case a type erasure is desired. This has","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55088,"byte_end":55184,"line_start":174,"line_end":174,"column_start":1,"column_end":97}},{"value":"/ the effect of performance hit (due to boxing of the result and due to dynamic dispatch), but","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55185,"byte_end":55281,"line_start":175,"line_end":175,"column_start":1,"column_end":97}},{"value":"/ makes certain code simpler and possibly makes the executable smaller.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55282,"byte_end":55355,"line_start":176,"line_end":176,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55356,"byte_end":55359,"line_start":177,"line_end":177,"column_start":1,"column_end":4}},{"value":"/ This is automatically implemented for everything that implements [`Access`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55360,"byte_end":55440,"line_start":178,"line_end":178,"column_start":1,"column_end":81}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55441,"byte_end":55444,"line_start":179,"line_end":179,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55445,"byte_end":55459,"line_start":180,"line_end":180,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55460,"byte_end":55463,"line_start":181,"line_end":181,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55464,"byte_end":55475,"line_start":182,"line_end":182,"column_start":1,"column_end":12}},{"value":"/ use arc_swap::access::{Constant, DynAccess};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55476,"byte_end":55524,"line_start":183,"line_end":183,"column_start":1,"column_end":49}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55525,"byte_end":55528,"line_start":184,"line_end":184,"column_start":1,"column_end":4}},{"value":"/ fn do_something(value: Box<dyn DynAccess<usize> + Send>) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55529,"byte_end":55591,"line_start":185,"line_end":185,"column_start":1,"column_end":63}},{"value":"/     let v = value.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55592,"byte_end":55621,"line_start":186,"line_end":186,"column_start":1,"column_end":30}},{"value":"/     println!(\"{}\", *v);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55622,"byte_end":55649,"line_start":187,"line_end":187,"column_start":1,"column_end":28}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55650,"byte_end":55655,"line_start":188,"line_end":188,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55656,"byte_end":55659,"line_start":189,"line_end":189,"column_start":1,"column_end":4}},{"value":"/ do_something(Box::new(Constant(42)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55660,"byte_end":55701,"line_start":190,"line_end":190,"column_start":1,"column_end":42}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55702,"byte_end":55709,"line_start":191,"line_end":191,"column_start":1,"column_end":8}}]},{"kind":"Method","id":{"krate":0,"index":74},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55786,"byte_end":55790,"line_start":194,"line_end":194,"column_start":8,"column_end":12},"name":"load","qualname":"::access::DynAccess::load","value":"pub fn load(&Self) -> DynGuard<T>","parent":{"krate":0,"index":72},"children":[],"decl_id":null,"docs":" The equivalent of [`Access::load`].\n","sig":null,"attributes":[{"value":"/ The equivalent of [`Access::load`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55739,"byte_end":55778,"line_start":193,"line_end":193,"column_start":5,"column_end":44}}]},{"kind":"Struct","id":{"krate":0,"index":79},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56930,"byte_end":56943,"line_start":245,"line_end":245,"column_start":12,"column_end":25},"name":"AccessConvert","qualname":"::access::AccessConvert","value":"","parent":null,"children":[],"decl_id":null,"docs":" [DynAccess] to [Access] wrapper.","sig":null,"attributes":[{"value":"/ [DynAccess] to [Access] wrapper.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55988,"byte_end":56024,"line_start":207,"line_end":207,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56025,"byte_end":56028,"line_start":208,"line_end":208,"column_start":1,"column_end":4}},{"value":"/ A workaround to allow double-dyn mapping, since `Box<dyn DynAccess>` doesn't implement [Access]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56029,"byte_end":56128,"line_start":209,"line_end":209,"column_start":1,"column_end":100}},{"value":"/ and [Map] needs that.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56129,"byte_end":56154,"line_start":210,"line_end":210,"column_start":1,"column_end":26}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56155,"byte_end":56158,"line_start":211,"line_end":211,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56159,"byte_end":56170,"line_start":212,"line_end":212,"column_start":1,"column_end":12}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56171,"byte_end":56194,"line_start":213,"line_end":213,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56195,"byte_end":56198,"line_start":214,"line_end":214,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56199,"byte_end":56225,"line_start":215,"line_end":215,"column_start":1,"column_end":27}},{"value":"/ use arc_swap::access::{AccessConvert, DynAccess, Map};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56226,"byte_end":56284,"line_start":216,"line_end":216,"column_start":1,"column_end":59}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56285,"byte_end":56288,"line_start":217,"line_end":217,"column_start":1,"column_end":4}},{"value":"/ struct Inner {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56289,"byte_end":56307,"line_start":218,"line_end":218,"column_start":1,"column_end":19}},{"value":"/     val: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56308,"byte_end":56327,"line_start":219,"line_end":219,"column_start":1,"column_end":20}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56328,"byte_end":56333,"line_start":220,"line_end":220,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56334,"byte_end":56337,"line_start":221,"line_end":221,"column_start":1,"column_end":4}},{"value":"/ struct Middle {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56338,"byte_end":56357,"line_start":222,"line_end":222,"column_start":1,"column_end":20}},{"value":"/     inner: Inner,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56358,"byte_end":56379,"line_start":223,"line_end":223,"column_start":1,"column_end":22}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56380,"byte_end":56385,"line_start":224,"line_end":224,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56386,"byte_end":56389,"line_start":225,"line_end":225,"column_start":1,"column_end":4}},{"value":"/ struct Outer {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56390,"byte_end":56408,"line_start":226,"line_end":226,"column_start":1,"column_end":19}},{"value":"/     middle: Middle,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56409,"byte_end":56432,"line_start":227,"line_end":227,"column_start":1,"column_end":24}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56433,"byte_end":56438,"line_start":228,"line_end":228,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56439,"byte_end":56442,"line_start":229,"line_end":229,"column_start":1,"column_end":4}},{"value":"/ let outer = Arc::new(ArcSwap::from_pointee(Outer {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56443,"byte_end":56497,"line_start":230,"line_end":230,"column_start":1,"column_end":55}},{"value":"/     middle: Middle {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56498,"byte_end":56522,"line_start":231,"line_end":231,"column_start":1,"column_end":25}},{"value":"/         inner: Inner {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56523,"byte_end":56549,"line_start":232,"line_end":232,"column_start":1,"column_end":27}},{"value":"/             val: 42,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56550,"byte_end":56574,"line_start":233,"line_end":233,"column_start":1,"column_end":25}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56575,"byte_end":56588,"line_start":234,"line_end":234,"column_start":1,"column_end":14}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56589,"byte_end":56598,"line_start":235,"line_end":235,"column_start":1,"column_end":10}},{"value":"/ }));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56599,"byte_end":56607,"line_start":236,"line_end":236,"column_start":1,"column_end":9}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56608,"byte_end":56611,"line_start":237,"line_end":237,"column_start":1,"column_end":4}},{"value":"/ let middle: Arc<dyn DynAccess<Middle>> =","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56612,"byte_end":56656,"line_start":238,"line_end":238,"column_start":1,"column_end":45}},{"value":"/     Arc::new(Map::new(outer, |outer: &Outer| &outer.middle));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56657,"byte_end":56722,"line_start":239,"line_end":239,"column_start":1,"column_end":66}},{"value":"/ let inner: Arc<dyn DynAccess<Inner>> =","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56723,"byte_end":56765,"line_start":240,"line_end":240,"column_start":1,"column_end":43}},{"value":"/     Arc::new(Map::new(AccessConvert(middle), |middle: &Middle| &middle.inner));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56766,"byte_end":56849,"line_start":241,"line_end":241,"column_start":1,"column_end":84}},{"value":"/ let guard = inner.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56850,"byte_end":56879,"line_start":242,"line_end":242,"column_start":1,"column_end":30}},{"value":"/ assert_eq!(42, guard.val);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56880,"byte_end":56910,"line_start":243,"line_end":243,"column_start":1,"column_end":31}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56911,"byte_end":56918,"line_start":244,"line_end":244,"column_start":1,"column_end":8}}]},{"kind":"Field","id":{"krate":0,"index":82},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56947,"byte_end":56952,"line_start":245,"line_end":245,"column_start":29,"column_end":34},"name":"0","qualname":"::access::AccessConvert::0","value":"D","parent":{"krate":0,"index":79},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":781},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57203,"byte_end":57211,"line_start":261,"line_end":261,"column_start":12,"column_end":20},"name":"MapGuard","qualname":"::access::MapGuard","value":"MapGuard {  }","parent":null,"children":[{"krate":0,"index":786},{"krate":0,"index":787},{"krate":0,"index":788}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":806},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57716,"byte_end":57719,"line_start":283,"line_end":283,"column_start":12,"column_end":15},"name":"Map","qualname":"::access::Map","value":"Map {  }","parent":null,"children":[{"krate":0,"index":810},{"krate":0,"index":811},{"krate":0,"index":812}],"decl_id":null,"docs":" An adaptor to provide access to a part of larger structure.","sig":null,"attributes":[{"value":"/ An adaptor to provide access to a part of larger structure.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57497,"byte_end":57560,"line_start":278,"line_end":278,"column_start":1,"column_end":64}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57561,"byte_end":57564,"line_start":279,"line_end":279,"column_start":1,"column_end":4}},{"value":"/ This is the *active* part of this module. Use the [module documentation](index.html) for the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57565,"byte_end":57661,"line_start":280,"line_end":280,"column_start":1,"column_end":97}},{"value":"/ details.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57662,"byte_end":57674,"line_start":281,"line_end":281,"column_start":1,"column_end":13}}]},{"kind":"Method","id":{"krate":0,"index":99},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58456,"byte_end":58459,"line_start":301,"line_end":301,"column_start":12,"column_end":15},"name":"new","qualname":"<Map<A, T, F>>::new","value":"pub fn new<R>(A, F) -> Self where F: Fn(&T) -> &R + Clone","parent":null,"children":[],"decl_id":null,"docs":" Creates a new instance.","sig":null,"attributes":[{"value":"/ Creates a new instance.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57833,"byte_end":57860,"line_start":290,"line_end":290,"column_start":5,"column_end":32}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57865,"byte_end":57868,"line_start":291,"line_end":291,"column_start":5,"column_end":8}},{"value":"/ # Parameters","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57873,"byte_end":57889,"line_start":292,"line_end":292,"column_start":5,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57894,"byte_end":57897,"line_start":293,"line_end":293,"column_start":5,"column_end":8}},{"value":"/ * `access`: Access to the bigger structure. This is usually something like `Arc<ArcSwap>`","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57902,"byte_end":57995,"line_start":294,"line_end":294,"column_start":5,"column_end":98}},{"value":"/   or `&ArcSwap`. It is technically possible to use any other [`Access`] here, though, for","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58000,"byte_end":58093,"line_start":295,"line_end":295,"column_start":5,"column_end":98}},{"value":"/   example to sub-delegate into even smaller structure from a [`Map`] (or generic","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58098,"byte_end":58182,"line_start":296,"line_end":296,"column_start":5,"column_end":89}},{"value":"/   [`Access`]).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58187,"byte_end":58205,"line_start":297,"line_end":297,"column_start":5,"column_end":23}},{"value":"/ * `projection`: A function (or closure) responsible to providing a reference into the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58210,"byte_end":58299,"line_start":298,"line_end":298,"column_start":5,"column_end":94}},{"value":"/   bigger bigger structure, selecting just subset of it. In general, it is expected to be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58304,"byte_end":58396,"line_start":299,"line_end":299,"column_start":5,"column_end":97}},{"value":"/   *cheap* (like only taking reference).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58401,"byte_end":58444,"line_start":300,"line_end":300,"column_start":5,"column_end":48}}]},{"kind":"Struct","id":{"krate":0,"index":827},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59102,"byte_end":59115,"line_start":331,"line_end":331,"column_start":12,"column_end":25},"name":"ConstantDeref","qualname":"::access::ConstantDeref","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":860},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59701,"byte_end":59709,"line_start":349,"line_end":349,"column_start":12,"column_end":20},"name":"Constant","qualname":"::access::Constant","value":"","parent":null,"children":[],"decl_id":null,"docs":" Access to an constant.","sig":null,"attributes":[{"value":"/ Access to an constant.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59235,"byte_end":59261,"line_start":340,"line_end":340,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59262,"byte_end":59265,"line_start":341,"line_end":341,"column_start":1,"column_end":4}},{"value":"/ This wraps a constant value to provide [`Access`] to it. It is constant in the sense that,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59266,"byte_end":59360,"line_start":342,"line_end":342,"column_start":1,"column_end":95}},{"value":"/ unlike [`ArcSwapAny`] and [`Map`], the loaded value will always stay the same (there's no","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59361,"byte_end":59454,"line_start":343,"line_end":343,"column_start":1,"column_end":94}},{"value":"/ remote `store`).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59455,"byte_end":59475,"line_start":344,"line_end":344,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59476,"byte_end":59479,"line_start":345,"line_end":345,"column_start":1,"column_end":4}},{"value":"/ The purpose is mostly testing and plugging a parameter that works generically from code that","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59480,"byte_end":59576,"line_start":346,"line_end":346,"column_start":1,"column_end":97}},{"value":"/ doesn't need the updating functionality.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59577,"byte_end":59621,"line_start":347,"line_end":347,"column_start":1,"column_end":45}}]},{"kind":"Field","id":{"krate":0,"index":863},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59713,"byte_end":59718,"line_start":349,"line_end":349,"column_start":24,"column_end":29},"name":"0","qualname":"::access::Constant::0","value":"T","parent":{"krate":0,"index":860},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":125},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":62818,"byte_end":62824,"line_start":4,"line_end":4,"column_start":15,"column_end":21},"name":"Sealed","qualname":"::as_raw::sealed::Sealed","value":"Sealed","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":129},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63740,"byte_end":63745,"line_start":34,"line_end":34,"column_start":11,"column_end":16},"name":"AsRaw","qualname":"::as_raw::AsRaw","value":"AsRaw<T>: Sealed","parent":null,"children":[{"krate":0,"index":131}],"decl_id":null,"docs":" A trait describing things that can be turned into a raw pointer.","sig":null,"attributes":[{"value":"/ A trait describing things that can be turned into a raw pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":62858,"byte_end":62926,"line_start":9,"line_end":9,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":62927,"byte_end":62930,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ This is just an abstraction of things that can be passed to the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":62931,"byte_end":62998,"line_start":11,"line_end":11,"column_start":1,"column_end":68}},{"value":"/ [`compare_and_swap`](struct.ArcSwapAny.html#method.compare_and_swap).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":62999,"byte_end":63072,"line_start":12,"line_end":12,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63073,"byte_end":63076,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63077,"byte_end":63091,"line_start":14,"line_end":14,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63092,"byte_end":63095,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63096,"byte_end":63103,"line_start":16,"line_end":16,"column_start":1,"column_end":8}},{"value":"/ use std::ptr;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63104,"byte_end":63121,"line_start":17,"line_end":17,"column_start":1,"column_end":18}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63122,"byte_end":63145,"line_start":18,"line_end":18,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63146,"byte_end":63149,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63150,"byte_end":63182,"line_start":20,"line_end":20,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63183,"byte_end":63186,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ let a = Arc::new(42);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63187,"byte_end":63212,"line_start":22,"line_end":22,"column_start":1,"column_end":26}},{"value":"/ let shared = ArcSwapOption::from(Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63213,"byte_end":63272,"line_start":23,"line_end":23,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63273,"byte_end":63276,"line_start":24,"line_end":24,"column_start":1,"column_end":4}},{"value":"/ shared.compare_and_swap(&a, Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63277,"byte_end":63331,"line_start":25,"line_end":25,"column_start":1,"column_end":55}},{"value":"/ shared.compare_and_swap(&None::<Arc<_>>, Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63332,"byte_end":63399,"line_start":26,"line_end":26,"column_start":1,"column_end":68}},{"value":"/ shared.compare_and_swap(shared.load(), Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63400,"byte_end":63465,"line_start":27,"line_end":27,"column_start":1,"column_end":66}},{"value":"/ shared.compare_and_swap(&shared.load(), Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63466,"byte_end":63532,"line_start":28,"line_end":28,"column_start":1,"column_end":67}},{"value":"/ shared.compare_and_swap(ptr::null(), Some(Arc::clone(&a)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63533,"byte_end":63596,"line_start":29,"line_end":29,"column_start":1,"column_end":64}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63597,"byte_end":63604,"line_start":30,"line_end":30,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63605,"byte_end":63608,"line_start":31,"line_end":31,"column_start":1,"column_end":4}},{"value":"/ Due to technical limitation, this is not implemented for owned `Arc`/`Option<Arc<_>>`, they","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63609,"byte_end":63704,"line_start":32,"line_end":32,"column_start":1,"column_end":96}},{"value":"/ need to be borrowed.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63705,"byte_end":63729,"line_start":33,"line_end":33,"column_start":1,"column_end":25}}]},{"kind":"Method","id":{"krate":0,"index":131},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63813,"byte_end":63819,"line_start":36,"line_end":36,"column_start":8,"column_end":14},"name":"as_raw","qualname":"::as_raw::AsRaw::as_raw","value":"pub fn as_raw(&Self) -> *mut T","parent":{"krate":0,"index":129},"children":[],"decl_id":null,"docs":" Converts the value into a raw pointer.\n","sig":null,"attributes":[{"value":"/ Converts the value into a raw pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63763,"byte_end":63805,"line_start":35,"line_end":35,"column_start":5,"column_end":47}}]},{"kind":"Mod","id":{"krate":0,"index":163},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"cache","qualname":"::cache","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","parent":null,"children":[{"krate":0,"index":164},{"krate":0,"index":167},{"krate":0,"index":170},{"krate":0,"index":173},{"krate":0,"index":176},{"krate":0,"index":179},{"krate":0,"index":893},{"krate":0,"index":898},{"krate":0,"index":902},{"krate":0,"index":182},{"krate":0,"index":194},{"krate":0,"index":199},{"krate":0,"index":906},{"krate":0,"index":912},{"krate":0,"index":917},{"krate":0,"index":204}],"decl_id":null,"docs":" Caching handle into the [ArcSwapAny].","sig":null,"attributes":[{"value":"deny(unsafe_code)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64582,"byte_end":64603,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/ Caching handle into the [ArcSwapAny].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64605,"byte_end":64646,"line_start":3,"line_end":3,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64647,"byte_end":64650,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ The [Cache] keeps a copy of the internal [Arc] for faster access.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64651,"byte_end":64720,"line_start":5,"line_end":5,"column_start":1,"column_end":70}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64721,"byte_end":64724,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64725,"byte_end":64750,"line_start":7,"line_end":7,"column_start":1,"column_end":26}}]},{"kind":"Trait","id":{"krate":0,"index":179},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65217,"byte_end":65223,"line_start":23,"line_end":23,"column_start":11,"column_end":17},"name":"Access","qualname":"::cache::Access","value":"Access<T>","parent":null,"children":[{"krate":0,"index":181}],"decl_id":null,"docs":" Generalization of caches providing access to `T`.","sig":null,"attributes":[{"value":"/ Generalization of caches providing access to `T`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64890,"byte_end":64943,"line_start":16,"line_end":16,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64944,"byte_end":64947,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ This abstracts over all kinds of caches that can provide a cheap access to values of type `T`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":64948,"byte_end":65046,"line_start":18,"line_end":18,"column_start":1,"column_end":99}},{"value":"/ This is useful in cases where some code doesn't care if the `T` is the whole structure or just","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65047,"byte_end":65145,"line_start":19,"line_end":19,"column_start":1,"column_end":99}},{"value":"/ a part of it.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65146,"byte_end":65163,"line_start":20,"line_end":20,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65164,"byte_end":65167,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ See the example at [`Cache::map`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65168,"byte_end":65206,"line_start":22,"line_end":22,"column_start":1,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":181},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65375,"byte_end":65379,"line_start":27,"line_end":27,"column_start":8,"column_end":12},"name":"load","qualname":"::cache::Access::load","value":"pub fn load(&mut Self) -> &T","parent":{"krate":0,"index":179},"children":[],"decl_id":null,"docs":" Loads the value from cache.","sig":null,"attributes":[{"value":"/ Loads the value from cache.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65233,"byte_end":65264,"line_start":24,"line_end":24,"column_start":5,"column_end":36}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65269,"byte_end":65272,"line_start":25,"line_end":25,"column_start":5,"column_end":8}},{"value":"/ This revalidates the value in the cache, then provides the access to the cached value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65277,"byte_end":65367,"line_start":26,"line_end":26,"column_start":5,"column_end":95}}]},{"kind":"Struct","id":{"krate":0,"index":893},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68470,"byte_end":68475,"line_start":110,"line_end":110,"column_start":12,"column_end":17},"name":"Cache","qualname":"::cache::Cache","value":"Cache {  }","parent":null,"children":[{"krate":0,"index":896},{"krate":0,"index":897}],"decl_id":null,"docs":" Caching handle for [`ArcSwapAny`][ArcSwapAny].","sig":null,"attributes":[{"value":"/ Caching handle for [`ArcSwapAny`][ArcSwapAny].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65401,"byte_end":65451,"line_start":30,"line_end":30,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65452,"byte_end":65455,"line_start":31,"line_end":31,"column_start":1,"column_end":4}},{"value":"/ Instead of loading the [`Arc`][Arc] on every request from the shared storage, this keeps","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65456,"byte_end":65548,"line_start":32,"line_end":32,"column_start":1,"column_end":93}},{"value":"/ another copy inside itself. Upon request it only cheaply revalidates it is up to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65549,"byte_end":65633,"line_start":33,"line_end":33,"column_start":1,"column_end":85}},{"value":"/ date. If it is, access is significantly faster. If it is stale, the [load_full] is done and the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65634,"byte_end":65733,"line_start":34,"line_end":34,"column_start":1,"column_end":100}},{"value":"/ cache value is replaced. Under a read-heavy loads, the measured speedup are 10-25 times,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65734,"byte_end":65826,"line_start":35,"line_end":35,"column_start":1,"column_end":93}},{"value":"/ depending on the architecture.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65827,"byte_end":65861,"line_start":36,"line_end":36,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65862,"byte_end":65865,"line_start":37,"line_end":37,"column_start":1,"column_end":4}},{"value":"/ There are, however, downsides:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65866,"byte_end":65900,"line_start":38,"line_end":38,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65901,"byte_end":65904,"line_start":39,"line_end":39,"column_start":1,"column_end":4}},{"value":"/ * The handle needs to be kept around by the caller (usually, one per thread). This is fine if","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":65905,"byte_end":66002,"line_start":40,"line_end":40,"column_start":1,"column_end":98}},{"value":"/   there's one global `ArcSwapAny`, but starts being tricky with eg. data structures build from","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66003,"byte_end":66101,"line_start":41,"line_end":41,"column_start":1,"column_end":99}},{"value":"/   them.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66102,"byte_end":66113,"line_start":42,"line_end":42,"column_start":1,"column_end":12}},{"value":"/ * As it keeps a copy of the [Arc] inside the cache, the old value may be kept alive for longer","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66114,"byte_end":66212,"line_start":43,"line_end":43,"column_start":1,"column_end":99}},{"value":"/   period of time ‒ it is replaced by the new value on [load][Cache::load]. You may not want to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66213,"byte_end":66313,"line_start":44,"line_end":44,"column_start":1,"column_end":99}},{"value":"/   use this if dropping the old value in timely manner is important (possibly because of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66314,"byte_end":66405,"line_start":45,"line_end":45,"column_start":1,"column_end":92}},{"value":"/   releasing large amount of RAM or because of closing file handles).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66406,"byte_end":66478,"line_start":46,"line_end":46,"column_start":1,"column_end":73}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66479,"byte_end":66482,"line_start":47,"line_end":47,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66483,"byte_end":66497,"line_start":48,"line_end":48,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66498,"byte_end":66501,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66502,"byte_end":66513,"line_start":50,"line_end":50,"column_start":1,"column_end":12}},{"value":"/ # fn do_something<V>(_v: V) { }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66514,"byte_end":66549,"line_start":51,"line_end":51,"column_start":1,"column_end":36}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66550,"byte_end":66573,"line_start":52,"line_end":52,"column_start":1,"column_end":24}},{"value":"/ use std::sync::atomic::{AtomicBool, Ordering};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66574,"byte_end":66624,"line_start":53,"line_end":53,"column_start":1,"column_end":51}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66625,"byte_end":66628,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ use arc_swap::{ArcSwap, Cache};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66629,"byte_end":66664,"line_start":55,"line_end":55,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66665,"byte_end":66668,"line_start":56,"line_end":56,"column_start":1,"column_end":4}},{"value":"/ let shared = Arc::new(ArcSwap::from_pointee(42));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66669,"byte_end":66722,"line_start":57,"line_end":57,"column_start":1,"column_end":54}},{"value":"/ # let mut threads = Vec::new();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66723,"byte_end":66758,"line_start":58,"line_end":58,"column_start":1,"column_end":36}},{"value":"/ let terminate = Arc::new(AtomicBool::new(false));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66759,"byte_end":66812,"line_start":59,"line_end":59,"column_start":1,"column_end":54}},{"value":"/ // Start 10 worker threads...","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66813,"byte_end":66846,"line_start":60,"line_end":60,"column_start":1,"column_end":34}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66847,"byte_end":66867,"line_start":61,"line_end":61,"column_start":1,"column_end":21}},{"value":"/     let mut cache = Cache::new(Arc::clone(&shared));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66868,"byte_end":66924,"line_start":62,"line_end":62,"column_start":1,"column_end":57}},{"value":"/     let terminate = Arc::clone(&terminate);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66925,"byte_end":66972,"line_start":63,"line_end":63,"column_start":1,"column_end":48}},{"value":"/     # let thread =","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66973,"byte_end":66995,"line_start":64,"line_end":64,"column_start":1,"column_end":23}},{"value":"/     std::thread::spawn(move || {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":66996,"byte_end":67032,"line_start":65,"line_end":65,"column_start":1,"column_end":37}},{"value":"/         // Keep loading it like mad..","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67033,"byte_end":67074,"line_start":66,"line_end":66,"column_start":1,"column_end":42}},{"value":"/         while !terminate.load(Ordering::Relaxed) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67075,"byte_end":67129,"line_start":67,"line_end":67,"column_start":1,"column_end":55}},{"value":"/             let value = cache.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67130,"byte_end":67171,"line_start":68,"line_end":68,"column_start":1,"column_end":42}},{"value":"/             do_something(value);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67172,"byte_end":67208,"line_start":69,"line_end":69,"column_start":1,"column_end":37}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67209,"byte_end":67222,"line_start":70,"line_end":70,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67223,"byte_end":67234,"line_start":71,"line_end":71,"column_start":1,"column_end":12}},{"value":"/     # threads.push(thread);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67235,"byte_end":67266,"line_start":72,"line_end":72,"column_start":1,"column_end":32}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67267,"byte_end":67272,"line_start":73,"line_end":73,"column_start":1,"column_end":6}},{"value":"/ shared.store(Arc::new(12));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67273,"byte_end":67304,"line_start":74,"line_end":74,"column_start":1,"column_end":32}},{"value":"/ # terminate.store(true, Ordering::Relaxed);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67305,"byte_end":67352,"line_start":75,"line_end":75,"column_start":1,"column_end":48}},{"value":"/ # for thread in threads { thread.join().unwrap() }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67353,"byte_end":67407,"line_start":76,"line_end":76,"column_start":1,"column_end":55}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67408,"byte_end":67415,"line_start":77,"line_end":77,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67416,"byte_end":67419,"line_start":78,"line_end":78,"column_start":1,"column_end":4}},{"value":"/ Another one with using a thread local storage and explicit types:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67420,"byte_end":67489,"line_start":79,"line_end":79,"column_start":1,"column_end":70}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67490,"byte_end":67493,"line_start":80,"line_end":80,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67494,"byte_end":67505,"line_start":81,"line_end":81,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67506,"byte_end":67531,"line_start":82,"line_end":82,"column_start":1,"column_end":26}},{"value":"/ # use std::ops::Deref;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67532,"byte_end":67558,"line_start":83,"line_end":83,"column_start":1,"column_end":27}},{"value":"/ # use std::cell::RefCell;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67559,"byte_end":67588,"line_start":84,"line_end":84,"column_start":1,"column_end":30}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67589,"byte_end":67594,"line_start":85,"line_end":85,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67595,"byte_end":67623,"line_start":86,"line_end":86,"column_start":1,"column_end":29}},{"value":"/ # use arc_swap::cache::Cache;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67624,"byte_end":67657,"line_start":87,"line_end":87,"column_start":1,"column_end":34}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67658,"byte_end":67690,"line_start":88,"line_end":88,"column_start":1,"column_end":33}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67691,"byte_end":67696,"line_start":89,"line_end":89,"column_start":1,"column_end":6}},{"value":"/ # #[derive(Debug, Default)]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67697,"byte_end":67728,"line_start":90,"line_end":90,"column_start":1,"column_end":32}},{"value":"/ # struct Config;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67729,"byte_end":67749,"line_start":91,"line_end":91,"column_start":1,"column_end":21}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67750,"byte_end":67755,"line_start":92,"line_end":92,"column_start":1,"column_end":6}},{"value":"/ static CURRENT_CONFIG: Lazy<ArcSwap<Config>> = Lazy::new(|| ArcSwap::from_pointee(Config::default()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67756,"byte_end":67862,"line_start":93,"line_end":93,"column_start":1,"column_end":107}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67863,"byte_end":67866,"line_start":94,"line_end":94,"column_start":1,"column_end":4}},{"value":"/ thread_local! {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67867,"byte_end":67886,"line_start":95,"line_end":95,"column_start":1,"column_end":20}},{"value":"/     static CACHE: RefCell<Cache<&'static ArcSwap<Config>, Arc<Config>>> = RefCell::new(Cache::from(CURRENT_CONFIG.deref()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":67887,"byte_end":68015,"line_start":96,"line_end":96,"column_start":1,"column_end":129}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68016,"byte_end":68021,"line_start":97,"line_end":97,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68022,"byte_end":68025,"line_start":98,"line_end":98,"column_start":1,"column_end":4}},{"value":"/ CACHE.with(|c| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68026,"byte_end":68046,"line_start":99,"line_end":99,"column_start":1,"column_end":21}},{"value":"/     // * RefCell needed, because load on cache is `&mut`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68047,"byte_end":68108,"line_start":100,"line_end":100,"column_start":1,"column_end":62}},{"value":"/     // * You want to operate inside the `with` ‒ cloning the Arc is comparably expensive as","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68109,"byte_end":68206,"line_start":101,"line_end":101,"column_start":1,"column_end":96}},{"value":"/     //   ArcSwap::load itself and whatever you'd save by the cache would be lost on that.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68207,"byte_end":68300,"line_start":102,"line_end":102,"column_start":1,"column_end":94}},{"value":"/     println!(\"{:?}\", c.borrow_mut().load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68301,"byte_end":68349,"line_start":103,"line_end":103,"column_start":1,"column_end":49}},{"value":"/ });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68350,"byte_end":68357,"line_start":104,"line_end":104,"column_start":1,"column_end":8}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68358,"byte_end":68365,"line_start":105,"line_end":105,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68366,"byte_end":68369,"line_start":106,"line_end":106,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68370,"byte_end":68395,"line_start":107,"line_end":107,"column_start":1,"column_end":26}},{"value":"/ [load_full]: ArcSwapAny::load_full","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68396,"byte_end":68434,"line_start":108,"line_end":108,"column_start":1,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":186},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69143,"byte_end":69146,"line_start":130,"line_end":130,"column_start":12,"column_end":15},"name":"new","qualname":"<Cache<A, T>>::new","value":"pub fn new(A) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Creates a new caching handle.","sig":null,"attributes":[{"value":"/ Creates a new caching handle.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68633,"byte_end":68666,"line_start":121,"line_end":121,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68671,"byte_end":68674,"line_start":122,"line_end":122,"column_start":5,"column_end":8}},{"value":"/ The parameter is something dereferencing into an [`ArcSwapAny`] (eg. either to [`ArcSwap`]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68679,"byte_end":68773,"line_start":123,"line_end":123,"column_start":5,"column_end":99}},{"value":"/ or [`ArcSwapOption`]). That can be [`ArcSwapAny`] itself, but that's not very useful. But","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68778,"byte_end":68871,"line_start":124,"line_end":124,"column_start":5,"column_end":98}},{"value":"/ it also can be a reference to it or `Arc`, which makes it possible to share the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68876,"byte_end":68959,"line_start":125,"line_end":125,"column_start":5,"column_end":88}},{"value":"/ [`ArcSwapAny`] with multiple caches or access it in non-cached way too.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68964,"byte_end":69039,"line_start":126,"line_end":126,"column_start":5,"column_end":80}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69044,"byte_end":69047,"line_start":127,"line_end":127,"column_start":5,"column_end":8}},{"value":"/ [`ArcSwapOption`]: crate::ArcSwapOption","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69052,"byte_end":69095,"line_start":128,"line_end":128,"column_start":5,"column_end":48}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69100,"byte_end":69131,"line_start":129,"line_end":129,"column_start":5,"column_end":36}}]},{"kind":"Method","id":{"krate":0,"index":187},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69334,"byte_end":69342,"line_start":136,"line_end":136,"column_start":12,"column_end":20},"name":"arc_swap","qualname":"<Cache<A, T>>::arc_swap","value":"pub fn arc_swap(&Self) -> &A::Target","parent":null,"children":[],"decl_id":null,"docs":" Gives access to the (possibly shared) cached [`ArcSwapAny`].\n","sig":null,"attributes":[{"value":"/ Gives access to the (possibly shared) cached [`ArcSwapAny`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69258,"byte_end":69322,"line_start":135,"line_end":135,"column_start":5,"column_end":69}}]},{"kind":"Method","id":{"krate":0,"index":188},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69804,"byte_end":69808,"line_start":148,"line_end":148,"column_start":12,"column_end":16},"name":"load","qualname":"<Cache<A, T>>::load","value":"pub fn load(&mut Self) -> &T","parent":null,"children":[],"decl_id":null,"docs":" Loads the currently held value.","sig":null,"attributes":[{"value":"/ Loads the currently held value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69400,"byte_end":69435,"line_start":140,"line_end":140,"column_start":5,"column_end":40}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69440,"byte_end":69443,"line_start":141,"line_end":141,"column_start":5,"column_end":8}},{"value":"/ This first checks if the cached value is up to date. This check is very cheap.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69448,"byte_end":69530,"line_start":142,"line_end":142,"column_start":5,"column_end":87}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69535,"byte_end":69538,"line_start":143,"line_end":143,"column_start":5,"column_end":8}},{"value":"/ If it is up to date, the cached value is simply returned without additional costs. If it is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69543,"byte_end":69638,"line_start":144,"line_end":144,"column_start":5,"column_end":100}},{"value":"/ outdated, a load is done on the underlying shared storage. The newly loaded value is then","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69643,"byte_end":69736,"line_start":145,"line_end":145,"column_start":5,"column_end":98}},{"value":"/ stored in the cache and returned.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69741,"byte_end":69778,"line_start":146,"line_end":146,"column_start":5,"column_end":42}},{"value":"inline","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":69783,"byte_end":69792,"line_start":147,"line_end":147,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":191},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72415,"byte_end":72418,"line_start":218,"line_end":218,"column_start":12,"column_end":15},"name":"map","qualname":"<Cache<A, T>>::map","value":"pub fn map<F, U>(Self, F) -> MapCache<A, T, F> where F: FnMut(&T) -> &U","parent":null,"children":[],"decl_id":null,"docs":" Turns this cache into a cache with a projection inside the cached value.","sig":null,"attributes":[{"value":"/ Turns this cache into a cache with a projection inside the cached value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70526,"byte_end":70602,"line_start":170,"line_end":170,"column_start":5,"column_end":81}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70607,"byte_end":70610,"line_start":171,"line_end":171,"column_start":5,"column_end":8}},{"value":"/ You'd use this in case when some part of code needs access to fresh values of `U`, however","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70615,"byte_end":70709,"line_start":172,"line_end":172,"column_start":5,"column_end":99}},{"value":"/ a bigger structure containing `U` is provided by this cache. The possibility of giving the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70714,"byte_end":70808,"line_start":173,"line_end":173,"column_start":5,"column_end":99}},{"value":"/ whole structure to the part of the code falls short in terms of reusability (the part of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70813,"byte_end":70905,"line_start":174,"line_end":174,"column_start":5,"column_end":97}},{"value":"/ the code could be used within multiple contexts, each with a bigger different structure","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":70910,"byte_end":71001,"line_start":175,"line_end":175,"column_start":5,"column_end":96}},{"value":"/ containing `U`) and code separation (the code shouldn't needs to know about the big","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71006,"byte_end":71093,"line_start":176,"line_end":176,"column_start":5,"column_end":92}},{"value":"/ structure).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71098,"byte_end":71113,"line_start":177,"line_end":177,"column_start":5,"column_end":20}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71118,"byte_end":71121,"line_start":178,"line_end":178,"column_start":5,"column_end":8}},{"value":"/ # Warning","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71126,"byte_end":71139,"line_start":179,"line_end":179,"column_start":5,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71144,"byte_end":71147,"line_start":180,"line_end":180,"column_start":5,"column_end":8}},{"value":"/ As the provided `f` is called inside every [`load`][Access::load], this one should be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71152,"byte_end":71241,"line_start":181,"line_end":181,"column_start":5,"column_end":94}},{"value":"/ cheap. Most often it is expected to be just a closure taking reference of some inner field.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71246,"byte_end":71341,"line_start":182,"line_end":182,"column_start":5,"column_end":100}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71346,"byte_end":71349,"line_start":183,"line_end":183,"column_start":5,"column_end":8}},{"value":"/ For the same reasons, it should not have side effects and should never panic (these will","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71354,"byte_end":71446,"line_start":184,"line_end":184,"column_start":5,"column_end":97}},{"value":"/ not break Rust's safety rules, but might produce behaviour you don't expect).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71451,"byte_end":71532,"line_start":185,"line_end":185,"column_start":5,"column_end":86}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71537,"byte_end":71540,"line_start":186,"line_end":186,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71545,"byte_end":71559,"line_start":187,"line_end":187,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71564,"byte_end":71567,"line_start":188,"line_end":188,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71572,"byte_end":71583,"line_start":189,"line_end":189,"column_start":5,"column_end":16}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71588,"byte_end":71614,"line_start":190,"line_end":190,"column_start":5,"column_end":31}},{"value":"/ use arc_swap::cache::{Access, Cache};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71619,"byte_end":71660,"line_start":191,"line_end":191,"column_start":5,"column_end":46}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71665,"byte_end":71668,"line_start":192,"line_end":192,"column_start":5,"column_end":8}},{"value":"/ struct InnerCfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71673,"byte_end":71694,"line_start":193,"line_end":193,"column_start":5,"column_end":26}},{"value":"/     answer: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71699,"byte_end":71721,"line_start":194,"line_end":194,"column_start":5,"column_end":27}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71726,"byte_end":71731,"line_start":195,"line_end":195,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71736,"byte_end":71739,"line_start":196,"line_end":196,"column_start":5,"column_end":8}},{"value":"/ struct FullCfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71744,"byte_end":71764,"line_start":197,"line_end":197,"column_start":5,"column_end":25}},{"value":"/     inner: InnerCfg,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71769,"byte_end":71793,"line_start":198,"line_end":198,"column_start":5,"column_end":29}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71798,"byte_end":71803,"line_start":199,"line_end":199,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71808,"byte_end":71811,"line_start":200,"line_end":200,"column_start":5,"column_end":8}},{"value":"/ fn use_inner<A: Access<InnerCfg>>(cache: &mut A) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71816,"byte_end":71870,"line_start":201,"line_end":201,"column_start":5,"column_end":59}},{"value":"/     let value = cache.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71875,"byte_end":71908,"line_start":202,"line_end":202,"column_start":5,"column_end":38}},{"value":"/     println!(\"The answer is: {}\", value.answer);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71913,"byte_end":71965,"line_start":203,"line_end":203,"column_start":5,"column_end":57}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71970,"byte_end":71975,"line_start":204,"line_end":204,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71980,"byte_end":71983,"line_start":205,"line_end":205,"column_start":5,"column_end":8}},{"value":"/ let full_cfg = ArcSwap::from_pointee(FullCfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":71988,"byte_end":72038,"line_start":206,"line_end":206,"column_start":5,"column_end":55}},{"value":"/     inner: InnerCfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72043,"byte_end":72068,"line_start":207,"line_end":207,"column_start":5,"column_end":30}},{"value":"/         answer: 42,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72073,"byte_end":72096,"line_start":208,"line_end":208,"column_start":5,"column_end":28}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72101,"byte_end":72110,"line_start":209,"line_end":209,"column_start":5,"column_end":14}},{"value":"/ });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72115,"byte_end":72122,"line_start":210,"line_end":210,"column_start":5,"column_end":12}},{"value":"/ let cache = Cache::new(&full_cfg);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72127,"byte_end":72165,"line_start":211,"line_end":211,"column_start":5,"column_end":43}},{"value":"/ use_inner(&mut cache.map(|full| &full.inner));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72170,"byte_end":72220,"line_start":212,"line_end":212,"column_start":5,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72225,"byte_end":72228,"line_start":213,"line_end":213,"column_start":5,"column_end":8}},{"value":"/ let inner_cfg = ArcSwap::from_pointee(InnerCfg { answer: 24 });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72233,"byte_end":72300,"line_start":214,"line_end":214,"column_start":5,"column_end":72}},{"value":"/ let mut inner_cache = Cache::new(&inner_cfg);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72305,"byte_end":72354,"line_start":215,"line_end":215,"column_start":5,"column_end":54}},{"value":"/ use_inner(&mut inner_cache);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72359,"byte_end":72391,"line_start":216,"line_end":216,"column_start":5,"column_end":37}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72396,"byte_end":72403,"line_start":217,"line_end":217,"column_start":5,"column_end":12}}]},{"kind":"Struct","id":{"krate":0,"index":906},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73293,"byte_end":73301,"line_start":256,"line_end":256,"column_start":12,"column_end":20},"name":"MapCache","qualname":"::cache::MapCache","value":"MapCache {  }","parent":null,"children":[{"krate":0,"index":910},{"krate":0,"index":911}],"decl_id":null,"docs":" An implementation of a cache with a projection into the accessed value.","sig":null,"attributes":[{"value":"/ An implementation of a cache with a projection into the accessed value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73032,"byte_end":73107,"line_start":251,"line_end":251,"column_start":1,"column_end":76}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73108,"byte_end":73111,"line_start":252,"line_end":252,"column_start":1,"column_end":4}},{"value":"/ This is the implementation structure for [`Cache::map`]. It can't be created directly and it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73112,"byte_end":73208,"line_start":253,"line_end":253,"column_start":1,"column_end":97}},{"value":"/ should be used through the [`Access`] trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73209,"byte_end":73257,"line_start":254,"line_end":254,"column_start":1,"column_end":49}}]},{"kind":"Mod","id":{"krate":0,"index":387},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"docs","qualname":"::docs","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","parent":null,"children":[{"krate":0,"index":388},{"krate":0,"index":389},{"krate":0,"index":390},{"krate":0,"index":391}],"decl_id":null,"docs":" Additional documentation.","sig":null,"attributes":[{"value":"/ Additional documentation.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":115879,"byte_end":115908,"line_start":1,"line_end":1,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":115909,"byte_end":115912,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ Here we have some more general topics that might be good to know that just don't fit to the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":115913,"byte_end":116008,"line_start":3,"line_end":3,"column_start":1,"column_end":96}},{"value":"/ crate level intro.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116009,"byte_end":116031,"line_start":4,"line_end":4,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116032,"byte_end":116035,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ Also, there were some previous blog posts about the crate which you might find interesting.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116036,"byte_end":116131,"line_start":6,"line_end":6,"column_start":1,"column_end":96}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116132,"byte_end":116135,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ # Atomic orderings","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116136,"byte_end":116158,"line_start":8,"line_end":8,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116159,"byte_end":116162,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ Each operation on the [`ArcSwapAny`] with [`DefaultStrategy`] type callable concurrently (eg.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116163,"byte_end":116260,"line_start":10,"line_end":10,"column_start":1,"column_end":98}},{"value":"/ [`load`], but not [`into_inner`]) contains at least one [`SeqCst`] atomic read-write operation,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116261,"byte_end":116360,"line_start":11,"line_end":11,"column_start":1,"column_end":100}},{"value":"/ therefore even operations on different instances have a defined global order of operations.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116361,"byte_end":116456,"line_start":12,"line_end":12,"column_start":1,"column_end":96}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116457,"byte_end":116460,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ # Features","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116461,"byte_end":116475,"line_start":14,"line_end":14,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116476,"byte_end":116479,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ The `weak` feature adds the ability to use arc-swap with the [`Weak`] pointer too,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116480,"byte_end":116566,"line_start":16,"line_end":16,"column_start":1,"column_end":87}},{"value":"/ through the [`ArcSwapWeak`] type. The needed std support is stabilized in rust version 1.45 (as","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116567,"byte_end":116666,"line_start":17,"line_end":17,"column_start":1,"column_end":100}},{"value":"/ of now in beta).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116667,"byte_end":116687,"line_start":18,"line_end":18,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116688,"byte_end":116691,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ The `experimental-strategies` enables few more strategies that can be used. Note that these","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116692,"byte_end":116787,"line_start":20,"line_end":20,"column_start":1,"column_end":96}},{"value":"/ **are not** part of the API stability guarantees and they may be changed, renamed or removed at","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116788,"byte_end":116887,"line_start":21,"line_end":21,"column_start":1,"column_end":100}},{"value":"/ any time.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116888,"byte_end":116901,"line_start":22,"line_end":22,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116902,"byte_end":116905,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ # Minimal compiler version","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116906,"byte_end":116936,"line_start":24,"line_end":24,"column_start":1,"column_end":31}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116937,"byte_end":116940,"line_start":25,"line_end":25,"column_start":1,"column_end":4}},{"value":"/ The `1` versions will compile on all compilers supporting the 2018 edition. Note that this","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":116941,"byte_end":117035,"line_start":26,"line_end":26,"column_start":1,"column_end":95}},{"value":"/ applies only if no additional feature flags are enabled and does not apply to compiling or","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117036,"byte_end":117130,"line_start":27,"line_end":27,"column_start":1,"column_end":95}},{"value":"/ running tests.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117131,"byte_end":117149,"line_start":28,"line_end":28,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117150,"byte_end":117153,"line_start":29,"line_end":29,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwapAny`]: crate::ArcSwapAny","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117154,"byte_end":117191,"line_start":30,"line_end":30,"column_start":1,"column_end":38}},{"value":"/ [`ArcSwapWeak`]: crate::ArcSwapWeak","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117192,"byte_end":117231,"line_start":31,"line_end":31,"column_start":1,"column_end":40}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117232,"byte_end":117269,"line_start":32,"line_end":32,"column_start":1,"column_end":38}},{"value":"/ [`into_inner`]: crate::ArcSwapAny::into_inner","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117270,"byte_end":117319,"line_start":33,"line_end":33,"column_start":1,"column_end":50}},{"value":"/ [`DefaultStrategy`]: crate::DefaultStrategy","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117320,"byte_end":117367,"line_start":34,"line_end":34,"column_start":1,"column_end":48}},{"value":"/ [`SeqCst`]: std::sync::atomic::Ordering::SeqCst","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117368,"byte_end":117419,"line_start":35,"line_end":35,"column_start":1,"column_end":52}},{"value":"/ [`Weak`]: std::sync::Weak","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117420,"byte_end":117449,"line_start":36,"line_end":36,"column_start":1,"column_end":30}}]},{"kind":"Mod","id":{"krate":0,"index":388},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"internal","qualname":"::docs::internal","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","parent":null,"children":[],"decl_id":null,"docs":" Internal details.","sig":null,"attributes":[{"value":"/ Internal details.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117530,"byte_end":117551,"line_start":1,"line_end":1,"column_start":1,"column_end":22}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117552,"byte_end":117555,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ While the other parts of documentation are useful to users of the crate, this part is probably","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117556,"byte_end":117654,"line_start":3,"line_end":3,"column_start":1,"column_end":99}},{"value":"/ helpful only if you want to look into the code or are curious about how it works internally.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117655,"byte_end":117751,"line_start":4,"line_end":4,"column_start":1,"column_end":97}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117752,"byte_end":117755,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ Also note that any of these details may change in future versions and are not part of the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117756,"byte_end":117849,"line_start":6,"line_end":6,"column_start":1,"column_end":94}},{"value":"/ stability guarantees. Don't rely on anything here.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117850,"byte_end":117904,"line_start":7,"line_end":7,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117905,"byte_end":117908,"line_start":8,"line_end":8,"column_start":1,"column_end":4}},{"value":"/ # Storing the [`Arc`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117909,"byte_end":117935,"line_start":9,"line_end":9,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117936,"byte_end":117939,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ The [`Arc`] can be turned into a raw pointer and back. This is abstracted by the [`RefCnt`]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":117940,"byte_end":118035,"line_start":11,"line_end":11,"column_start":1,"column_end":96}},{"value":"/ trait and it is technically possible to implement it for custom types (this crate also","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118036,"byte_end":118126,"line_start":12,"line_end":12,"column_start":1,"column_end":91}},{"value":"/ implements it for [`Rc`] and [`Weak`], though the actual usefulness of these is a bit","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118127,"byte_end":118216,"line_start":13,"line_end":13,"column_start":1,"column_end":90}},{"value":"/ questionable).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118217,"byte_end":118235,"line_start":14,"line_end":14,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118236,"byte_end":118239,"line_start":15,"line_end":15,"column_start":1,"column_end":4}},{"value":"/ The raw pointer is stored inside an [`AtomicPtr`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118240,"byte_end":118294,"line_start":16,"line_end":16,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118295,"byte_end":118298,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ # Protection of reference counts","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118299,"byte_end":118335,"line_start":18,"line_end":18,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118336,"byte_end":118339,"line_start":19,"line_end":19,"column_start":1,"column_end":4}},{"value":"/ The first idea would be to just use [`AtomicPtr`] with whatever the [`Arc::into_raw`] returns.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118340,"byte_end":118438,"line_start":20,"line_end":20,"column_start":1,"column_end":99}},{"value":"/ Then replacing it would be fine (there's no need to update ref counts). The load needs to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118439,"byte_end":118532,"line_start":21,"line_end":21,"column_start":1,"column_end":94}},{"value":"/ increment the reference count ‒ one still stays inside and another is returned to the caller.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118533,"byte_end":118632,"line_start":22,"line_end":22,"column_start":1,"column_end":98}},{"value":"/ This is done by re-creating the Arc from the raw pointer and then cloning it, throwing one","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118633,"byte_end":118727,"line_start":23,"line_end":23,"column_start":1,"column_end":95}},{"value":"/ instance away (without destroying it).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118728,"byte_end":118770,"line_start":24,"line_end":24,"column_start":1,"column_end":43}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118771,"byte_end":118774,"line_start":25,"line_end":25,"column_start":1,"column_end":4}},{"value":"/ This approach has a problem. There's a short time between we read the raw pointer and increment","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118775,"byte_end":118874,"line_start":26,"line_end":26,"column_start":1,"column_end":100}},{"value":"/ the count. If some other thread replaces the stored Arc and throws it away, the ref count could","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118875,"byte_end":118974,"line_start":27,"line_end":27,"column_start":1,"column_end":100}},{"value":"/ drop to 0, get destroyed and we would be trying to bump ref counts in a ghost, which would be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":118975,"byte_end":119072,"line_start":28,"line_end":28,"column_start":1,"column_end":98}},{"value":"/ totally broken.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119073,"byte_end":119092,"line_start":29,"line_end":29,"column_start":1,"column_end":20}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119093,"byte_end":119096,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ To prevent this, we actually use two approaches in a hybrid manner.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119097,"byte_end":119168,"line_start":31,"line_end":31,"column_start":1,"column_end":72}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119169,"byte_end":119172,"line_start":32,"line_end":32,"column_start":1,"column_end":4}},{"value":"/ The first one is based on hazard pointers idea, but slightly modified. There's a global","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119173,"byte_end":119264,"line_start":33,"line_end":33,"column_start":1,"column_end":92}},{"value":"/ repository of pointers that owe a reference. When someone swaps a pointer, it walks this list","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119265,"byte_end":119362,"line_start":34,"line_end":34,"column_start":1,"column_end":98}},{"value":"/ and pays all the debts (and takes them out of the repository).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119363,"byte_end":119429,"line_start":35,"line_end":35,"column_start":1,"column_end":67}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119430,"byte_end":119433,"line_start":36,"line_end":36,"column_start":1,"column_end":4}},{"value":"/ For simplicity and performance, storing into the repository is fallible. If storing into the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119434,"byte_end":119530,"line_start":37,"line_end":37,"column_start":1,"column_end":97}},{"value":"/ repository fails (because the thread used up all its own slots, or because the pointer got","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119531,"byte_end":119625,"line_start":38,"line_end":38,"column_start":1,"column_end":95}},{"value":"/ replaced in just the wrong moment and it can't confirm the reservation), unlike the full","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119626,"byte_end":119718,"line_start":39,"line_end":39,"column_start":1,"column_end":93}},{"value":"/ hazard-pointers approach, we don't retry, but fall back onto secondary strategy.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119719,"byte_end":119803,"line_start":40,"line_end":40,"column_start":1,"column_end":85}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119804,"byte_end":119807,"line_start":41,"line_end":41,"column_start":1,"column_end":4}},{"value":"/ The secondary strategy is similar, but a bit more complex (and therefore slower, that's why it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119808,"byte_end":119906,"line_start":42,"line_end":42,"column_start":1,"column_end":99}},{"value":"/ is only a fallback). We first publish an intent to read a pointer (and where we are reading it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":119907,"byte_end":120005,"line_start":43,"line_end":43,"column_start":1,"column_end":99}},{"value":"/ from). Then we actually do so and publish the debt, like previously.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120006,"byte_end":120078,"line_start":44,"line_end":44,"column_start":1,"column_end":73}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120079,"byte_end":120082,"line_start":45,"line_end":45,"column_start":1,"column_end":4}},{"value":"/ The writer pays the debts as usual. But also, if it sees the intent to read the value, it helps","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120083,"byte_end":120182,"line_start":46,"line_end":46,"column_start":1,"column_end":100}},{"value":"/ along, reads it, bumps the reference and passes it to the reader. Therefore, if the reader","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120183,"byte_end":120277,"line_start":47,"line_end":47,"column_start":1,"column_end":95}},{"value":"/ fails to do the protection itself, because it got interrupted by a writer, it finds a","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120278,"byte_end":120367,"line_start":48,"line_end":48,"column_start":1,"column_end":90}},{"value":"/ ready-made replacement value it can just use and doesn't have to retry. Also, the writer","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120368,"byte_end":120460,"line_start":49,"line_end":49,"column_start":1,"column_end":93}},{"value":"/ doesn't have to wait for the reader in any way, because it can just solve its problem and move","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120461,"byte_end":120559,"line_start":50,"line_end":50,"column_start":1,"column_end":99}},{"value":"/ on.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120560,"byte_end":120567,"line_start":51,"line_end":51,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120568,"byte_end":120571,"line_start":52,"line_end":52,"column_start":1,"column_end":4}},{"value":"/ # Unsafety","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120572,"byte_end":120586,"line_start":53,"line_end":53,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120587,"byte_end":120590,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ All the uses of the unsafe keyword is just to turn the raw pointer back to Arc. It originated","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120591,"byte_end":120688,"line_start":55,"line_end":55,"column_start":1,"column_end":98}},{"value":"/ from an Arc in the first place, so the only thing to ensure is it is still valid. That means its","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120689,"byte_end":120789,"line_start":56,"line_end":56,"column_start":1,"column_end":101}},{"value":"/ ref count never dropped to 0.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120790,"byte_end":120823,"line_start":57,"line_end":57,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120824,"byte_end":120827,"line_start":58,"line_end":58,"column_start":1,"column_end":4}},{"value":"/ At the beginning, there's ref count of 1 stored in the raw pointer (and maybe some others","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120828,"byte_end":120921,"line_start":59,"line_end":59,"column_start":1,"column_end":94}},{"value":"/ elsewhere, but we can't rely on these). This 1 stays there for the whole time the pointer is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":120922,"byte_end":121018,"line_start":60,"line_end":60,"column_start":1,"column_end":97}},{"value":"/ stored there. When the arc is replaced, this 1 is returned to the caller, so we just have to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121019,"byte_end":121115,"line_start":61,"line_end":61,"column_start":1,"column_end":97}},{"value":"/ make sure no more readers access it by that time.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121116,"byte_end":121169,"line_start":62,"line_end":62,"column_start":1,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121170,"byte_end":121173,"line_start":63,"line_end":63,"column_start":1,"column_end":4}},{"value":"/ # Leases and debts","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121174,"byte_end":121196,"line_start":64,"line_end":64,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121197,"byte_end":121200,"line_start":65,"line_end":65,"column_start":1,"column_end":4}},{"value":"/ Instead of incrementing the reference count, the pointer reference can be owed. In such case, it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121201,"byte_end":121301,"line_start":66,"line_end":66,"column_start":1,"column_end":101}},{"value":"/ is recorded into a global storage. As each thread has its own storage (the global storage is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121302,"byte_end":121398,"line_start":67,"line_end":67,"column_start":1,"column_end":97}},{"value":"/ composed of multiple thread storages), the readers don't contend. When the pointer is no longer","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121399,"byte_end":121498,"line_start":68,"line_end":68,"column_start":1,"column_end":100}},{"value":"/ in use, the debt is erased.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121499,"byte_end":121530,"line_start":69,"line_end":69,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121531,"byte_end":121534,"line_start":70,"line_end":70,"column_start":1,"column_end":4}},{"value":"/ The writer pays all the existing debts, therefore the reader have the full Arc with ref count at","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121535,"byte_end":121635,"line_start":71,"line_end":71,"column_start":1,"column_end":101}},{"value":"/ that time. The reader is made aware the debt was paid and decrements the reference count.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121636,"byte_end":121729,"line_start":72,"line_end":72,"column_start":1,"column_end":94}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121730,"byte_end":121733,"line_start":73,"line_end":73,"column_start":1,"column_end":4}},{"value":"/ # Memory orders","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121734,"byte_end":121753,"line_start":74,"line_end":74,"column_start":1,"column_end":20}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121754,"byte_end":121757,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ ## Synchronizing the data pointed to by the pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121758,"byte_end":121814,"line_start":76,"line_end":76,"column_start":1,"column_end":57}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121815,"byte_end":121818,"line_start":77,"line_end":77,"column_start":1,"column_end":4}},{"value":"/ We have AcqRel (well, SeqCst, but that's included) on the swap and Acquire on the loads. In case","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121819,"byte_end":121919,"line_start":78,"line_end":78,"column_start":1,"column_end":101}},{"value":"/ of the double read around the debt allocation, we do that on the *second*, because of ABA.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":121920,"byte_end":122014,"line_start":79,"line_end":79,"column_start":1,"column_end":95}},{"value":"/ That's also why that SeqCst on the allocation of debt itself is not enough.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122015,"byte_end":122094,"line_start":80,"line_end":80,"column_start":1,"column_end":80}},{"value":"/ the *latest* decrement. By making both the increment and decrement AcqRel, we effectively chain","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122095,"byte_end":122194,"line_start":81,"line_end":81,"column_start":1,"column_end":100}},{"value":"/ the edges together.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122195,"byte_end":122218,"line_start":82,"line_end":82,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122219,"byte_end":122222,"line_start":83,"line_end":83,"column_start":1,"column_end":4}},{"value":"/ # Memory orders around debts","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122223,"byte_end":122255,"line_start":84,"line_end":84,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122256,"byte_end":122259,"line_start":85,"line_end":85,"column_start":1,"column_end":4}},{"value":"/ The linked list of debt nodes only grows. The shape of the list (existence of nodes) is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122260,"byte_end":122351,"line_start":86,"line_end":86,"column_start":1,"column_end":92}},{"value":"/ synchronized through Release on creation and Acquire on load on the head pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122352,"byte_end":122437,"line_start":87,"line_end":87,"column_start":1,"column_end":86}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122438,"byte_end":122441,"line_start":88,"line_end":88,"column_start":1,"column_end":4}},{"value":"/ The debts work similar to locks ‒ Acquire and Release make all the pointer manipulation at the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122442,"byte_end":122542,"line_start":89,"line_end":89,"column_start":1,"column_end":99}},{"value":"/ interval where it is written down. However, we use the SeqCst on the allocation of the debt","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122543,"byte_end":122638,"line_start":90,"line_end":90,"column_start":1,"column_end":96}},{"value":"/ because when we see an empty slot, we need to make sure that it happened after we have","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122639,"byte_end":122729,"line_start":91,"line_end":91,"column_start":1,"column_end":91}},{"value":"/ overwritten the pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122730,"byte_end":122758,"line_start":92,"line_end":92,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122759,"byte_end":122762,"line_start":93,"line_end":93,"column_start":1,"column_end":4}},{"value":"/ In case the writer pays the debt, it sees the new enough data (for the same reasons the stale","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122763,"byte_end":122860,"line_start":94,"line_end":94,"column_start":1,"column_end":98}},{"value":"/ empties are not seen). The reference count on the Arc is AcqRel and makes sure it is not","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122861,"byte_end":122953,"line_start":95,"line_end":95,"column_start":1,"column_end":93}},{"value":"/ destroyed too soon. The writer traverses all the slots, therefore they don't need to synchronize","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":122954,"byte_end":123054,"line_start":96,"line_end":96,"column_start":1,"column_end":101}},{"value":"/ with each other.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123055,"byte_end":123075,"line_start":97,"line_end":97,"column_start":1,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123076,"byte_end":123079,"line_start":98,"line_end":98,"column_start":1,"column_end":4}},{"value":"/ Further details are inside the internal `debt` module.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123080,"byte_end":123138,"line_start":99,"line_end":99,"column_start":1,"column_end":59}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123139,"byte_end":123142,"line_start":100,"line_end":100,"column_start":1,"column_end":4}},{"value":"/ [`RefCnt`]: crate::RefCnt","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123143,"byte_end":123172,"line_start":101,"line_end":101,"column_start":1,"column_end":30}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123173,"byte_end":123200,"line_start":102,"line_end":102,"column_start":1,"column_end":28}},{"value":"/ [`Arc::into_raw`]: std::sync::Arc::into_raw","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123201,"byte_end":123248,"line_start":103,"line_end":103,"column_start":1,"column_end":48}},{"value":"/ [`Rc`]: std::rc::Rc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123249,"byte_end":123272,"line_start":104,"line_end":104,"column_start":1,"column_end":24}},{"value":"/ [`Weak`]: std::sync::Weak","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123273,"byte_end":123302,"line_start":105,"line_end":105,"column_start":1,"column_end":30}},{"value":"/ [`AtomicPtr`]: std::sync::atomic::AtomicPtr","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/internal.rs","byte_start":123303,"byte_end":123350,"line_start":106,"line_end":106,"column_start":1,"column_end":48}}]},{"kind":"Mod","id":{"krate":0,"index":389},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"limitations","qualname":"::docs::limitations","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","parent":null,"children":[],"decl_id":null,"docs":" Limitations and common pitfalls.","sig":null,"attributes":[{"value":"/ Limitations and common pitfalls.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123352,"byte_end":123388,"line_start":1,"line_end":1,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123389,"byte_end":123392,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ # Sized types","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123393,"byte_end":123410,"line_start":3,"line_end":3,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123411,"byte_end":123414,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ This currently works only for `Sized` types. Unsized types have „fat pointers“, which are twice","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123415,"byte_end":123518,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ as large as the normal ones. The [`AtomicPtr`] doesn't support them. One could use something","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123519,"byte_end":123615,"line_start":6,"line_end":6,"column_start":1,"column_end":97}},{"value":"/ like `AtomicU128` for them. The catch is this doesn't exist and the difference would make it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123616,"byte_end":123712,"line_start":7,"line_end":7,"column_start":1,"column_end":97}},{"value":"/ really hard to implement the debt storage/stripped down hazard pointers.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123713,"byte_end":123789,"line_start":8,"line_end":8,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123790,"byte_end":123793,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ A workaround is to use double indirection:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123794,"byte_end":123840,"line_start":10,"line_end":10,"column_start":1,"column_end":47}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123841,"byte_end":123844,"line_start":11,"line_end":11,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123845,"byte_end":123856,"line_start":12,"line_end":12,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123857,"byte_end":123885,"line_start":13,"line_end":13,"column_start":1,"column_end":29}},{"value":"/ // This doesn't work:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123886,"byte_end":123911,"line_start":14,"line_end":14,"column_start":1,"column_end":26}},{"value":"/ // let data: ArcSwap<[u8]> = ArcSwap::new(Arc::from([1, 2, 3]));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123912,"byte_end":123980,"line_start":15,"line_end":15,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123981,"byte_end":123984,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ // But this does:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":123985,"byte_end":124006,"line_start":17,"line_end":17,"column_start":1,"column_end":22}},{"value":"/ let data: ArcSwap<Box<[u8]>> = ArcSwap::from_pointee(Box::new([1, 2, 3]));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124007,"byte_end":124085,"line_start":18,"line_end":18,"column_start":1,"column_end":79}},{"value":"/ # drop(data);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124086,"byte_end":124103,"line_start":19,"line_end":19,"column_start":1,"column_end":18}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124104,"byte_end":124111,"line_start":20,"line_end":20,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124112,"byte_end":124115,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ # Too many [`Guard`]s","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124116,"byte_end":124141,"line_start":22,"line_end":22,"column_start":1,"column_end":26}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124142,"byte_end":124145,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ There's only limited number of \"fast\" slots for borrowing from [`ArcSwap`] for each single","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124146,"byte_end":124240,"line_start":24,"line_end":24,"column_start":1,"column_end":95}},{"value":"/ thread (currently 8, but this might change in future versions). If these run out, the algorithm","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124241,"byte_end":124340,"line_start":25,"line_end":25,"column_start":1,"column_end":100}},{"value":"/ falls back to slower path.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124341,"byte_end":124371,"line_start":26,"line_end":26,"column_start":1,"column_end":31}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124372,"byte_end":124375,"line_start":27,"line_end":27,"column_start":1,"column_end":4}},{"value":"/ If too many [`Guard`]s are kept around, the performance might be poor. These are not intended","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124376,"byte_end":124473,"line_start":28,"line_end":28,"column_start":1,"column_end":98}},{"value":"/ to be stored in data structures or used across async yield points.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124474,"byte_end":124544,"line_start":29,"line_end":29,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124545,"byte_end":124548,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124549,"byte_end":124580,"line_start":31,"line_end":31,"column_start":1,"column_end":32}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124581,"byte_end":124608,"line_start":32,"line_end":32,"column_start":1,"column_end":28}},{"value":"/ [`AtomicPtr`]: std::sync::atomic::AtomicPtr","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124609,"byte_end":124656,"line_start":33,"line_end":33,"column_start":1,"column_end":48}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124657,"byte_end":124660,"line_start":34,"line_end":34,"column_start":1,"column_end":4}},{"value":"/ # No `Clone` implementation","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124661,"byte_end":124692,"line_start":35,"line_end":35,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124693,"byte_end":124696,"line_start":36,"line_end":36,"column_start":1,"column_end":4}},{"value":"/ Previous version implemented [`Clone`], but it turned out to be very confusing to people, since","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124697,"byte_end":124796,"line_start":37,"line_end":37,"column_start":1,"column_end":100}},{"value":"/ it created fully independent [`ArcSwap`]. Users expected the instances to be tied to each","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124797,"byte_end":124890,"line_start":38,"line_end":38,"column_start":1,"column_end":94}},{"value":"/ other, that store in one would change the result of future load of the other.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124891,"byte_end":124972,"line_start":39,"line_end":39,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124973,"byte_end":124976,"line_start":40,"line_end":40,"column_start":1,"column_end":4}},{"value":"/ To emulate the original behaviour, one can do something like this:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":124977,"byte_end":125047,"line_start":41,"line_end":41,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125048,"byte_end":125051,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125052,"byte_end":125063,"line_start":43,"line_end":43,"column_start":1,"column_end":12}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125064,"byte_end":125092,"line_start":44,"line_end":44,"column_start":1,"column_end":29}},{"value":"/ # let old = ArcSwap::from_pointee(42);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125093,"byte_end":125135,"line_start":45,"line_end":45,"column_start":1,"column_end":43}},{"value":"/ let new = ArcSwap::new(old.load_full());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125136,"byte_end":125180,"line_start":46,"line_end":46,"column_start":1,"column_end":45}},{"value":"/ # let _ = new;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125181,"byte_end":125199,"line_start":47,"line_end":47,"column_start":1,"column_end":19}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/limitations.rs","byte_start":125200,"byte_end":125207,"line_start":48,"line_end":48,"column_start":1,"column_end":8}}]},{"kind":"Mod","id":{"krate":0,"index":390},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"patterns","qualname":"::docs::patterns","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","parent":null,"children":[],"decl_id":null,"docs":" Common use patterns","sig":null,"attributes":[{"value":"/ Common use patterns","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125209,"byte_end":125232,"line_start":1,"line_end":1,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125233,"byte_end":125236,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ Here are some common patterns one can use for inspiration. These are mostly covered by examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125237,"byte_end":125336,"line_start":3,"line_end":3,"column_start":1,"column_end":100}},{"value":"/ at the right type in the crate, but this lists them at a single place.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125337,"byte_end":125411,"line_start":4,"line_end":4,"column_start":1,"column_end":75}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125412,"byte_end":125415,"line_start":5,"line_end":5,"column_start":1,"column_end":4}},{"value":"/ # Sharing of configuration data","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125416,"byte_end":125451,"line_start":6,"line_end":6,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125452,"byte_end":125455,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ We want to share configuration from some source with rare updates to some high performance","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125456,"byte_end":125550,"line_start":8,"line_end":8,"column_start":1,"column_end":95}},{"value":"/ worker threads. It can be configuration in its true sense, or a routing table.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125551,"byte_end":125633,"line_start":9,"line_end":9,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125634,"byte_end":125637,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ The idea here is, each new version is a newly allocated in its own [`Arc`]. It is then stored","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125638,"byte_end":125735,"line_start":11,"line_end":11,"column_start":1,"column_end":98}},{"value":"/ into a *shared* `ArcSwap` instance.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125736,"byte_end":125775,"line_start":12,"line_end":12,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125776,"byte_end":125779,"line_start":13,"line_end":13,"column_start":1,"column_end":4}},{"value":"/ Each worker then loads the current version before each work chunk. In case a new version is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125780,"byte_end":125875,"line_start":14,"line_end":14,"column_start":1,"column_end":96}},{"value":"/ stored, the worker keeps using the loaded one until it ends the work chunk and, if it's the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125876,"byte_end":125971,"line_start":15,"line_end":15,"column_start":1,"column_end":96}},{"value":"/ last one to have the version, deallocates it automatically by dropping the [`Guard`]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":125972,"byte_end":126060,"line_start":16,"line_end":16,"column_start":1,"column_end":89}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126061,"byte_end":126064,"line_start":17,"line_end":17,"column_start":1,"column_end":4}},{"value":"/ Note that the configuration needs to be passed through a *single shared* [`ArcSwap`]. That","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126065,"byte_end":126159,"line_start":18,"line_end":18,"column_start":1,"column_end":95}},{"value":"/ means we need to share that instance and we do so through an [`Arc`] (one could use a global","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126160,"byte_end":126256,"line_start":19,"line_end":19,"column_start":1,"column_end":97}},{"value":"/ variable instead).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126257,"byte_end":126279,"line_start":20,"line_end":20,"column_start":1,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126280,"byte_end":126283,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ Therefore, what we have is `Arc<ArcSwap<Config>>`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126284,"byte_end":126338,"line_start":22,"line_end":22,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126339,"byte_end":126342,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126343,"byte_end":126354,"line_start":24,"line_end":24,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126355,"byte_end":126380,"line_start":25,"line_end":25,"column_start":1,"column_end":26}},{"value":"/ # use std::sync::atomic::{AtomicBool, Ordering};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126381,"byte_end":126433,"line_start":26,"line_end":26,"column_start":1,"column_end":53}},{"value":"/ # use std::thread;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126434,"byte_end":126456,"line_start":27,"line_end":27,"column_start":1,"column_end":23}},{"value":"/ # use std::time::Duration;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126457,"byte_end":126487,"line_start":28,"line_end":28,"column_start":1,"column_end":31}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126488,"byte_end":126493,"line_start":29,"line_end":29,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126494,"byte_end":126522,"line_start":30,"line_end":30,"column_start":1,"column_end":29}},{"value":"/ # struct Work;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126523,"byte_end":126541,"line_start":31,"line_end":31,"column_start":1,"column_end":19}},{"value":"/ # impl Work { fn fetch() -> Self { Work } fn perform(&self, _: &Config) {} }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126542,"byte_end":126622,"line_start":32,"line_end":32,"column_start":1,"column_end":81}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126623,"byte_end":126628,"line_start":33,"line_end":33,"column_start":1,"column_end":6}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126629,"byte_end":126658,"line_start":34,"line_end":34,"column_start":1,"column_end":30}},{"value":"/ struct Config {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126659,"byte_end":126678,"line_start":35,"line_end":35,"column_start":1,"column_end":20}},{"value":"/     // ... Stuff in here ...","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126679,"byte_end":126711,"line_start":36,"line_end":36,"column_start":1,"column_end":33}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126712,"byte_end":126717,"line_start":37,"line_end":37,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126718,"byte_end":126721,"line_start":38,"line_end":38,"column_start":1,"column_end":4}},{"value":"/ // We wrap the ArcSwap into an Arc, so we can share it between threads.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126722,"byte_end":126797,"line_start":39,"line_end":39,"column_start":1,"column_end":76}},{"value":"/ let config = Arc::new(ArcSwap::from_pointee(Config::default()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126798,"byte_end":126866,"line_start":40,"line_end":40,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126867,"byte_end":126870,"line_start":41,"line_end":41,"column_start":1,"column_end":4}},{"value":"/ let terminate = Arc::new(AtomicBool::new(false));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126871,"byte_end":126924,"line_start":42,"line_end":42,"column_start":1,"column_end":54}},{"value":"/ let mut threads = Vec::new();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126925,"byte_end":126958,"line_start":43,"line_end":43,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126959,"byte_end":126962,"line_start":44,"line_end":44,"column_start":1,"column_end":4}},{"value":"/ // The configuration thread","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126963,"byte_end":126994,"line_start":45,"line_end":45,"column_start":1,"column_end":32}},{"value":"/ threads.push(thread::spawn({","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":126995,"byte_end":127027,"line_start":46,"line_end":46,"column_start":1,"column_end":33}},{"value":"/     let config = Arc::clone(&config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127028,"byte_end":127069,"line_start":47,"line_end":47,"column_start":1,"column_end":42}},{"value":"/     let terminate = Arc::clone(&terminate);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127070,"byte_end":127117,"line_start":48,"line_end":48,"column_start":1,"column_end":48}},{"value":"/     move || {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127118,"byte_end":127135,"line_start":49,"line_end":49,"column_start":1,"column_end":18}},{"value":"/         while !terminate.load(Ordering::Relaxed) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127136,"byte_end":127190,"line_start":50,"line_end":50,"column_start":1,"column_end":55}},{"value":"/             thread::sleep(Duration::from_secs(6));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127191,"byte_end":127245,"line_start":51,"line_end":51,"column_start":1,"column_end":55}},{"value":"/             // Actually, load it from somewhere","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127246,"byte_end":127297,"line_start":52,"line_end":52,"column_start":1,"column_end":52}},{"value":"/             let new_config = Arc::new(Config::default());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127298,"byte_end":127359,"line_start":53,"line_end":53,"column_start":1,"column_end":62}},{"value":"/             config.store(new_config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127360,"byte_end":127401,"line_start":54,"line_end":54,"column_start":1,"column_end":42}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127402,"byte_end":127415,"line_start":55,"line_end":55,"column_start":1,"column_end":14}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127416,"byte_end":127425,"line_start":56,"line_end":56,"column_start":1,"column_end":10}},{"value":"/ }));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127426,"byte_end":127434,"line_start":57,"line_end":57,"column_start":1,"column_end":9}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127435,"byte_end":127438,"line_start":58,"line_end":58,"column_start":1,"column_end":4}},{"value":"/ // The worker thread","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127439,"byte_end":127463,"line_start":59,"line_end":59,"column_start":1,"column_end":25}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127464,"byte_end":127484,"line_start":60,"line_end":60,"column_start":1,"column_end":21}},{"value":"/     threads.push(thread::spawn({","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127485,"byte_end":127521,"line_start":61,"line_end":61,"column_start":1,"column_end":37}},{"value":"/         let config = Arc::clone(&config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127522,"byte_end":127567,"line_start":62,"line_end":62,"column_start":1,"column_end":46}},{"value":"/         let terminate = Arc::clone(&terminate);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127568,"byte_end":127619,"line_start":63,"line_end":63,"column_start":1,"column_end":52}},{"value":"/         move || {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127620,"byte_end":127641,"line_start":64,"line_end":64,"column_start":1,"column_end":22}},{"value":"/             while !terminate.load(Ordering::Relaxed) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127642,"byte_end":127700,"line_start":65,"line_end":65,"column_start":1,"column_end":59}},{"value":"/                 let work = Work::fetch();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127701,"byte_end":127746,"line_start":66,"line_end":66,"column_start":1,"column_end":46}},{"value":"/                 let config = config.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127747,"byte_end":127794,"line_start":67,"line_end":67,"column_start":1,"column_end":48}},{"value":"/                 work.perform(&config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127795,"byte_end":127837,"line_start":68,"line_end":68,"column_start":1,"column_end":43}},{"value":"/             }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127838,"byte_end":127855,"line_start":69,"line_end":69,"column_start":1,"column_end":18}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127856,"byte_end":127869,"line_start":70,"line_end":70,"column_start":1,"column_end":14}},{"value":"/     }));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127870,"byte_end":127882,"line_start":71,"line_end":71,"column_start":1,"column_end":13}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127883,"byte_end":127888,"line_start":72,"line_end":72,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127889,"byte_end":127892,"line_start":73,"line_end":73,"column_start":1,"column_end":4}},{"value":"/ // Terminate gracefully","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127893,"byte_end":127920,"line_start":74,"line_end":74,"column_start":1,"column_end":28}},{"value":"/ terminate.store(true, Ordering::Relaxed);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127921,"byte_end":127966,"line_start":75,"line_end":75,"column_start":1,"column_end":46}},{"value":"/ for thread in threads {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127967,"byte_end":127994,"line_start":76,"line_end":76,"column_start":1,"column_end":28}},{"value":"/     thread.join().unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":127995,"byte_end":128026,"line_start":77,"line_end":77,"column_start":1,"column_end":32}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128027,"byte_end":128032,"line_start":78,"line_end":78,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128033,"byte_end":128040,"line_start":79,"line_end":79,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128041,"byte_end":128044,"line_start":80,"line_end":80,"column_start":1,"column_end":4}},{"value":"/ # Consistent snapshots","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128045,"byte_end":128071,"line_start":81,"line_end":81,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128072,"byte_end":128075,"line_start":82,"line_end":82,"column_start":1,"column_end":4}},{"value":"/ While one probably wants to get a fresh instance every time a work chunk is available,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128076,"byte_end":128166,"line_start":83,"line_end":83,"column_start":1,"column_end":91}},{"value":"/ therefore there would be one [`load`] for each work chunk, it is often also important that the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128167,"byte_end":128265,"line_start":84,"line_end":84,"column_start":1,"column_end":99}},{"value":"/ configuration doesn't change in the *middle* of processing of one chunk. Therefore, one","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128266,"byte_end":128357,"line_start":85,"line_end":85,"column_start":1,"column_end":92}},{"value":"/ commonly wants *exactly* one [`load`] for the work chunk, not *at least* one. If the processing","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128358,"byte_end":128457,"line_start":86,"line_end":86,"column_start":1,"column_end":100}},{"value":"/ had multiple phases, one would use something like this:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128458,"byte_end":128517,"line_start":87,"line_end":87,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128518,"byte_end":128521,"line_start":88,"line_end":88,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128522,"byte_end":128533,"line_start":89,"line_end":89,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128534,"byte_end":128559,"line_start":90,"line_end":90,"column_start":1,"column_end":26}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128560,"byte_end":128565,"line_start":91,"line_end":91,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128566,"byte_end":128594,"line_start":92,"line_end":92,"column_start":1,"column_end":29}},{"value":"/ # struct Config;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128595,"byte_end":128615,"line_start":93,"line_end":93,"column_start":1,"column_end":21}},{"value":"/ # struct Work;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128616,"byte_end":128634,"line_start":94,"line_end":94,"column_start":1,"column_end":19}},{"value":"/ # impl Work {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128635,"byte_end":128652,"line_start":95,"line_end":95,"column_start":1,"column_end":18}},{"value":"/ #     fn fetch() -> Self { Work }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128653,"byte_end":128690,"line_start":96,"line_end":96,"column_start":1,"column_end":38}},{"value":"/ #     fn phase_1(&self, _: &Config) {}","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128691,"byte_end":128733,"line_start":97,"line_end":97,"column_start":1,"column_end":43}},{"value":"/ #     fn phase_2(&self, _: &Config) {}","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128734,"byte_end":128776,"line_start":98,"line_end":98,"column_start":1,"column_end":43}},{"value":"/ # }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128777,"byte_end":128784,"line_start":99,"line_end":99,"column_start":1,"column_end":8}},{"value":"/ # let config = Arc::new(ArcSwap::from_pointee(Config));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128785,"byte_end":128844,"line_start":100,"line_end":100,"column_start":1,"column_end":60}},{"value":"/ let work = Work::fetch();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128845,"byte_end":128874,"line_start":101,"line_end":101,"column_start":1,"column_end":30}},{"value":"/ let config = config.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128875,"byte_end":128906,"line_start":102,"line_end":102,"column_start":1,"column_end":32}},{"value":"/ work.phase_1(&config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128907,"byte_end":128933,"line_start":103,"line_end":103,"column_start":1,"column_end":27}},{"value":"/ // We keep the same config value here","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128934,"byte_end":128975,"line_start":104,"line_end":104,"column_start":1,"column_end":42}},{"value":"/ work.phase_2(&config);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":128976,"byte_end":129002,"line_start":105,"line_end":105,"column_start":1,"column_end":27}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129003,"byte_end":129010,"line_start":106,"line_end":106,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129011,"byte_end":129014,"line_start":107,"line_end":107,"column_start":1,"column_end":4}},{"value":"/ Over this:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129015,"byte_end":129029,"line_start":108,"line_end":108,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129030,"byte_end":129033,"line_start":109,"line_end":109,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129034,"byte_end":129045,"line_start":110,"line_end":110,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129046,"byte_end":129071,"line_start":111,"line_end":111,"column_start":1,"column_end":26}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129072,"byte_end":129077,"line_start":112,"line_end":112,"column_start":1,"column_end":6}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129078,"byte_end":129106,"line_start":113,"line_end":113,"column_start":1,"column_end":29}},{"value":"/ # struct Config;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129107,"byte_end":129127,"line_start":114,"line_end":114,"column_start":1,"column_end":21}},{"value":"/ # struct Work;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129128,"byte_end":129146,"line_start":115,"line_end":115,"column_start":1,"column_end":19}},{"value":"/ # impl Work {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129147,"byte_end":129164,"line_start":116,"line_end":116,"column_start":1,"column_end":18}},{"value":"/ #     fn fetch() -> Self { Work }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129165,"byte_end":129202,"line_start":117,"line_end":117,"column_start":1,"column_end":38}},{"value":"/ #     fn phase_1(&self, _: &Config) {}","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129203,"byte_end":129245,"line_start":118,"line_end":118,"column_start":1,"column_end":43}},{"value":"/ #     fn phase_2(&self, _: &Config) {}","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129246,"byte_end":129288,"line_start":119,"line_end":119,"column_start":1,"column_end":43}},{"value":"/ # }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129289,"byte_end":129296,"line_start":120,"line_end":120,"column_start":1,"column_end":8}},{"value":"/ # let config = Arc::new(ArcSwap::from_pointee(Config));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129297,"byte_end":129356,"line_start":121,"line_end":121,"column_start":1,"column_end":60}},{"value":"/ let work = Work::fetch();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129357,"byte_end":129386,"line_start":122,"line_end":122,"column_start":1,"column_end":30}},{"value":"/ work.phase_1(&config.load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129387,"byte_end":129420,"line_start":123,"line_end":123,"column_start":1,"column_end":34}},{"value":"/ // WARNING!! This is broken, because in between phase_1 and phase_2, the other thread could","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129421,"byte_end":129516,"line_start":124,"line_end":124,"column_start":1,"column_end":96}},{"value":"/ // have replaced the config. Then each phase would be performed with a different one and that","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129517,"byte_end":129614,"line_start":125,"line_end":125,"column_start":1,"column_end":98}},{"value":"/ // could lead to surprises.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129615,"byte_end":129646,"line_start":126,"line_end":126,"column_start":1,"column_end":32}},{"value":"/ work.phase_2(&config.load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129647,"byte_end":129680,"line_start":127,"line_end":127,"column_start":1,"column_end":34}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129681,"byte_end":129688,"line_start":128,"line_end":128,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129689,"byte_end":129692,"line_start":129,"line_end":129,"column_start":1,"column_end":4}},{"value":"/ # Caching of the configuration","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129693,"byte_end":129727,"line_start":130,"line_end":130,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129728,"byte_end":129731,"line_start":131,"line_end":131,"column_start":1,"column_end":4}},{"value":"/ Let's say that the work chunks are really small, but there's *a lot* of them to work on. Maybe","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129732,"byte_end":129830,"line_start":132,"line_end":132,"column_start":1,"column_end":99}},{"value":"/ we are routing packets and the configuration is the routing table that can sometimes change,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129831,"byte_end":129927,"line_start":133,"line_end":133,"column_start":1,"column_end":97}},{"value":"/ but mostly doesn't.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129928,"byte_end":129951,"line_start":134,"line_end":134,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129952,"byte_end":129955,"line_start":135,"line_end":135,"column_start":1,"column_end":4}},{"value":"/ There's an overhead to [`load`]. If the work chunks are small enough, that could be measurable.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":129956,"byte_end":130055,"line_start":136,"line_end":136,"column_start":1,"column_end":100}},{"value":"/ We can reach for [`Cache`]. It makes loads much faster (in the order of accessing local","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130056,"byte_end":130147,"line_start":137,"line_end":137,"column_start":1,"column_end":92}},{"value":"/ variables) in case nothing has changed. It has two costs, it makes the load slightly slower in","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130148,"byte_end":130246,"line_start":138,"line_end":138,"column_start":1,"column_end":99}},{"value":"/ case the thing *did* change (which is rare) and if the worker is inactive, it holds the old","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130247,"byte_end":130342,"line_start":139,"line_end":139,"column_start":1,"column_end":96}},{"value":"/ cached value alive.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130343,"byte_end":130366,"line_start":140,"line_end":140,"column_start":1,"column_end":24}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130367,"byte_end":130370,"line_start":141,"line_end":141,"column_start":1,"column_end":4}},{"value":"/ This is OK for our use case, because the routing table is usually small enough so some stale","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130371,"byte_end":130467,"line_start":142,"line_end":142,"column_start":1,"column_end":97}},{"value":"/ instances taking a bit of memory isn't an issue.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130468,"byte_end":130520,"line_start":143,"line_end":143,"column_start":1,"column_end":53}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130521,"byte_end":130524,"line_start":144,"line_end":144,"column_start":1,"column_end":4}},{"value":"/ The part that takes care of updates stays the same as above.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130525,"byte_end":130589,"line_start":145,"line_end":145,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130590,"byte_end":130593,"line_start":146,"line_end":146,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130594,"byte_end":130605,"line_start":147,"line_end":147,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130606,"byte_end":130631,"line_start":148,"line_end":148,"column_start":1,"column_end":26}},{"value":"/ # use std::thread;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130632,"byte_end":130654,"line_start":149,"line_end":149,"column_start":1,"column_end":23}},{"value":"/ # use std::sync::atomic::{AtomicBool, Ordering};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130655,"byte_end":130707,"line_start":150,"line_end":150,"column_start":1,"column_end":53}},{"value":"/ # use arc_swap::{ArcSwap, Cache};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130708,"byte_end":130745,"line_start":151,"line_end":151,"column_start":1,"column_end":38}},{"value":"/ # struct Packet; impl Packet { fn receive() -> Self { Packet } }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130746,"byte_end":130814,"line_start":152,"line_end":152,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130815,"byte_end":130818,"line_start":153,"line_end":153,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130819,"byte_end":130848,"line_start":154,"line_end":154,"column_start":1,"column_end":30}},{"value":"/ struct RoutingTable {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130849,"byte_end":130874,"line_start":155,"line_end":155,"column_start":1,"column_end":26}},{"value":"/     // ... Stuff in here ...","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130875,"byte_end":130907,"line_start":156,"line_end":156,"column_start":1,"column_end":33}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130908,"byte_end":130913,"line_start":157,"line_end":157,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130914,"byte_end":130917,"line_start":158,"line_end":158,"column_start":1,"column_end":4}},{"value":"/ impl RoutingTable {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130918,"byte_end":130941,"line_start":159,"line_end":159,"column_start":1,"column_end":24}},{"value":"/     fn route(&self, _: Packet) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130942,"byte_end":130978,"line_start":160,"line_end":160,"column_start":1,"column_end":37}},{"value":"/         // ... Interesting things are done here ...","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":130979,"byte_end":131034,"line_start":161,"line_end":161,"column_start":1,"column_end":56}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131035,"byte_end":131044,"line_start":162,"line_end":162,"column_start":1,"column_end":10}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131045,"byte_end":131050,"line_start":163,"line_end":163,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131051,"byte_end":131054,"line_start":164,"line_end":164,"column_start":1,"column_end":4}},{"value":"/ let routing_table = Arc::new(ArcSwap::from_pointee(RoutingTable::default()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131055,"byte_end":131136,"line_start":165,"line_end":165,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131137,"byte_end":131140,"line_start":166,"line_end":166,"column_start":1,"column_end":4}},{"value":"/ let terminate = Arc::new(AtomicBool::new(false));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131141,"byte_end":131194,"line_start":167,"line_end":167,"column_start":1,"column_end":54}},{"value":"/ let mut threads = Vec::new();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131195,"byte_end":131228,"line_start":168,"line_end":168,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131229,"byte_end":131232,"line_start":169,"line_end":169,"column_start":1,"column_end":4}},{"value":"/ for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131233,"byte_end":131253,"line_start":170,"line_end":170,"column_start":1,"column_end":21}},{"value":"/     let t = thread::spawn({","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131254,"byte_end":131285,"line_start":171,"line_end":171,"column_start":1,"column_end":32}},{"value":"/         let routing_table = Arc::clone(&routing_table);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131286,"byte_end":131345,"line_start":172,"line_end":172,"column_start":1,"column_end":60}},{"value":"/         let terminate = Arc::clone(&terminate);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131346,"byte_end":131397,"line_start":173,"line_end":173,"column_start":1,"column_end":52}},{"value":"/         move || {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131398,"byte_end":131419,"line_start":174,"line_end":174,"column_start":1,"column_end":22}},{"value":"/             let mut routing_table = Cache::new(routing_table);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131420,"byte_end":131486,"line_start":175,"line_end":175,"column_start":1,"column_end":67}},{"value":"/             while !terminate.load(Ordering::Relaxed) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131487,"byte_end":131545,"line_start":176,"line_end":176,"column_start":1,"column_end":59}},{"value":"/                 let packet = Packet::receive();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131546,"byte_end":131597,"line_start":177,"line_end":177,"column_start":1,"column_end":52}},{"value":"/                 // This load is cheaper, because we cache in the private Cache thing.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131598,"byte_end":131687,"line_start":178,"line_end":178,"column_start":1,"column_end":90}},{"value":"/                 // But if the above receive takes a long time, the Cache will keep the stale","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131688,"byte_end":131784,"line_start":179,"line_end":179,"column_start":1,"column_end":97}},{"value":"/                 // value  alive until this time (when it will get replaced by up to date value).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131785,"byte_end":131885,"line_start":180,"line_end":180,"column_start":1,"column_end":101}},{"value":"/                 let current = routing_table.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131886,"byte_end":131941,"line_start":181,"line_end":181,"column_start":1,"column_end":56}},{"value":"/                 current.route(packet);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131942,"byte_end":131984,"line_start":182,"line_end":182,"column_start":1,"column_end":43}},{"value":"/             }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":131985,"byte_end":132002,"line_start":183,"line_end":183,"column_start":1,"column_end":18}},{"value":"/         }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132003,"byte_end":132016,"line_start":184,"line_end":184,"column_start":1,"column_end":14}},{"value":"/     });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132017,"byte_end":132028,"line_start":185,"line_end":185,"column_start":1,"column_end":12}},{"value":"/     threads.push(t);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132029,"byte_end":132053,"line_start":186,"line_end":186,"column_start":1,"column_end":25}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132054,"byte_end":132059,"line_start":187,"line_end":187,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132060,"byte_end":132063,"line_start":188,"line_end":188,"column_start":1,"column_end":4}},{"value":"/ // Shut down properly","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132064,"byte_end":132089,"line_start":189,"line_end":189,"column_start":1,"column_end":26}},{"value":"/ terminate.store(true, Ordering::Relaxed);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132090,"byte_end":132135,"line_start":190,"line_end":190,"column_start":1,"column_end":46}},{"value":"/ for thread in threads {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132136,"byte_end":132163,"line_start":191,"line_end":191,"column_start":1,"column_end":28}},{"value":"/     thread.join().unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132164,"byte_end":132195,"line_start":192,"line_end":192,"column_start":1,"column_end":32}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132196,"byte_end":132201,"line_start":193,"line_end":193,"column_start":1,"column_end":6}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132202,"byte_end":132209,"line_start":194,"line_end":194,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132210,"byte_end":132213,"line_start":195,"line_end":195,"column_start":1,"column_end":4}},{"value":"/ # Projecting into configuration field","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132214,"byte_end":132255,"line_start":196,"line_end":196,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132256,"byte_end":132259,"line_start":197,"line_end":197,"column_start":1,"column_end":4}},{"value":"/ We have a larger application, composed of multiple components. Each component has its own","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132260,"byte_end":132353,"line_start":198,"line_end":198,"column_start":1,"column_end":94}},{"value":"/ `ComponentConfig` structure. Then, the whole application has a `Config` structure that contains","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132354,"byte_end":132453,"line_start":199,"line_end":199,"column_start":1,"column_end":100}},{"value":"/ a component config for each component:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132454,"byte_end":132496,"line_start":200,"line_end":200,"column_start":1,"column_end":43}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132497,"byte_end":132500,"line_start":201,"line_end":201,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132501,"byte_end":132512,"line_start":202,"line_end":202,"column_start":1,"column_end":12}},{"value":"/ # struct ComponentConfig;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132513,"byte_end":132542,"line_start":203,"line_end":203,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132543,"byte_end":132546,"line_start":204,"line_end":204,"column_start":1,"column_end":4}},{"value":"/ struct Config {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132547,"byte_end":132566,"line_start":205,"line_end":205,"column_start":1,"column_end":20}},{"value":"/     component: ComponentConfig,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132567,"byte_end":132602,"line_start":206,"line_end":206,"column_start":1,"column_end":36}},{"value":"/     // ... Some other components and things ...","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132603,"byte_end":132654,"line_start":207,"line_end":207,"column_start":1,"column_end":52}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132655,"byte_end":132660,"line_start":208,"line_end":208,"column_start":1,"column_end":6}},{"value":"/ # let c = Config { component: ComponentConfig };","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132661,"byte_end":132713,"line_start":209,"line_end":209,"column_start":1,"column_end":53}},{"value":"/ # let _ = c.component;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132714,"byte_end":132740,"line_start":210,"line_end":210,"column_start":1,"column_end":27}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132741,"byte_end":132748,"line_start":211,"line_end":211,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132749,"byte_end":132752,"line_start":212,"line_end":212,"column_start":1,"column_end":4}},{"value":"/ We would like to use [`ArcSwap`] to push updates to the components. But for various reasons,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132753,"byte_end":132849,"line_start":213,"line_end":213,"column_start":1,"column_end":97}},{"value":"/ it's not a good idea to put the whole `ArcSwap<Config>` to each component, eg:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132850,"byte_end":132932,"line_start":214,"line_end":214,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132933,"byte_end":132936,"line_start":215,"line_end":215,"column_start":1,"column_end":4}},{"value":"/ * That would make each component depend on the top level config, which feels reversed.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":132937,"byte_end":133027,"line_start":216,"line_end":216,"column_start":1,"column_end":91}},{"value":"/ * It doesn't allow reusing the same component in multiple applications, as these would have","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133028,"byte_end":133123,"line_start":217,"line_end":217,"column_start":1,"column_end":96}},{"value":"/   different `Config` structures.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133124,"byte_end":133160,"line_start":218,"line_end":218,"column_start":1,"column_end":37}},{"value":"/ * One needs to build the whole `Config` for tests.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133161,"byte_end":133215,"line_start":219,"line_end":219,"column_start":1,"column_end":55}},{"value":"/ * There's a risk of entanglement, that the component would start looking at configuration of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133216,"byte_end":133312,"line_start":220,"line_end":220,"column_start":1,"column_end":97}},{"value":"/   different parts of code, which would be hard to debug.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133313,"byte_end":133373,"line_start":221,"line_end":221,"column_start":1,"column_end":61}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133374,"byte_end":133377,"line_start":222,"line_end":222,"column_start":1,"column_end":4}},{"value":"/ We also could have a separate `ArcSwap<ComponentConfig>` for each component, but that also","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133378,"byte_end":133472,"line_start":223,"line_end":223,"column_start":1,"column_end":95}},{"value":"/ doesn't feel right, as we would have to push updates to multiple places and they could be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133473,"byte_end":133566,"line_start":224,"line_end":224,"column_start":1,"column_end":94}},{"value":"/ inconsistent for a while and we would have to decompose the `Config` structure into the parts,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133567,"byte_end":133665,"line_start":225,"line_end":225,"column_start":1,"column_end":99}},{"value":"/ because we need our things in [`Arc`]s to be put into [`ArcSwap`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133666,"byte_end":133736,"line_start":226,"line_end":226,"column_start":1,"column_end":71}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133737,"byte_end":133740,"line_start":227,"line_end":227,"column_start":1,"column_end":4}},{"value":"/ This is where the [`Access`] trait comes into play. The trait abstracts over things that can","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133741,"byte_end":133837,"line_start":228,"line_end":228,"column_start":1,"column_end":97}},{"value":"/ give access to up to date version of specific T. That can be a [`Constant`] (which is useful","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133838,"byte_end":133934,"line_start":229,"line_end":229,"column_start":1,"column_end":97}},{"value":"/ mostly for the tests, where one doesn't care about the updating), it can be an","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":133935,"byte_end":134017,"line_start":230,"line_end":230,"column_start":1,"column_end":83}},{"value":"/ [`ArcSwap<T>`][`ArcSwap`] itself, but it also can be an [`ArcSwap`] paired with a closure to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134018,"byte_end":134114,"line_start":231,"line_end":231,"column_start":1,"column_end":97}},{"value":"/ project into the specific field. The [`DynAccess`] is similar, but allows type erasure. That's","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134115,"byte_end":134213,"line_start":232,"line_end":232,"column_start":1,"column_end":99}},{"value":"/ more convenient, but a little bit slower.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134214,"byte_end":134259,"line_start":233,"line_end":233,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134260,"byte_end":134263,"line_start":234,"line_end":234,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134264,"byte_end":134275,"line_start":235,"line_end":235,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134276,"byte_end":134301,"line_start":236,"line_end":236,"column_start":1,"column_end":26}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134302,"byte_end":134330,"line_start":237,"line_end":237,"column_start":1,"column_end":29}},{"value":"/ # use arc_swap::access::{DynAccess, Map};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134331,"byte_end":134376,"line_start":238,"line_end":238,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134377,"byte_end":134380,"line_start":239,"line_end":239,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134381,"byte_end":134410,"line_start":240,"line_end":240,"column_start":1,"column_end":30}},{"value":"/ struct ComponentConfig;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134411,"byte_end":134438,"line_start":241,"line_end":241,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134439,"byte_end":134442,"line_start":242,"line_end":242,"column_start":1,"column_end":4}},{"value":"/ struct Component {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134443,"byte_end":134465,"line_start":243,"line_end":243,"column_start":1,"column_end":23}},{"value":"/     config: Box<dyn DynAccess<ComponentConfig>>,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134466,"byte_end":134518,"line_start":244,"line_end":244,"column_start":1,"column_end":53}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134519,"byte_end":134524,"line_start":245,"line_end":245,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134525,"byte_end":134528,"line_start":246,"line_end":246,"column_start":1,"column_end":4}},{"value":"/ #[derive(Debug, Default)]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134529,"byte_end":134558,"line_start":247,"line_end":247,"column_start":1,"column_end":30}},{"value":"/ struct Config {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134559,"byte_end":134578,"line_start":248,"line_end":248,"column_start":1,"column_end":20}},{"value":"/     component: ComponentConfig,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134579,"byte_end":134614,"line_start":249,"line_end":249,"column_start":1,"column_end":36}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134615,"byte_end":134620,"line_start":250,"line_end":250,"column_start":1,"column_end":6}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134621,"byte_end":134624,"line_start":251,"line_end":251,"column_start":1,"column_end":4}},{"value":"/ let config = Arc::new(ArcSwap::from_pointee(Config::default()));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134625,"byte_end":134693,"line_start":252,"line_end":252,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134694,"byte_end":134697,"line_start":253,"line_end":253,"column_start":1,"column_end":4}},{"value":"/ let component = Component {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134698,"byte_end":134729,"line_start":254,"line_end":254,"column_start":1,"column_end":32}},{"value":"/     config: Box::new(Map::new(Arc::clone(&config), |config: &Config| &config.component)),","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134730,"byte_end":134823,"line_start":255,"line_end":255,"column_start":1,"column_end":94}},{"value":"/ };","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134824,"byte_end":134830,"line_start":256,"line_end":256,"column_start":1,"column_end":7}},{"value":"/ # let _ = component.config;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134831,"byte_end":134862,"line_start":257,"line_end":257,"column_start":1,"column_end":32}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134863,"byte_end":134870,"line_start":258,"line_end":258,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134871,"byte_end":134874,"line_start":259,"line_end":259,"column_start":1,"column_end":4}},{"value":"/ One would use `Box::new(Constant(ComponentConfig))` in unittests instead as the `config` field.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134875,"byte_end":134974,"line_start":260,"line_end":260,"column_start":1,"column_end":100}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134975,"byte_end":134978,"line_start":261,"line_end":261,"column_start":1,"column_end":4}},{"value":"/ The [`Cache`] has its own [`Access`][crate::cache::Access] trait for similar purposes.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":134979,"byte_end":135069,"line_start":262,"line_end":262,"column_start":1,"column_end":91}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135070,"byte_end":135073,"line_start":263,"line_end":263,"column_start":1,"column_end":4}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135074,"byte_end":135101,"line_start":264,"line_end":264,"column_start":1,"column_end":28}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135102,"byte_end":135129,"line_start":265,"line_end":265,"column_start":1,"column_end":28}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135130,"byte_end":135167,"line_start":266,"line_end":266,"column_start":1,"column_end":38}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135168,"byte_end":135199,"line_start":267,"line_end":267,"column_start":1,"column_end":32}},{"value":"/ [`Cache`]: crate::cache::Cache","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135200,"byte_end":135234,"line_start":268,"line_end":268,"column_start":1,"column_end":35}},{"value":"/ [`Access`]: crate::access::Access","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135235,"byte_end":135272,"line_start":269,"line_end":269,"column_start":1,"column_end":38}},{"value":"/ [`DynAccess`]: crate::access::DynAccess","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135273,"byte_end":135316,"line_start":270,"line_end":270,"column_start":1,"column_end":44}},{"value":"/ [`Constant`]: crate::access::Constant","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/patterns.rs","byte_start":135317,"byte_end":135358,"line_start":271,"line_end":271,"column_start":1,"column_end":42}}]},{"kind":"Mod","id":{"krate":0,"index":391},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"performance","qualname":"::docs::performance","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","parent":null,"children":[],"decl_id":null,"docs":" Performance characteristics.","sig":null,"attributes":[{"value":"/ Performance characteristics.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135360,"byte_end":135392,"line_start":1,"line_end":1,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135393,"byte_end":135396,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ There are several performance advantages of [`ArcSwap`] over [`RwLock`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135397,"byte_end":135473,"line_start":3,"line_end":3,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135474,"byte_end":135477,"line_start":4,"line_end":4,"column_start":1,"column_end":4}},{"value":"/ ## Lock-free readers","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135478,"byte_end":135502,"line_start":5,"line_end":5,"column_start":1,"column_end":25}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135503,"byte_end":135506,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ All the read operations are always [lock-free]. Most of the time, they are actually","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135507,"byte_end":135594,"line_start":7,"line_end":7,"column_start":1,"column_end":88}},{"value":"/ [wait-free]. They are [lock-free] from time to time, with at least `usize::MAX / 4` accesses","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135595,"byte_end":135691,"line_start":8,"line_end":8,"column_start":1,"column_end":97}},{"value":"/ that are [wait-free] in between.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135692,"byte_end":135728,"line_start":9,"line_end":9,"column_start":1,"column_end":37}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135729,"byte_end":135732,"line_start":10,"line_end":10,"column_start":1,"column_end":4}},{"value":"/ Writers are [lock-free].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135733,"byte_end":135761,"line_start":11,"line_end":11,"column_start":1,"column_end":29}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135762,"byte_end":135765,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ Whenever the documentation talks about *contention* in the context of [`ArcSwap`], it talks","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135766,"byte_end":135861,"line_start":13,"line_end":13,"column_start":1,"column_end":96}},{"value":"/ about contention on the CPU level ‒ multiple cores having to deal with accessing the same cache","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135862,"byte_end":135963,"line_start":14,"line_end":14,"column_start":1,"column_end":100}},{"value":"/ line. This slows things down (compared to each one accessing its own cache line), but an","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":135964,"byte_end":136056,"line_start":15,"line_end":15,"column_start":1,"column_end":93}},{"value":"/ eventual progress is still guaranteed and the cost is significantly lower than parking threads","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136057,"byte_end":136155,"line_start":16,"line_end":16,"column_start":1,"column_end":99}},{"value":"/ as with mutex-style contention.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136156,"byte_end":136191,"line_start":17,"line_end":17,"column_start":1,"column_end":36}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136192,"byte_end":136195,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ ## Speeds","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136196,"byte_end":136209,"line_start":19,"line_end":19,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136210,"byte_end":136213,"line_start":20,"line_end":20,"column_start":1,"column_end":4}},{"value":"/ The base line speed of read operations is similar to using an *uncontended* [`Mutex`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136214,"byte_end":136304,"line_start":21,"line_end":21,"column_start":1,"column_end":91}},{"value":"/ However, [`load`] suffers no contention from any other read operations and only slight","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136305,"byte_end":136395,"line_start":22,"line_end":22,"column_start":1,"column_end":91}},{"value":"/ ones during updates. The [`load_full`] operation is additionally contended only on","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136396,"byte_end":136482,"line_start":23,"line_end":23,"column_start":1,"column_end":87}},{"value":"/ the reference count of the [`Arc`] inside ‒ so, in general, while [`Mutex`] rapidly","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136483,"byte_end":136572,"line_start":24,"line_end":24,"column_start":1,"column_end":88}},{"value":"/ loses its performance when being in active use by multiple threads at once and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136573,"byte_end":136655,"line_start":25,"line_end":25,"column_start":1,"column_end":83}},{"value":"/ [`RwLock`] is slow to start with, [`ArcSwap`] mostly keeps its performance even when read by","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136656,"byte_end":136752,"line_start":26,"line_end":26,"column_start":1,"column_end":97}},{"value":"/ many threads in parallel.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136753,"byte_end":136782,"line_start":27,"line_end":27,"column_start":1,"column_end":30}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136783,"byte_end":136786,"line_start":28,"line_end":28,"column_start":1,"column_end":4}},{"value":"/ Write operations are considered expensive. A write operation is more expensive than access to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136787,"byte_end":136884,"line_start":29,"line_end":29,"column_start":1,"column_end":98}},{"value":"/ an *uncontended* [`Mutex`] and on some architectures even slower than uncontended","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136885,"byte_end":136970,"line_start":30,"line_end":30,"column_start":1,"column_end":86}},{"value":"/ [`RwLock`]. However, it is faster than either under contention.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":136971,"byte_end":137038,"line_start":31,"line_end":31,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137039,"byte_end":137042,"line_start":32,"line_end":32,"column_start":1,"column_end":4}},{"value":"/ There are some (very unscientific) [benchmarks] within the source code of the library, and the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137043,"byte_end":137141,"line_start":33,"line_end":33,"column_start":1,"column_end":99}},{"value":"/ [`DefaultStrategy`][crate::DefaultStrategy] has some numbers measured on my computer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137142,"byte_end":137231,"line_start":34,"line_end":34,"column_start":1,"column_end":90}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137232,"byte_end":137235,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ The exact numbers are highly dependant on the machine used (both absolute numbers and relative","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137236,"byte_end":137334,"line_start":36,"line_end":36,"column_start":1,"column_end":99}},{"value":"/ between different data structures). Not only architectures have a huge impact (eg. x86 vs ARM),","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137335,"byte_end":137434,"line_start":37,"line_end":37,"column_start":1,"column_end":100}},{"value":"/ but even AMD vs. Intel or two different Intel processors. Therefore, if what matters is more","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137435,"byte_end":137531,"line_start":38,"line_end":38,"column_start":1,"column_end":97}},{"value":"/ the speed than the wait-free guarantees, you're advised to do your own measurements.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137532,"byte_end":137620,"line_start":39,"line_end":39,"column_start":1,"column_end":89}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137621,"byte_end":137624,"line_start":40,"line_end":40,"column_start":1,"column_end":4}},{"value":"/ Further speed improvements may be gained by the use of the [`Cache`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137625,"byte_end":137698,"line_start":41,"line_end":41,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137699,"byte_end":137702,"line_start":42,"line_end":42,"column_start":1,"column_end":4}},{"value":"/ ## Consistency","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137703,"byte_end":137721,"line_start":43,"line_end":43,"column_start":1,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137722,"byte_end":137725,"line_start":44,"line_end":44,"column_start":1,"column_end":4}},{"value":"/ The combination of [wait-free] guarantees of readers and no contention between concurrent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137726,"byte_end":137819,"line_start":45,"line_end":45,"column_start":1,"column_end":94}},{"value":"/ [`load`]s provides *consistent* performance characteristics of the synchronization mechanism.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137820,"byte_end":137917,"line_start":46,"line_end":46,"column_start":1,"column_end":98}},{"value":"/ This might be important for soft-realtime applications (the CPU-level contention caused by a","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":137918,"byte_end":138014,"line_start":47,"line_end":47,"column_start":1,"column_end":97}},{"value":"/ recent update/write operation might be problematic for some hard-realtime cases, though).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138015,"byte_end":138108,"line_start":48,"line_end":48,"column_start":1,"column_end":94}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138109,"byte_end":138112,"line_start":49,"line_end":49,"column_start":1,"column_end":4}},{"value":"/ ## Choosing the right reading operation","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138113,"byte_end":138156,"line_start":50,"line_end":50,"column_start":1,"column_end":44}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138157,"byte_end":138160,"line_start":51,"line_end":51,"column_start":1,"column_end":4}},{"value":"/ There are several load operations available. While the general go-to one should be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138161,"byte_end":138247,"line_start":52,"line_end":52,"column_start":1,"column_end":87}},{"value":"/ [`load`], there may be situations in which the others are a better match.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138248,"byte_end":138325,"line_start":53,"line_end":53,"column_start":1,"column_end":78}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138326,"byte_end":138329,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ The [`load`] usually only borrows the instance from the shared [`ArcSwap`]. This makes","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138330,"byte_end":138420,"line_start":55,"line_end":55,"column_start":1,"column_end":91}},{"value":"/ it faster, because different threads don't contend on the reference count. There are two","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138421,"byte_end":138513,"line_start":56,"line_end":56,"column_start":1,"column_end":93}},{"value":"/ situations when this borrow isn't possible. If the content gets changed, all existing","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138514,"byte_end":138603,"line_start":57,"line_end":57,"column_start":1,"column_end":90}},{"value":"/ [`Guard`]s are promoted to contain an owned instance. The promotion is done by the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138604,"byte_end":138690,"line_start":58,"line_end":58,"column_start":1,"column_end":87}},{"value":"/ writer, but the readers still need to decrement the reference counts of the old instance when","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138691,"byte_end":138788,"line_start":59,"line_end":59,"column_start":1,"column_end":98}},{"value":"/ they no longer use it, contending on the count.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138789,"byte_end":138840,"line_start":60,"line_end":60,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138841,"byte_end":138844,"line_start":61,"line_end":61,"column_start":1,"column_end":4}},{"value":"/ The other situation derives from internal implementation. The number of borrows each thread can","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138845,"byte_end":138944,"line_start":62,"line_end":62,"column_start":1,"column_end":100}},{"value":"/ have at each time (across all [`Guard`]s) is limited. If this limit is exceeded, an owned","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":138945,"byte_end":139038,"line_start":63,"line_end":63,"column_start":1,"column_end":94}},{"value":"/ instance is created instead.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139039,"byte_end":139071,"line_start":64,"line_end":64,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139072,"byte_end":139075,"line_start":65,"line_end":65,"column_start":1,"column_end":4}},{"value":"/ Therefore, if you intend to hold onto the loaded value for extended time span, you may prefer","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139076,"byte_end":139173,"line_start":66,"line_end":66,"column_start":1,"column_end":98}},{"value":"/ [`load_full`]. It loads the pointer instance ([`Arc`]) without borrowing, which is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139174,"byte_end":139260,"line_start":67,"line_end":67,"column_start":1,"column_end":87}},{"value":"/ slower (because of the possible contention on the reference count), but doesn't consume one of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139261,"byte_end":139359,"line_start":68,"line_end":68,"column_start":1,"column_end":99}},{"value":"/ the borrow slots, which will make it more likely for following [`load`]s to have a slot","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139360,"byte_end":139451,"line_start":69,"line_end":69,"column_start":1,"column_end":92}},{"value":"/ available. Similarly, if some API needs an owned `Arc`, [`load_full`] is more convenient and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139452,"byte_end":139548,"line_start":70,"line_end":70,"column_start":1,"column_end":97}},{"value":"/ potentially faster then first [`load`]ing and then cloning that [`Arc`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139549,"byte_end":139625,"line_start":71,"line_end":71,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139626,"byte_end":139629,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ Additionally, it is possible to use a [`Cache`] to get further speed improvement at the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139630,"byte_end":139721,"line_start":73,"line_end":73,"column_start":1,"column_end":92}},{"value":"/ cost of less comfortable API and possibly keeping the older values alive for longer than","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139722,"byte_end":139814,"line_start":74,"line_end":74,"column_start":1,"column_end":93}},{"value":"/ necessary.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139815,"byte_end":139829,"line_start":75,"line_end":75,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139830,"byte_end":139833,"line_start":76,"line_end":76,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139834,"byte_end":139865,"line_start":77,"line_end":77,"column_start":1,"column_end":32}},{"value":"/ [`Cache`]: crate::cache::Cache","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139866,"byte_end":139900,"line_start":78,"line_end":78,"column_start":1,"column_end":35}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139901,"byte_end":139928,"line_start":79,"line_end":79,"column_start":1,"column_end":28}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139929,"byte_end":139966,"line_start":80,"line_end":80,"column_start":1,"column_end":38}},{"value":"/ [`load_full`]: crate::ArcSwapAny::load_full","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":139967,"byte_end":140014,"line_start":81,"line_end":81,"column_start":1,"column_end":48}},{"value":"/ [`Arc`]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140015,"byte_end":140042,"line_start":82,"line_end":82,"column_start":1,"column_end":28}},{"value":"/ [`Mutex`]: std::sync::Mutex","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140043,"byte_end":140074,"line_start":83,"line_end":83,"column_start":1,"column_end":32}},{"value":"/ [`RwLock`]: std::sync::RwLock","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140075,"byte_end":140108,"line_start":84,"line_end":84,"column_start":1,"column_end":34}},{"value":"/ [benchmarks]: https://github.com/vorner/arc-swap/tree/master/benchmarks","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140109,"byte_end":140184,"line_start":85,"line_end":85,"column_start":1,"column_end":76}},{"value":"/ [lock-free]: https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140185,"byte_end":140267,"line_start":86,"line_end":86,"column_start":1,"column_end":83}},{"value":"/ [wait-free]: https://en.wikipedia.org/wiki/Non-blocking_algorithm#Wait-freedom","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/performance.rs","byte_start":140268,"byte_end":140350,"line_start":87,"line_end":87,"column_start":1,"column_end":83}}]},{"kind":"Trait","id":{"krate":0,"index":402},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142081,"byte_end":142087,"line_start":37,"line_end":37,"column_start":18,"column_end":24},"name":"RefCnt","qualname":"::ref_cnt::RefCnt","value":"RefCnt: Clone","parent":null,"children":[{"krate":0,"index":403},{"krate":0,"index":404},{"krate":0,"index":405},{"krate":0,"index":406},{"krate":0,"index":407},{"krate":0,"index":408}],"decl_id":null,"docs":" A trait describing smart reference counted pointers.","sig":null,"attributes":[{"value":"/ A trait describing smart reference counted pointers.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140404,"byte_end":140460,"line_start":5,"line_end":5,"column_start":1,"column_end":57}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140461,"byte_end":140464,"line_start":6,"line_end":6,"column_start":1,"column_end":4}},{"value":"/ Note that in a way [`Option<Arc<T>>`][Option] is also a smart reference counted pointer, just","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140465,"byte_end":140562,"line_start":7,"line_end":7,"column_start":1,"column_end":98}},{"value":"/ one that can hold NULL.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140563,"byte_end":140590,"line_start":8,"line_end":8,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140591,"byte_end":140594,"line_start":9,"line_end":9,"column_start":1,"column_end":4}},{"value":"/ The trait is unsafe, because a wrong implementation will break the [ArcSwapAny]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140595,"byte_end":140678,"line_start":10,"line_end":10,"column_start":1,"column_end":84}},{"value":"/ implementation and lead to UB.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140679,"byte_end":140713,"line_start":11,"line_end":11,"column_start":1,"column_end":35}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140714,"byte_end":140717,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ This is not actually expected for downstream crate to implement, this is just means to reuse","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140718,"byte_end":140814,"line_start":13,"line_end":13,"column_start":1,"column_end":97}},{"value":"/ code for [Arc] and [`Option<Arc>`][Option] variants. However, it is theoretically possible (if","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140815,"byte_end":140913,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ you have your own [Arc] implementation).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140914,"byte_end":140958,"line_start":15,"line_end":15,"column_start":1,"column_end":45}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140959,"byte_end":140962,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ It is also implemented for [Rc], but that is not considered very useful (because the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":140963,"byte_end":141051,"line_start":17,"line_end":17,"column_start":1,"column_end":89}},{"value":"/ [ArcSwapAny] is not `Send` or `Sync`, therefore there's very little advantage for it to be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141052,"byte_end":141146,"line_start":18,"line_end":18,"column_start":1,"column_end":95}},{"value":"/ atomic).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141147,"byte_end":141159,"line_start":19,"line_end":19,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141160,"byte_end":141163,"line_start":20,"line_end":20,"column_start":1,"column_end":4}},{"value":"/ # Safety","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141164,"byte_end":141176,"line_start":21,"line_end":21,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141177,"byte_end":141180,"line_start":22,"line_end":22,"column_start":1,"column_end":4}},{"value":"/ Aside from the obvious properties (like that incrementing and decrementing a reference count","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141181,"byte_end":141277,"line_start":23,"line_end":23,"column_start":1,"column_end":97}},{"value":"/ cancel each out and that having less references tracked than how many things actually point to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141278,"byte_end":141376,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ the value is fine as long as the count doesn't drop to 0), it also must satisfy that if two","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141377,"byte_end":141472,"line_start":25,"line_end":25,"column_start":1,"column_end":96}},{"value":"/ pointers have the same value, they point to the same object. This is specifically not true for","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141473,"byte_end":141571,"line_start":26,"line_end":26,"column_start":1,"column_end":99}},{"value":"/ ZSTs, but it is true for `Arc`s of ZSTs, because they have the reference counts just after the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141572,"byte_end":141670,"line_start":27,"line_end":27,"column_start":1,"column_end":99}},{"value":"/ value. It would be fine to point to a type-erased version of the same object, though (if one","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141671,"byte_end":141767,"line_start":28,"line_end":28,"column_start":1,"column_end":97}},{"value":"/ could use this trait with unsized types in the first place).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141768,"byte_end":141832,"line_start":29,"line_end":29,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141833,"byte_end":141836,"line_start":30,"line_end":30,"column_start":1,"column_end":4}},{"value":"/ Furthermore, the type should be Pin (eg. if the type is cloned or moved, it should still","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141837,"byte_end":141929,"line_start":31,"line_end":31,"column_start":1,"column_end":93}},{"value":"/ point/deref to the same place in memory).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141930,"byte_end":141975,"line_start":32,"line_end":32,"column_start":1,"column_end":46}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141976,"byte_end":141979,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ [Arc]: std::sync::Arc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":141980,"byte_end":142005,"line_start":34,"line_end":34,"column_start":1,"column_end":26}},{"value":"/ [Rc]: std::rc::Rc","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142006,"byte_end":142027,"line_start":35,"line_end":35,"column_start":1,"column_end":22}},{"value":"/ [ArcSwapAny]: crate::ArcSwapAny","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142028,"byte_end":142063,"line_start":36,"line_end":36,"column_start":1,"column_end":36}}]},{"kind":"Type","id":{"krate":0,"index":403},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142151,"byte_end":142155,"line_start":39,"line_end":39,"column_start":10,"column_end":14},"name":"Base","qualname":"::ref_cnt::RefCnt::Base","value":"type Base;","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" The base type the pointer points to.\n","sig":null,"attributes":[{"value":"/ The base type the pointer points to.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142101,"byte_end":142141,"line_start":38,"line_end":38,"column_start":5,"column_end":45}}]},{"kind":"Method","id":{"krate":0,"index":404},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142550,"byte_end":142558,"line_start":48,"line_end":48,"column_start":8,"column_end":16},"name":"into_ptr","qualname":"::ref_cnt::RefCnt::into_ptr","value":"pub fn into_ptr(Self) -> *mut Self::Base","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" Converts the smart pointer into a raw pointer, without affecting the reference count.","sig":null,"attributes":[{"value":"/ Converts the smart pointer into a raw pointer, without affecting the reference count.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142162,"byte_end":142251,"line_start":41,"line_end":41,"column_start":5,"column_end":94}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142256,"byte_end":142259,"line_start":42,"line_end":42,"column_start":5,"column_end":8}},{"value":"/ This can be seen as kind of freezing the pointer ‒ it'll be later converted back using","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142264,"byte_end":142356,"line_start":43,"line_end":43,"column_start":5,"column_end":95}},{"value":"/ [`from_ptr`](#method.from_ptr).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142361,"byte_end":142396,"line_start":44,"line_end":44,"column_start":5,"column_end":40}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142401,"byte_end":142404,"line_start":45,"line_end":45,"column_start":5,"column_end":8}},{"value":"/ The pointer must point to the value stored (and the value must be the same as one returned","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142409,"byte_end":142503,"line_start":46,"line_end":46,"column_start":5,"column_end":99}},{"value":"/ by [`as_ptr`](#method.as_ptr).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142508,"byte_end":142542,"line_start":47,"line_end":47,"column_start":5,"column_end":39}}]},{"kind":"Method","id":{"krate":0,"index":405},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142753,"byte_end":142759,"line_start":53,"line_end":53,"column_start":8,"column_end":14},"name":"as_ptr","qualname":"::ref_cnt::RefCnt::as_ptr","value":"pub fn as_ptr(&Self) -> *mut Self::Base","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" Provides a view into the smart pointer as a raw pointer.","sig":null,"attributes":[{"value":"/ Provides a view into the smart pointer as a raw pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142594,"byte_end":142654,"line_start":50,"line_end":50,"column_start":5,"column_end":65}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142659,"byte_end":142662,"line_start":51,"line_end":51,"column_start":5,"column_end":8}},{"value":"/ This must not affect the reference count ‒ the pointer is only borrowed.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142667,"byte_end":142745,"line_start":52,"line_end":52,"column_start":5,"column_end":81}}]},{"kind":"Method","id":{"krate":0,"index":406},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143448,"byte_end":143456,"line_start":66,"line_end":66,"column_start":15,"column_end":23},"name":"from_ptr","qualname":"::ref_cnt::RefCnt::from_ptr","value":"pub unsafe fn from_ptr(*const Self::Base) -> Self","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" Converts a raw pointer back into the smart pointer, without affecting the reference count.","sig":null,"attributes":[{"value":"/ Converts a raw pointer back into the smart pointer, without affecting the reference count.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142796,"byte_end":142890,"line_start":55,"line_end":55,"column_start":5,"column_end":99}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142895,"byte_end":142898,"line_start":56,"line_end":56,"column_start":5,"column_end":8}},{"value":"/ This is only called on values previously returned by [`into_ptr`](#method.into_ptr).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142903,"byte_end":142991,"line_start":57,"line_end":57,"column_start":5,"column_end":93}},{"value":"/ However, it is not guaranteed to be 1:1 relation ‒ `from_ptr` may be called more times than","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142996,"byte_end":143093,"line_start":58,"line_end":58,"column_start":5,"column_end":100}},{"value":"/ `into_ptr` temporarily provided the reference count never drops under 1 during that time","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143098,"byte_end":143190,"line_start":59,"line_end":59,"column_start":5,"column_end":97}},{"value":"/ (the implementation sometimes owes a reference). These extra pointers will either be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143195,"byte_end":143283,"line_start":60,"line_end":60,"column_start":5,"column_end":93}},{"value":"/ converted back using `into_ptr` or forgotten.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143288,"byte_end":143337,"line_start":61,"line_end":61,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143342,"byte_end":143345,"line_start":62,"line_end":62,"column_start":5,"column_end":8}},{"value":"/ # Safety","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143350,"byte_end":143362,"line_start":63,"line_end":63,"column_start":5,"column_end":17}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143367,"byte_end":143370,"line_start":64,"line_end":64,"column_start":5,"column_end":8}},{"value":"/ This must not be called by code outside of this crate.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143375,"byte_end":143433,"line_start":65,"line_end":65,"column_start":5,"column_end":63}}]},{"kind":"Method","id":{"krate":0,"index":407},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143617,"byte_end":143620,"line_start":71,"line_end":71,"column_start":8,"column_end":11},"name":"inc","qualname":"::ref_cnt::RefCnt::inc","value":"pub fn inc(&Self) -> *mut Self::Base","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" Increments the reference count by one.","sig":null,"attributes":[{"value":"/ Increments the reference count by one.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143495,"byte_end":143537,"line_start":68,"line_end":68,"column_start":5,"column_end":47}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143542,"byte_end":143545,"line_start":69,"line_end":69,"column_start":5,"column_end":8}},{"value":"/ Return the pointer to the inner thing as a side effect.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143550,"byte_end":143609,"line_start":70,"line_end":70,"column_start":5,"column_end":64}}]},{"kind":"Method","id":{"krate":0,"index":408},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144081,"byte_end":144084,"line_start":84,"line_end":84,"column_start":15,"column_end":18},"name":"dec","qualname":"::ref_cnt::RefCnt::dec","value":"pub unsafe fn dec(*const Self::Base)","parent":{"krate":0,"index":402},"children":[],"decl_id":null,"docs":" Decrements the reference count by one.","sig":null,"attributes":[{"value":"/ Decrements the reference count by one.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143704,"byte_end":143746,"line_start":75,"line_end":75,"column_start":5,"column_end":47}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143751,"byte_end":143754,"line_start":76,"line_end":76,"column_start":5,"column_end":8}},{"value":"/ Note this is called on a raw pointer (one previously returned by","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143759,"byte_end":143827,"line_start":77,"line_end":77,"column_start":5,"column_end":73}},{"value":"/ [`into_ptr`](#method.into_ptr). This may lead to dropping of the reference count to 0 and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143832,"byte_end":143925,"line_start":78,"line_end":78,"column_start":5,"column_end":98}},{"value":"/ destruction of the internal pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143930,"byte_end":143970,"line_start":79,"line_end":79,"column_start":5,"column_end":45}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143975,"byte_end":143978,"line_start":80,"line_end":80,"column_start":5,"column_end":8}},{"value":"/ # Safety","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":143983,"byte_end":143995,"line_start":81,"line_end":81,"column_start":5,"column_end":17}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144000,"byte_end":144003,"line_start":82,"line_end":82,"column_start":5,"column_end":8}},{"value":"/ This must not be called by code outside of this crate.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144008,"byte_end":144066,"line_start":83,"line_end":83,"column_start":5,"column_end":63}}]},{"kind":"Mod","id":{"krate":0,"index":427},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1},"name":"strategy","qualname":"::strategy","value":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","parent":null,"children":[{"krate":0,"index":428},{"krate":0,"index":431},{"krate":0,"index":434},{"krate":0,"index":437},{"krate":0,"index":516},{"krate":0,"index":556},{"krate":0,"index":557},{"krate":0,"index":558},{"krate":0,"index":560},{"krate":0,"index":563},{"krate":0,"index":564},{"krate":0,"index":565},{"krate":0,"index":583},{"krate":0,"index":585},{"krate":0,"index":588},{"krate":0,"index":590}],"decl_id":null,"docs":" Strategies for protecting the reference counts.","sig":null,"attributes":[{"value":"/ Strategies for protecting the reference counts.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145238,"byte_end":145289,"line_start":1,"line_end":1,"column_start":1,"column_end":52}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145290,"byte_end":145293,"line_start":2,"line_end":2,"column_start":1,"column_end":4}},{"value":"/ There are multiple algorithms how to protect the reference counts while they're being updated","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145294,"byte_end":145391,"line_start":3,"line_end":3,"column_start":1,"column_end":98}},{"value":"/ by multiple threads, each with its own set of pros and cons. The [`DefaultStrategy`] is used by","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145392,"byte_end":145491,"line_start":4,"line_end":4,"column_start":1,"column_end":100}},{"value":"/ default and should generally be the least surprising option. It is possible to pick a different","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145492,"byte_end":145591,"line_start":5,"line_end":5,"column_start":1,"column_end":100}},{"value":"/ strategy.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145592,"byte_end":145605,"line_start":6,"line_end":6,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145606,"byte_end":145609,"line_start":7,"line_end":7,"column_start":1,"column_end":4}},{"value":"/ For now, the traits in here are sealed and don't expose any methods to the users of the crate.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145610,"byte_end":145708,"line_start":8,"line_end":8,"column_start":1,"column_end":99}},{"value":"/ This is because we are not confident about the details just yet. In the future it may be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145709,"byte_end":145801,"line_start":9,"line_end":9,"column_start":1,"column_end":93}},{"value":"/ possible for downstream users to implement their own, but for now it is only so users can","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145802,"byte_end":145895,"line_start":10,"line_end":10,"column_start":1,"column_end":94}},{"value":"/ choose one of the provided.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145896,"byte_end":145927,"line_start":11,"line_end":11,"column_start":1,"column_end":32}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145928,"byte_end":145931,"line_start":12,"line_end":12,"column_start":1,"column_end":4}},{"value":"/ It is expected that future strategies would come with different capabilities and limitations.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":145932,"byte_end":146029,"line_start":13,"line_end":13,"column_start":1,"column_end":98}},{"value":"/ In particular, some that are not \"tight\" in the cleanup (delay the cleanup) or not support the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146030,"byte_end":146128,"line_start":14,"line_end":14,"column_start":1,"column_end":99}},{"value":"/ compare and swap operations.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146129,"byte_end":146161,"line_start":15,"line_end":15,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146162,"byte_end":146165,"line_start":16,"line_end":16,"column_start":1,"column_end":4}},{"value":"/ Currently, we have these strategies:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146166,"byte_end":146206,"line_start":17,"line_end":17,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146207,"byte_end":146210,"line_start":18,"line_end":18,"column_start":1,"column_end":4}},{"value":"/ * [`DefaultStrategy`] (this one is used implicitly)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146211,"byte_end":146266,"line_start":19,"line_end":19,"column_start":1,"column_end":56}},{"value":"/ * [`RwLock<()>`][std::sync::RwLock]","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146267,"byte_end":146306,"line_start":20,"line_end":20,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146307,"byte_end":146310,"line_start":21,"line_end":21,"column_start":1,"column_end":4}},{"value":"/ # Testing","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146311,"byte_end":146324,"line_start":22,"line_end":22,"column_start":1,"column_end":14}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146325,"byte_end":146328,"line_start":23,"line_end":23,"column_start":1,"column_end":4}},{"value":"/ Formally, the [`RwLock<()>`][std::sync::RwLock] may be used as a strategy too. It doesn't have","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146329,"byte_end":146427,"line_start":24,"line_end":24,"column_start":1,"column_end":99}},{"value":"/ the performance characteristics or lock-free guarantees of the others, but it is much simpler","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146428,"byte_end":146525,"line_start":25,"line_end":25,"column_start":1,"column_end":98}},{"value":"/ and contains less `unsafe` code (actually, less code altogether). Therefore, it can be used for","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146526,"byte_end":146625,"line_start":26,"line_end":26,"column_start":1,"column_end":100}},{"value":"/ testing purposes and cross-checking.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146626,"byte_end":146666,"line_start":27,"line_end":27,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146667,"byte_end":146670,"line_start":28,"line_end":28,"column_start":1,"column_end":4}},{"value":"/ Note that generally, using [`RwLock<Arc<T>>`][std::sync::RwLock] is likely to be better","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146671,"byte_end":146762,"line_start":29,"line_end":29,"column_start":1,"column_end":92}},{"value":"/ performance wise. So if the goal is to not use third-party unsafe code, only the one in","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146763,"byte_end":146854,"line_start":30,"line_end":30,"column_start":1,"column_end":92}},{"value":"/ [`std`], that is the better option. This is provided mostly for investigation and testing of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146855,"byte_end":146951,"line_start":31,"line_end":31,"column_start":1,"column_end":97}},{"value":"/ [`ArcSwap`] itself or algorithms written to use [`ArcSwap`].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":146952,"byte_end":147016,"line_start":32,"line_end":32,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147017,"byte_end":147020,"line_start":33,"line_end":33,"column_start":1,"column_end":4}},{"value":"/ *This is not meant to be used in production code*.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147021,"byte_end":147075,"line_start":34,"line_end":34,"column_start":1,"column_end":55}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147076,"byte_end":147079,"line_start":35,"line_end":35,"column_start":1,"column_end":4}},{"value":"/ [`ArcSwap`]: crate::ArcSwap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147080,"byte_end":147111,"line_start":36,"line_end":36,"column_start":1,"column_end":32}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147112,"byte_end":147149,"line_start":37,"line_end":37,"column_start":1,"column_end":38}}]},{"kind":"Struct","id":{"krate":0,"index":478},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":153769,"byte_end":153785,"line_start":27,"line_end":27,"column_start":12,"column_end":28},"name":"HybridProtection","qualname":"::strategy::hybrid::HybridProtection","value":"HybridProtection {  }","parent":null,"children":[{"krate":0,"index":480},{"krate":0,"index":481}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":498},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158817,"byte_end":158823,"line_start":160,"line_end":160,"column_start":11,"column_end":17},"name":"Config","qualname":"::strategy::hybrid::Config","value":"Config","parent":null,"children":[{"krate":0,"index":499}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Const","id":{"krate":0,"index":499},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158891,"byte_end":158899,"line_start":162,"line_end":162,"column_start":11,"column_end":19},"name":"USE_FAST","qualname":"::strategy::hybrid::Config::USE_FAST","value":"bool","parent":{"krate":0,"index":498},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":951},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158947,"byte_end":158960,"line_start":166,"line_end":166,"column_start":12,"column_end":25},"name":"DefaultConfig","qualname":"::strategy::hybrid::DefaultConfig","value":"","parent":null,"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Struct","id":{"krate":0,"index":957},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":159068,"byte_end":159082,"line_start":173,"line_end":173,"column_start":12,"column_end":26},"name":"HybridStrategy","qualname":"::strategy::hybrid::HybridStrategy","value":"HybridStrategy {  }","parent":null,"children":[{"krate":0,"index":959}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Type","id":{"krate":0,"index":563},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149760,"byte_end":149775,"line_start":93,"line_end":93,"column_start":10,"column_end":25},"name":"DefaultStrategy","qualname":"::strategy::DefaultStrategy","value":"HybridStrategy<DefaultConfig>","parent":null,"children":[],"decl_id":null,"docs":" The default strategy.","sig":null,"attributes":[{"value":"/ The default strategy.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147455,"byte_end":147480,"line_start":53,"line_end":53,"column_start":1,"column_end":26}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147481,"byte_end":147484,"line_start":54,"line_end":54,"column_start":1,"column_end":4}},{"value":"/ It is used by the type aliases [`ArcSwap`][crate::ArcSwap] and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147485,"byte_end":147551,"line_start":55,"line_end":55,"column_start":1,"column_end":67}},{"value":"/ [`ArcSwapOption`][crate::ArcSwapOption]. Only the other strategies need to be used explicitly.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147552,"byte_end":147650,"line_start":56,"line_end":56,"column_start":1,"column_end":99}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147651,"byte_end":147654,"line_start":57,"line_end":57,"column_start":1,"column_end":4}},{"value":"/ # Performance characteristics","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147655,"byte_end":147688,"line_start":58,"line_end":58,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147689,"byte_end":147692,"line_start":59,"line_end":59,"column_start":1,"column_end":4}},{"value":"/ * It is optimized for read-heavy situations, with possibly many concurrent read accesses from","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147693,"byte_end":147790,"line_start":60,"line_end":60,"column_start":1,"column_end":98}},{"value":"/   multiple threads. Readers don't contend each other at all.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147791,"byte_end":147855,"line_start":61,"line_end":61,"column_start":1,"column_end":65}},{"value":"/ * Readers are wait-free (with the exception of at most once in `usize::MAX / 4` accesses, which","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147856,"byte_end":147955,"line_start":62,"line_end":62,"column_start":1,"column_end":100}},{"value":"/   is only lock-free).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147956,"byte_end":147981,"line_start":63,"line_end":63,"column_start":1,"column_end":26}},{"value":"/ * Writers are lock-free.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":147982,"byte_end":148010,"line_start":64,"line_end":64,"column_start":1,"column_end":29}},{"value":"/ * Reclamation is exact ‒ the resource is released as soon as possible (works like RAII, not","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148011,"byte_end":148108,"line_start":65,"line_end":65,"column_start":1,"column_end":96}},{"value":"/   like a traditional garbage collector; can contain non-`'static` data).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148109,"byte_end":148185,"line_start":66,"line_end":66,"column_start":1,"column_end":77}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148186,"byte_end":148189,"line_start":67,"line_end":67,"column_start":1,"column_end":4}},{"value":"/ Each thread has a limited number of fast slots (currently 8, but the exact number is not","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148190,"byte_end":148282,"line_start":68,"line_end":68,"column_start":1,"column_end":93}},{"value":"/ guaranteed). If it holds at most that many [`Guard`]s at once, acquiring them is fast. Once","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148283,"byte_end":148378,"line_start":69,"line_end":69,"column_start":1,"column_end":96}},{"value":"/ these slots are used up (by holding to these many [`Guard`]s), acquiring more of them will be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148379,"byte_end":148476,"line_start":70,"line_end":70,"column_start":1,"column_end":98}},{"value":"/ slightly slower, but still wait-free.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148477,"byte_end":148518,"line_start":71,"line_end":71,"column_start":1,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148519,"byte_end":148522,"line_start":72,"line_end":72,"column_start":1,"column_end":4}},{"value":"/ If you expect to hold a lot of \"handles\" to the data around, or hold onto it for a long time,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148523,"byte_end":148620,"line_start":73,"line_end":73,"column_start":1,"column_end":98}},{"value":"/ you may want to prefer the [`load_full`][crate::ArcSwapAny::load_full] method.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148621,"byte_end":148703,"line_start":74,"line_end":74,"column_start":1,"column_end":83}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148704,"byte_end":148707,"line_start":75,"line_end":75,"column_start":1,"column_end":4}},{"value":"/ The speed of the fast slots is in the ballpark of locking an *uncontented* mutex. The advantage","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148708,"byte_end":148807,"line_start":76,"line_end":76,"column_start":1,"column_end":100}},{"value":"/ over the mutex is the stability of speed in the face of contention from other threads ‒ while","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148808,"byte_end":148907,"line_start":77,"line_end":77,"column_start":1,"column_end":98}},{"value":"/ the performance of mutex goes rapidly down, the slowdown of running out of held slots or heavy","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":148908,"byte_end":149006,"line_start":78,"line_end":78,"column_start":1,"column_end":99}},{"value":"/ concurrent writer thread in the area of single-digit multiples.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149007,"byte_end":149074,"line_start":79,"line_end":79,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149075,"byte_end":149078,"line_start":80,"line_end":80,"column_start":1,"column_end":4}},{"value":"/ The ballpark benchmark figures (my older computer) are around these, but you're welcome to run","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149079,"byte_end":149177,"line_start":81,"line_end":81,"column_start":1,"column_end":99}},{"value":"/ the benchmarks in the git repository or write your own.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149178,"byte_end":149237,"line_start":82,"line_end":82,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149238,"byte_end":149241,"line_start":83,"line_end":83,"column_start":1,"column_end":4}},{"value":"/ * Load (both uncontented and contented by other loads): ~30ns","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149242,"byte_end":149307,"line_start":84,"line_end":84,"column_start":1,"column_end":66}},{"value":"/ * `load_full`: ~50ns uncontented, goes up a bit with other `load_full` in other threads on the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149308,"byte_end":149406,"line_start":85,"line_end":85,"column_start":1,"column_end":99}},{"value":"/   same `Arc` value (~80-100ns).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149407,"byte_end":149442,"line_start":86,"line_end":86,"column_start":1,"column_end":36}},{"value":"/ * Loads after running out of the slots ‒ about 10-20ns slower than `load_full`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149443,"byte_end":149528,"line_start":87,"line_end":87,"column_start":1,"column_end":84}},{"value":"/ * Stores: Dependent on number of threads, but generally low microseconds.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149529,"byte_end":149606,"line_start":88,"line_end":88,"column_start":1,"column_end":78}},{"value":"/ * Loads with heavy concurrent writer (to the same `ArcSwap`): ~250ns.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149607,"byte_end":149680,"line_start":89,"line_end":89,"column_start":1,"column_end":74}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149681,"byte_end":149684,"line_start":90,"line_end":90,"column_start":1,"column_end":4}},{"value":"/ [`load`]: crate::ArcSwapAny::load","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149685,"byte_end":149722,"line_start":91,"line_end":91,"column_start":1,"column_end":38}},{"value":"/ [`Guard`]: crate::Guard","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149723,"byte_end":149750,"line_start":92,"line_end":92,"column_start":1,"column_end":28}}]},{"kind":"Type","id":{"krate":0,"index":564},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150683,"byte_end":150702,"line_start":111,"line_end":111,"column_start":10,"column_end":29},"name":"IndependentStrategy","qualname":"::strategy::IndependentStrategy","value":"DefaultStrategy","parent":null,"children":[],"decl_id":null,"docs":" Strategy for isolating instances.","sig":null,"attributes":[{"value":"/ Strategy for isolating instances.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149810,"byte_end":149847,"line_start":95,"line_end":95,"column_start":1,"column_end":38}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149848,"byte_end":149851,"line_start":96,"line_end":96,"column_start":1,"column_end":4}},{"value":"/ It is similar to [`DefaultStrategy`], however the spin lock is not sharded (therefore multiple","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149852,"byte_end":149950,"line_start":97,"line_end":97,"column_start":1,"column_end":99}},{"value":"/ concurrent threads might get bigger hit when multiple threads have to fall back). Nevertheless,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":149951,"byte_end":150050,"line_start":98,"line_end":98,"column_start":1,"column_end":100}},{"value":"/ each instance has a private spin lock, not influencing the other instances. That also makes","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150051,"byte_end":150146,"line_start":99,"line_end":99,"column_start":1,"column_end":96}},{"value":"/ them bigger in memory.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150147,"byte_end":150173,"line_start":100,"line_end":100,"column_start":1,"column_end":27}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150174,"byte_end":150177,"line_start":101,"line_end":101,"column_start":1,"column_end":4}},{"value":"/ The hazard pointers are still shared between all instances.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150178,"byte_end":150241,"line_start":102,"line_end":102,"column_start":1,"column_end":64}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150242,"byte_end":150245,"line_start":103,"line_end":103,"column_start":1,"column_end":4}},{"value":"/ The purpose of this strategy is meant for cases where a single instance is going to be","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150246,"byte_end":150336,"line_start":104,"line_end":104,"column_start":1,"column_end":91}},{"value":"/ \"tortured\" a lot, so it should not overflow to other instances.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150337,"byte_end":150404,"line_start":105,"line_end":105,"column_start":1,"column_end":68}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150405,"byte_end":150408,"line_start":106,"line_end":106,"column_start":1,"column_end":4}},{"value":"/ This too may be changed for something else (but with at least as good guarantees, primarily","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150409,"byte_end":150504,"line_start":107,"line_end":107,"column_start":1,"column_end":96}},{"value":"/ that other instances won't get influenced by the \"torture\").","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150505,"byte_end":150569,"line_start":108,"line_end":108,"column_start":1,"column_end":65}}]},{"kind":"Trait","id":{"krate":0,"index":574},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151005,"byte_end":151018,"line_start":124,"line_end":124,"column_start":15,"column_end":28},"name":"InnerStrategy","qualname":"::strategy::sealed::InnerStrategy","value":"InnerStrategy<T: RefCnt>","parent":null,"children":[{"krate":0,"index":576},{"krate":0,"index":577},{"krate":0,"index":578}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Type","id":{"krate":0,"index":576},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151075,"byte_end":151084,"line_start":126,"line_end":126,"column_start":14,"column_end":23},"name":"Protected","qualname":"::strategy::sealed::InnerStrategy::Protected","value":"type Protected: Protected<T>;","parent":{"krate":0,"index":574},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":577},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151118,"byte_end":151122,"line_start":127,"line_end":127,"column_start":19,"column_end":23},"name":"load","qualname":"::strategy::sealed::InnerStrategy::load","value":"pub unsafe fn load(&Self, &AtomicPtr<T::Base>) -> Self::Protected","parent":{"krate":0,"index":574},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":578},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151198,"byte_end":151214,"line_start":128,"line_end":128,"column_start":19,"column_end":35},"name":"wait_for_readers","qualname":"::strategy::sealed::InnerStrategy::wait_for_readers","value":"pub unsafe fn wait_for_readers(&Self, *const T::Base, &AtomicPtr<T::Base>)","parent":{"krate":0,"index":574},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":579},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151295,"byte_end":151298,"line_start":131,"line_end":131,"column_start":15,"column_end":18},"name":"CaS","qualname":"::strategy::sealed::CaS","value":"CaS<T: RefCnt>: InnerStrategy<T>","parent":null,"children":[{"krate":0,"index":581}],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Method","id":{"krate":0,"index":581},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151348,"byte_end":151364,"line_start":132,"line_end":132,"column_start":19,"column_end":35},"name":"compare_and_swap","qualname":"::strategy::sealed::CaS::compare_and_swap","value":"pub unsafe fn compare_and_swap<C: AsRaw<T::Base>>(&Self, &AtomicPtr<T::Base>,\nC, T) -> Self::Protected","parent":{"krate":0,"index":579},"children":[],"decl_id":null,"docs":"","sig":null,"attributes":[]},{"kind":"Trait","id":{"krate":0,"index":583},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152155,"byte_end":152163,"line_start":150,"line_end":150,"column_start":11,"column_end":19},"name":"Strategy","qualname":"::strategy::Strategy","value":"Strategy<T: RefCnt>: sealed::InnerStrategy<T>","parent":null,"children":[],"decl_id":null,"docs":" A strategy for protecting the reference counted pointer `T`.","sig":null,"attributes":[{"value":"/ A strategy for protecting the reference counted pointer `T`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151529,"byte_end":151593,"line_start":141,"line_end":141,"column_start":1,"column_end":65}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151594,"byte_end":151597,"line_start":142,"line_end":142,"column_start":1,"column_end":4}},{"value":"/ This chooses the algorithm for how the reference counts are protected. Note that the user of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151598,"byte_end":151694,"line_start":143,"line_end":143,"column_start":1,"column_end":97}},{"value":"/ the crate can't implement the trait and can't access any method; this is hopefully temporary","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151695,"byte_end":151791,"line_start":144,"line_end":144,"column_start":1,"column_end":97}},{"value":"/ measure to make sure the interface is not part of the stability guarantees of the crate. Once","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151792,"byte_end":151889,"line_start":145,"line_end":145,"column_start":1,"column_end":98}},{"value":"/ enough experience is gained with implementing various strategies, it will be un-sealed and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151890,"byte_end":151984,"line_start":146,"line_end":146,"column_start":1,"column_end":95}},{"value":"/ users will be able to provide their own implementation.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151985,"byte_end":152044,"line_start":147,"line_end":147,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152045,"byte_end":152048,"line_start":148,"line_end":148,"column_start":1,"column_end":4}},{"value":"/ For now, the trait works only as a bound to talk about the types that represent strategies.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152049,"byte_end":152144,"line_start":149,"line_end":149,"column_start":1,"column_end":96}}]},{"kind":"Trait","id":{"krate":0,"index":588},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152595,"byte_end":152598,"line_start":159,"line_end":159,"column_start":11,"column_end":14},"name":"CaS","qualname":"::strategy::CaS","value":"CaS<T: RefCnt>: sealed::CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" An extension of the [`Strategy`], allowing for compare and swap operation.","sig":null,"attributes":[{"value":"/ An extension of the [`Strategy`], allowing for compare and swap operation.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152271,"byte_end":152349,"line_start":153,"line_end":153,"column_start":1,"column_end":79}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152350,"byte_end":152353,"line_start":154,"line_end":154,"column_start":1,"column_end":4}},{"value":"/ The compare and swap operation is \"advanced\" and not all strategies need to support them.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152354,"byte_end":152447,"line_start":155,"line_end":155,"column_start":1,"column_end":94}},{"value":"/ Therefore, it is a separate trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152448,"byte_end":152486,"line_start":156,"line_end":156,"column_start":1,"column_end":39}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152487,"byte_end":152490,"line_start":157,"line_end":157,"column_start":1,"column_end":4}},{"value":"/ Similarly, it is not yet made publicly usable or implementable and works only as a bound.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152491,"byte_end":152584,"line_start":158,"line_end":158,"column_start":1,"column_end":94}}]},{"kind":"Struct","id":{"krate":0,"index":671},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6253,"byte_end":6258,"line_start":163,"line_end":163,"column_start":12,"column_end":17},"name":"Guard","qualname":"::Guard","value":"Guard {  }","parent":null,"children":[{"krate":0,"index":674}],"decl_id":null,"docs":" A temporary storage of the pointer.","sig":null,"attributes":[{"value":"/ A temporary storage of the pointer.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5951,"byte_end":5990,"line_start":158,"line_end":158,"column_start":1,"column_end":40}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5991,"byte_end":5994,"line_start":159,"line_end":159,"column_start":1,"column_end":4}},{"value":"/ This guard object is returned from most loading methods (with the notable exception of","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5995,"byte_end":6085,"line_start":160,"line_end":160,"column_start":1,"column_end":91}},{"value":"/ [`load_full`](struct.ArcSwapAny.html#method.load_full)). It dereferences to the smart pointer","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6086,"byte_end":6183,"line_start":161,"line_end":161,"column_start":1,"column_end":98}},{"value":"/ loaded, so most operations are to be done using that.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6184,"byte_end":6241,"line_start":162,"line_end":162,"column_start":1,"column_end":58}}]},{"kind":"Method","id":{"krate":0,"index":679},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6673,"byte_end":6683,"line_start":175,"line_end":175,"column_start":12,"column_end":22},"name":"into_inner","qualname":"<Guard<T, S>>::into_inner","value":"pub fn into_inner(Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Converts it into the held value.","sig":null,"attributes":[{"value":"/ Converts it into the held value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6388,"byte_end":6424,"line_start":168,"line_end":168,"column_start":5,"column_end":41}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6429,"byte_end":6432,"line_start":169,"line_end":169,"column_start":5,"column_end":8}},{"value":"/ This, on occasion, may be a tiny bit faster than cloning the Arc or whatever is being held","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6437,"byte_end":6531,"line_start":170,"line_end":170,"column_start":5,"column_end":99}},{"value":"/ inside.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6536,"byte_end":6547,"line_start":171,"line_end":171,"column_start":5,"column_end":16}},{"value":"allow(clippy :: wrong_self_convention)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6608,"byte_end":6647,"line_start":173,"line_end":173,"column_start":5,"column_end":44}},{"value":"inline","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6652,"byte_end":6661,"line_start":174,"line_end":174,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":680},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7310,"byte_end":7320,"line_start":195,"line_end":195,"column_start":12,"column_end":22},"name":"from_inner","qualname":"<Guard<T, S>>::from_inner","value":"pub fn from_inner(T) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Create a guard for a given value `inner`.","sig":null,"attributes":[{"value":"/ Create a guard for a given value `inner`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6748,"byte_end":6793,"line_start":179,"line_end":179,"column_start":5,"column_end":50}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6798,"byte_end":6801,"line_start":180,"line_end":180,"column_start":5,"column_end":8}},{"value":"/ This can be useful on occasion to pass a specific object to code that expects or","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6806,"byte_end":6890,"line_start":181,"line_end":181,"column_start":5,"column_end":89}},{"value":"/ wants to store a Guard.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6895,"byte_end":6922,"line_start":182,"line_end":182,"column_start":5,"column_end":32}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6927,"byte_end":6930,"line_start":183,"line_end":183,"column_start":5,"column_end":8}},{"value":"/ # Example","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6935,"byte_end":6948,"line_start":184,"line_end":184,"column_start":5,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6953,"byte_end":6956,"line_start":185,"line_end":185,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6961,"byte_end":6972,"line_start":186,"line_end":186,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::{ArcSwap, DefaultStrategy, Guard};","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6977,"byte_end":7031,"line_start":187,"line_end":187,"column_start":5,"column_end":59}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7036,"byte_end":7061,"line_start":188,"line_end":188,"column_start":5,"column_end":30}},{"value":"/ # let p = ArcSwap::from_pointee(42);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7066,"byte_end":7106,"line_start":189,"line_end":189,"column_start":5,"column_end":45}},{"value":"/ // Create two guards pointing to the same object","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7111,"byte_end":7163,"line_start":190,"line_end":190,"column_start":5,"column_end":57}},{"value":"/ let g1 = p.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7168,"byte_end":7190,"line_start":191,"line_end":191,"column_start":5,"column_end":27}},{"value":"/ let g2 = Guard::<_, DefaultStrategy>::from_inner(Arc::clone(&*g1));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7195,"byte_end":7266,"line_start":192,"line_end":192,"column_start":5,"column_end":76}},{"value":"/ # drop(g2);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7271,"byte_end":7286,"line_start":193,"line_end":193,"column_start":5,"column_end":20}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7291,"byte_end":7298,"line_start":194,"line_end":194,"column_start":5,"column_end":12}}]},{"kind":"Struct","id":{"krate":0,"index":707},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10628,"byte_end":10638,"line_start":296,"line_end":296,"column_start":12,"column_end":22},"name":"ArcSwapAny","qualname":"::ArcSwapAny","value":"ArcSwapAny {  }","parent":null,"children":[{"krate":0,"index":710},{"krate":0,"index":711},{"krate":0,"index":712}],"decl_id":null,"docs":" An atomic storage for a reference counted smart pointer like [`Arc`] or `Option<Arc>`.","sig":null,"attributes":[{"value":"/ An atomic storage for a reference counted smart pointer like [`Arc`] or `Option<Arc>`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8568,"byte_end":8658,"line_start":248,"line_end":248,"column_start":1,"column_end":91}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8659,"byte_end":8662,"line_start":249,"line_end":249,"column_start":1,"column_end":4}},{"value":"/ This is a storage where a smart pointer may live. It can be read and written atomically from","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8663,"byte_end":8759,"line_start":250,"line_end":250,"column_start":1,"column_end":97}},{"value":"/ several threads, but doesn't act like a pointer itself.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8760,"byte_end":8819,"line_start":251,"line_end":251,"column_start":1,"column_end":60}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8820,"byte_end":8823,"line_start":252,"line_end":252,"column_start":1,"column_end":4}},{"value":"/ One can be created [`from`] an [`Arc`]. To get the pointer back, use the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8824,"byte_end":8900,"line_start":253,"line_end":253,"column_start":1,"column_end":77}},{"value":"/ [`load`](#method.load).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8901,"byte_end":8928,"line_start":254,"line_end":254,"column_start":1,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8929,"byte_end":8932,"line_start":255,"line_end":255,"column_start":1,"column_end":4}},{"value":"/ # Note","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8933,"byte_end":8943,"line_start":256,"line_end":256,"column_start":1,"column_end":11}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8944,"byte_end":8947,"line_start":257,"line_end":257,"column_start":1,"column_end":4}},{"value":"/ This is the common generic implementation. This allows sharing the same code for storing","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8948,"byte_end":9040,"line_start":258,"line_end":258,"column_start":1,"column_end":93}},{"value":"/ both `Arc` and `Option<Arc>` (and possibly other similar types).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9041,"byte_end":9109,"line_start":259,"line_end":259,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9110,"byte_end":9113,"line_start":260,"line_end":260,"column_start":1,"column_end":4}},{"value":"/ In your code, you most probably want to interact with it through the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9114,"byte_end":9186,"line_start":261,"line_end":261,"column_start":1,"column_end":73}},{"value":"/ [`ArcSwap`](type.ArcSwap.html) and [`ArcSwapOption`](type.ArcSwapOption.html) aliases. However,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9187,"byte_end":9286,"line_start":262,"line_end":262,"column_start":1,"column_end":100}},{"value":"/ the methods they share are described here and are applicable to both of them. That's why the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9287,"byte_end":9383,"line_start":263,"line_end":263,"column_start":1,"column_end":97}},{"value":"/ examples here use `ArcSwap` ‒ but they could as well be written with `ArcSwapOption` or","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9384,"byte_end":9477,"line_start":264,"line_end":264,"column_start":1,"column_end":92}},{"value":"/ `ArcSwapAny`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9478,"byte_end":9495,"line_start":265,"line_end":265,"column_start":1,"column_end":18}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9496,"byte_end":9499,"line_start":266,"line_end":266,"column_start":1,"column_end":4}},{"value":"/ # Type parameters","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9500,"byte_end":9521,"line_start":267,"line_end":267,"column_start":1,"column_end":22}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9522,"byte_end":9525,"line_start":268,"line_end":268,"column_start":1,"column_end":4}},{"value":"/ * `T`: The smart pointer to be kept inside. This crate provides implementation for `Arc<_>` and","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9526,"byte_end":9625,"line_start":269,"line_end":269,"column_start":1,"column_end":100}},{"value":"/   `Option<Arc<_>>` (`Rc` too, but that one is not practically useful). But third party could","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9626,"byte_end":9722,"line_start":270,"line_end":270,"column_start":1,"column_end":97}},{"value":"/   provide implementations of the [`RefCnt`] trait and plug in others.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9723,"byte_end":9796,"line_start":271,"line_end":271,"column_start":1,"column_end":74}},{"value":"/ * `S`: Chooses the [strategy] used to protect the data inside. They come with various","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9797,"byte_end":9886,"line_start":272,"line_end":272,"column_start":1,"column_end":90}},{"value":"/   performance trade offs, the default [`DefaultStrategy`] is good rule of thumb for most use","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9887,"byte_end":9983,"line_start":273,"line_end":273,"column_start":1,"column_end":97}},{"value":"/   cases.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9984,"byte_end":9996,"line_start":274,"line_end":274,"column_start":1,"column_end":13}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":9997,"byte_end":10000,"line_start":275,"line_end":275,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10001,"byte_end":10015,"line_start":276,"line_end":276,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10016,"byte_end":10019,"line_start":277,"line_end":277,"column_start":1,"column_end":4}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10020,"byte_end":10031,"line_start":278,"line_end":278,"column_start":1,"column_end":12}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10032,"byte_end":10057,"line_start":279,"line_end":279,"column_start":1,"column_end":26}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10058,"byte_end":10086,"line_start":280,"line_end":280,"column_start":1,"column_end":29}},{"value":"/ let arc = Arc::new(42);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10087,"byte_end":10114,"line_start":281,"line_end":281,"column_start":1,"column_end":28}},{"value":"/ let arc_swap = ArcSwap::from(arc);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10115,"byte_end":10153,"line_start":282,"line_end":282,"column_start":1,"column_end":39}},{"value":"/ assert_eq!(42, **arc_swap.load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10154,"byte_end":10192,"line_start":283,"line_end":283,"column_start":1,"column_end":39}},{"value":"/ // It can be read multiple times","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10193,"byte_end":10229,"line_start":284,"line_end":284,"column_start":1,"column_end":37}},{"value":"/ assert_eq!(42, **arc_swap.load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10230,"byte_end":10268,"line_start":285,"line_end":285,"column_start":1,"column_end":39}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10269,"byte_end":10272,"line_start":286,"line_end":286,"column_start":1,"column_end":4}},{"value":"/ // Put a new one in there","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10273,"byte_end":10302,"line_start":287,"line_end":287,"column_start":1,"column_end":30}},{"value":"/ let new_arc = Arc::new(0);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10303,"byte_end":10333,"line_start":288,"line_end":288,"column_start":1,"column_end":31}},{"value":"/ assert_eq!(42, *arc_swap.swap(new_arc));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10334,"byte_end":10378,"line_start":289,"line_end":289,"column_start":1,"column_end":45}},{"value":"/ assert_eq!(0, **arc_swap.load());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10379,"byte_end":10416,"line_start":290,"line_end":290,"column_start":1,"column_end":38}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10417,"byte_end":10424,"line_start":291,"line_end":291,"column_start":1,"column_end":8}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10425,"byte_end":10428,"line_start":292,"line_end":292,"column_start":1,"column_end":4}},{"value":"/ [`Arc`]: https://doc.rust-lang.org/std/sync/struct.Arc.html","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10429,"byte_end":10492,"line_start":293,"line_end":293,"column_start":1,"column_end":64}},{"value":"/ [`from`]: https://doc.rust-lang.org/nightly/std/convert/trait.From.html#tymethod.from","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10493,"byte_end":10582,"line_start":294,"line_end":294,"column_start":1,"column_end":90}},{"value":"/ [`RefCnt`]: trait.RefCnt.html","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":10583,"byte_end":10616,"line_start":295,"line_end":295,"column_start":1,"column_end":34}}]},{"kind":"Method","id":{"krate":0,"index":736},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12214,"byte_end":12217,"line_start":356,"line_end":356,"column_start":12,"column_end":15},"name":"new","qualname":"<ArcSwapAny<T, S>>::new","value":"pub fn new(T) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" Constructs a new storage.\n","sig":null,"attributes":[{"value":"/ Constructs a new storage.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12173,"byte_end":12202,"line_start":355,"line_end":355,"column_start":5,"column_end":34}}]},{"kind":"Method","id":{"krate":0,"index":737},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12388,"byte_end":12401,"line_start":364,"line_end":364,"column_start":12,"column_end":25},"name":"with_strategy","qualname":"<ArcSwapAny<T, S>>::with_strategy","value":"pub fn with_strategy(T, S) -> Self","parent":null,"children":[],"decl_id":null,"docs":" Constructs a new storage while customizing the protection strategy.\n","sig":null,"attributes":[{"value":"/ Constructs a new storage while customizing the protection strategy.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12305,"byte_end":12376,"line_start":363,"line_end":363,"column_start":5,"column_end":76}}]},{"kind":"Method","id":{"krate":0,"index":738},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12878,"byte_end":12888,"line_start":377,"line_end":377,"column_start":12,"column_end":22},"name":"into_inner","qualname":"<ArcSwapAny<T, S>>::into_inner","value":"pub fn into_inner(Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Extracts the value inside.\n","sig":null,"attributes":[{"value":"/ Extracts the value inside.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12836,"byte_end":12866,"line_start":376,"line_end":376,"column_start":5,"column_end":35}}]},{"kind":"Method","id":{"krate":0,"index":739},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13448,"byte_end":13457,"line_start":392,"line_end":392,"column_start":12,"column_end":21},"name":"load_full","qualname":"<ArcSwapAny<T, S>>::load_full","value":"pub fn load_full(&Self) -> T","parent":null,"children":[],"decl_id":null,"docs":" Loads the value.","sig":null,"attributes":[{"value":"/ Loads the value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13118,"byte_end":13138,"line_start":385,"line_end":385,"column_start":5,"column_end":25}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13143,"byte_end":13146,"line_start":386,"line_end":386,"column_start":5,"column_end":8}},{"value":"/ This makes another copy of the held pointer and returns it, atomically (it is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13151,"byte_end":13232,"line_start":387,"line_end":387,"column_start":5,"column_end":86}},{"value":"/ safe even when other thread stores into the same instance at the same time).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13237,"byte_end":13317,"line_start":388,"line_end":388,"column_start":5,"column_end":85}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13322,"byte_end":13325,"line_start":389,"line_end":389,"column_start":5,"column_end":8}},{"value":"/ The method is lock-free and wait-free, but usually more expensive than","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13330,"byte_end":13404,"line_start":390,"line_end":390,"column_start":5,"column_end":79}},{"value":"/ [`load`](#method.load).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13409,"byte_end":13436,"line_start":391,"line_end":391,"column_start":5,"column_end":32}}]},{"kind":"Method","id":{"krate":0,"index":740},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15657,"byte_end":15661,"line_start":442,"line_end":442,"column_start":12,"column_end":16},"name":"load","qualname":"<ArcSwapAny<T, S>>::load","value":"pub fn load(&Self) -> Guard<T, S>","parent":null,"children":[],"decl_id":null,"docs":" Provides a temporary borrow of the object inside.","sig":null,"attributes":[{"value":"/ Provides a temporary borrow of the object inside.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13522,"byte_end":13575,"line_start":396,"line_end":396,"column_start":5,"column_end":58}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13580,"byte_end":13583,"line_start":397,"line_end":397,"column_start":5,"column_end":8}},{"value":"/ This returns a proxy object allowing access to the thing held inside. However, there's","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13588,"byte_end":13678,"line_start":398,"line_end":398,"column_start":5,"column_end":95}},{"value":"/ only limited amount of possible cheap proxies in existence for each thread ‒ if more are","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13683,"byte_end":13777,"line_start":399,"line_end":399,"column_start":5,"column_end":97}},{"value":"/ created, it falls back to equivalent of [`load_full`](#method.load_full) internally.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13782,"byte_end":13870,"line_start":400,"line_end":400,"column_start":5,"column_end":93}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13875,"byte_end":13878,"line_start":401,"line_end":401,"column_start":5,"column_end":8}},{"value":"/ This is therefore a good choice to use for eg. searching a data structure or juggling the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13883,"byte_end":13976,"line_start":402,"line_end":402,"column_start":5,"column_end":98}},{"value":"/ pointers around a bit, but not as something to store in larger amounts. The rule of thumb","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":13981,"byte_end":14074,"line_start":403,"line_end":403,"column_start":5,"column_end":98}},{"value":"/ is this is suited for local variables on stack, but not in long-living data structures.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14079,"byte_end":14170,"line_start":404,"line_end":404,"column_start":5,"column_end":96}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14175,"byte_end":14178,"line_start":405,"line_end":405,"column_start":5,"column_end":8}},{"value":"/ # Consistency","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14183,"byte_end":14200,"line_start":406,"line_end":406,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14205,"byte_end":14208,"line_start":407,"line_end":407,"column_start":5,"column_end":8}},{"value":"/ In case multiple related operations are to be done on the loaded value, it is generally","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14213,"byte_end":14304,"line_start":408,"line_end":408,"column_start":5,"column_end":96}},{"value":"/ recommended to call `load` just once and keep the result over calling it multiple times.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14309,"byte_end":14401,"line_start":409,"line_end":409,"column_start":5,"column_end":97}},{"value":"/ First, keeping it is usually faster. But more importantly, the value can change between the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14406,"byte_end":14501,"line_start":410,"line_end":410,"column_start":5,"column_end":100}},{"value":"/ calls to load, returning different objects, which could lead to logical inconsistency.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14506,"byte_end":14596,"line_start":411,"line_end":411,"column_start":5,"column_end":95}},{"value":"/ Keeping the result makes sure the same object is used.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14601,"byte_end":14659,"line_start":412,"line_end":412,"column_start":5,"column_end":63}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14664,"byte_end":14667,"line_start":413,"line_end":413,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14672,"byte_end":14683,"line_start":414,"line_end":414,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14688,"byte_end":14716,"line_start":415,"line_end":415,"column_start":5,"column_end":33}},{"value":"/ struct Point {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14721,"byte_end":14739,"line_start":416,"line_end":416,"column_start":5,"column_end":23}},{"value":"/     x: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14744,"byte_end":14761,"line_start":417,"line_end":417,"column_start":5,"column_end":22}},{"value":"/     y: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14766,"byte_end":14783,"line_start":418,"line_end":418,"column_start":5,"column_end":22}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14788,"byte_end":14793,"line_start":419,"line_end":419,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14798,"byte_end":14801,"line_start":420,"line_end":420,"column_start":5,"column_end":8}},{"value":"/ fn print_broken(p: &ArcSwap<Point>) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14806,"byte_end":14847,"line_start":421,"line_end":421,"column_start":5,"column_end":46}},{"value":"/     // This is broken, because the x and y may come from different points,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14852,"byte_end":14930,"line_start":422,"line_end":422,"column_start":5,"column_end":83}},{"value":"/     // combining into an invalid point that never existed.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":14935,"byte_end":14997,"line_start":423,"line_end":423,"column_start":5,"column_end":67}},{"value":"/     println!(\"X: {}\", p.load().x);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15002,"byte_end":15040,"line_start":424,"line_end":424,"column_start":5,"column_end":43}},{"value":"/     // If someone changes the content now, between these two loads, we","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15045,"byte_end":15119,"line_start":425,"line_end":425,"column_start":5,"column_end":79}},{"value":"/     // have a problem","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15124,"byte_end":15149,"line_start":426,"line_end":426,"column_start":5,"column_end":30}},{"value":"/     println!(\"Y: {}\", p.load().y);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15154,"byte_end":15192,"line_start":427,"line_end":427,"column_start":5,"column_end":43}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15197,"byte_end":15202,"line_start":428,"line_end":428,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15207,"byte_end":15210,"line_start":429,"line_end":429,"column_start":5,"column_end":8}},{"value":"/ fn print_correct(p: &ArcSwap<Point>) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15215,"byte_end":15257,"line_start":430,"line_end":430,"column_start":5,"column_end":47}},{"value":"/     // Here we take a snapshot of one specific point so both x and y come","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15262,"byte_end":15339,"line_start":431,"line_end":431,"column_start":5,"column_end":82}},{"value":"/     // from the same one.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15344,"byte_end":15373,"line_start":432,"line_end":432,"column_start":5,"column_end":34}},{"value":"/     let point = p.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15378,"byte_end":15407,"line_start":433,"line_end":433,"column_start":5,"column_end":34}},{"value":"/     println!(\"X: {}\", point.x);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15412,"byte_end":15447,"line_start":434,"line_end":434,"column_start":5,"column_end":40}},{"value":"/     println!(\"Y: {}\", point.y);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15452,"byte_end":15487,"line_start":435,"line_end":435,"column_start":5,"column_end":40}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15492,"byte_end":15497,"line_start":436,"line_end":436,"column_start":5,"column_end":10}},{"value":"/ # let p = ArcSwap::from_pointee(Point { x: 10, y: 20 });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15502,"byte_end":15562,"line_start":437,"line_end":437,"column_start":5,"column_end":65}},{"value":"/ # print_correct(&p);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15567,"byte_end":15591,"line_start":438,"line_end":438,"column_start":5,"column_end":29}},{"value":"/ # print_broken(&p);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15596,"byte_end":15619,"line_start":439,"line_end":439,"column_start":5,"column_end":28}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15624,"byte_end":15631,"line_start":440,"line_end":440,"column_start":5,"column_end":12}},{"value":"inline","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15636,"byte_end":15645,"line_start":441,"line_end":441,"column_start":5,"column_end":14}}]},{"kind":"Method","id":{"krate":0,"index":741},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15950,"byte_end":15955,"line_start":450,"line_end":450,"column_start":12,"column_end":17},"name":"store","qualname":"<ArcSwapAny<T, S>>::store","value":"pub fn store(&Self, T)","parent":null,"children":[],"decl_id":null,"docs":" Replaces the value inside this instance.","sig":null,"attributes":[{"value":"/ Replaces the value inside this instance.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15798,"byte_end":15842,"line_start":447,"line_end":447,"column_start":5,"column_end":49}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15847,"byte_end":15850,"line_start":448,"line_end":448,"column_start":5,"column_end":8}},{"value":"/ Further loads will yield the new value. Uses [`swap`](#method.swap) internally.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":15855,"byte_end":15938,"line_start":449,"line_end":449,"column_start":5,"column_end":88}}]},{"kind":"Method","id":{"krate":0,"index":742},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16071,"byte_end":16075,"line_start":455,"line_end":455,"column_start":12,"column_end":16},"name":"swap","qualname":"<ArcSwapAny<T, S>>::swap","value":"pub fn swap(&Self, T) -> T","parent":null,"children":[],"decl_id":null,"docs":" Exchanges the value inside this instance.\n","sig":null,"attributes":[{"value":"/ Exchanges the value inside this instance.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16014,"byte_end":16059,"line_start":454,"line_end":454,"column_start":5,"column_end":50}}]},{"kind":"Method","id":{"krate":0,"index":743},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17389,"byte_end":17405,"line_start":484,"line_end":484,"column_start":12,"column_end":28},"name":"compare_and_swap","qualname":"<ArcSwapAny<T, S>>::compare_and_swap","value":"pub fn compare_and_swap<C>(&Self, C, T) -> Guard<T, S> where\nC: AsRaw<T::Base>, S: CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" Swaps the stored Arc if it equals to `current`.","sig":null,"attributes":[{"value":"/ Swaps the stored Arc if it equals to `current`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16513,"byte_end":16564,"line_start":468,"line_end":468,"column_start":5,"column_end":56}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16569,"byte_end":16572,"line_start":469,"line_end":469,"column_start":5,"column_end":8}},{"value":"/ If the current value of the `ArcSwapAny` equals to `current`, the `new` is stored inside.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16577,"byte_end":16670,"line_start":470,"line_end":470,"column_start":5,"column_end":98}},{"value":"/ If not, nothing happens.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16675,"byte_end":16703,"line_start":471,"line_end":471,"column_start":5,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16708,"byte_end":16711,"line_start":472,"line_end":472,"column_start":5,"column_end":8}},{"value":"/ The previous value (no matter if the swap happened or not) is returned. Therefore, if the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16716,"byte_end":16809,"line_start":473,"line_end":473,"column_start":5,"column_end":98}},{"value":"/ returned value is equal to `current`, the swap happened. You want to do a pointer-based","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16814,"byte_end":16905,"line_start":474,"line_end":474,"column_start":5,"column_end":96}},{"value":"/ comparison to determine it.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16910,"byte_end":16941,"line_start":475,"line_end":475,"column_start":5,"column_end":36}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16946,"byte_end":16949,"line_start":476,"line_end":476,"column_start":5,"column_end":8}},{"value":"/ In other words, if the caller „guesses“ the value of current correctly, it acts like","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":16954,"byte_end":17046,"line_start":477,"line_end":477,"column_start":5,"column_end":93}},{"value":"/ [`swap`](#method.swap), otherwise it acts like [`load_full`](#method.load_full) (including","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17051,"byte_end":17145,"line_start":478,"line_end":478,"column_start":5,"column_end":99}},{"value":"/ the limitations).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17150,"byte_end":17171,"line_start":479,"line_end":479,"column_start":5,"column_end":26}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17176,"byte_end":17179,"line_start":480,"line_end":480,"column_start":5,"column_end":8}},{"value":"/ The `current` can be specified as `&Arc`, [`Guard`](struct.Guard.html),","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17184,"byte_end":17259,"line_start":481,"line_end":481,"column_start":5,"column_end":80}},{"value":"/ [`&Guards`](struct.Guards.html) or as a raw pointer (but _not_ owned `Arc`). See the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17264,"byte_end":17352,"line_start":482,"line_end":482,"column_start":5,"column_end":93}},{"value":"/ [`AsRaw`] trait.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17357,"byte_end":17377,"line_start":483,"line_end":483,"column_start":5,"column_end":25}}]},{"kind":"Method","id":{"krate":0,"index":745},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21621,"byte_end":21624,"line_start":592,"line_end":592,"column_start":12,"column_end":15},"name":"rcu","qualname":"<ArcSwapAny<T, S>>::rcu","value":"pub fn rcu<R, F>(&Self, F) -> T where F: FnMut(&T) -> R, R: Into<T>, S: CaS<T>","parent":null,"children":[],"decl_id":null,"docs":" Read-Copy-Update of the pointer inside.","sig":null,"attributes":[{"value":"/ Read-Copy-Update of the pointer inside.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17651,"byte_end":17694,"line_start":493,"line_end":493,"column_start":5,"column_end":48}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17699,"byte_end":17702,"line_start":494,"line_end":494,"column_start":5,"column_end":8}},{"value":"/ This is useful in read-heavy situations with several threads that sometimes update the data","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17707,"byte_end":17802,"line_start":495,"line_end":495,"column_start":5,"column_end":100}},{"value":"/ pointed to. The readers can just repeatedly use [`load`](#method.load) without any locking.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17807,"byte_end":17902,"line_start":496,"line_end":496,"column_start":5,"column_end":100}},{"value":"/ The writer uses this method to perform the update.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17907,"byte_end":17961,"line_start":497,"line_end":497,"column_start":5,"column_end":59}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17966,"byte_end":17969,"line_start":498,"line_end":498,"column_start":5,"column_end":8}},{"value":"/ In case there's only one thread that does updates or in case the next version is","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":17974,"byte_end":18058,"line_start":499,"line_end":499,"column_start":5,"column_end":89}},{"value":"/ independent of the previous one, simple [`swap`](#method.swap) or [`store`](#method.store)","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18063,"byte_end":18157,"line_start":500,"line_end":500,"column_start":5,"column_end":99}},{"value":"/ is enough. Otherwise, it may be needed to retry the update operation if some other thread","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18162,"byte_end":18255,"line_start":501,"line_end":501,"column_start":5,"column_end":98}},{"value":"/ made an update in between. This is what this method does.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18260,"byte_end":18321,"line_start":502,"line_end":502,"column_start":5,"column_end":66}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18326,"byte_end":18329,"line_start":503,"line_end":503,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18334,"byte_end":18348,"line_start":504,"line_end":504,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18353,"byte_end":18356,"line_start":505,"line_end":505,"column_start":5,"column_end":8}},{"value":"/ This will *not* work as expected, because between loading and storing, some other thread","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18361,"byte_end":18453,"line_start":506,"line_end":506,"column_start":5,"column_end":97}},{"value":"/ might have updated the value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18458,"byte_end":18491,"line_start":507,"line_end":507,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18496,"byte_end":18499,"line_start":508,"line_end":508,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18504,"byte_end":18515,"line_start":509,"line_end":509,"column_start":5,"column_end":16}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18520,"byte_end":18545,"line_start":510,"line_end":510,"column_start":5,"column_end":30}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18550,"byte_end":18555,"line_start":511,"line_end":511,"column_start":5,"column_end":10}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18560,"byte_end":18588,"line_start":512,"line_end":512,"column_start":5,"column_end":33}},{"value":"/ # use crossbeam_utils::thread;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18593,"byte_end":18627,"line_start":513,"line_end":513,"column_start":5,"column_end":39}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18632,"byte_end":18637,"line_start":514,"line_end":514,"column_start":5,"column_end":10}},{"value":"/ let cnt = ArcSwap::from_pointee(0);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18642,"byte_end":18681,"line_start":515,"line_end":515,"column_start":5,"column_end":44}},{"value":"/ thread::scope(|scope| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18686,"byte_end":18713,"line_start":516,"line_end":516,"column_start":5,"column_end":32}},{"value":"/     for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18718,"byte_end":18742,"line_start":517,"line_end":517,"column_start":5,"column_end":29}},{"value":"/         scope.spawn(|_| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18747,"byte_end":18776,"line_start":518,"line_end":518,"column_start":5,"column_end":34}},{"value":"/            let inner = cnt.load_full();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18781,"byte_end":18824,"line_start":519,"line_end":519,"column_start":5,"column_end":48}},{"value":"/             // Another thread might have stored some other number than what we have","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18829,"byte_end":18916,"line_start":520,"line_end":520,"column_start":5,"column_end":92}},{"value":"/             // between the load and store.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18921,"byte_end":18967,"line_start":521,"line_end":521,"column_start":5,"column_end":51}},{"value":"/             cnt.store(Arc::new(*inner + 1));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":18972,"byte_end":19020,"line_start":522,"line_end":522,"column_start":5,"column_end":53}},{"value":"/         });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19025,"byte_end":19040,"line_start":523,"line_end":523,"column_start":5,"column_end":20}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19045,"byte_end":19054,"line_start":524,"line_end":524,"column_start":5,"column_end":14}},{"value":"/ }).unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19059,"byte_end":19075,"line_start":525,"line_end":525,"column_start":5,"column_end":21}},{"value":"/ // This will likely fail:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19080,"byte_end":19109,"line_start":526,"line_end":526,"column_start":5,"column_end":34}},{"value":"/ // assert_eq!(10, *cnt.load_full());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19114,"byte_end":19154,"line_start":527,"line_end":527,"column_start":5,"column_end":45}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19159,"byte_end":19166,"line_start":528,"line_end":528,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19171,"byte_end":19174,"line_start":529,"line_end":529,"column_start":5,"column_end":8}},{"value":"/ This will, but it can call the closure multiple times to retry:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19179,"byte_end":19246,"line_start":530,"line_end":530,"column_start":5,"column_end":72}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19251,"byte_end":19254,"line_start":531,"line_end":531,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19259,"byte_end":19270,"line_start":532,"line_end":532,"column_start":5,"column_end":16}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19275,"byte_end":19303,"line_start":533,"line_end":533,"column_start":5,"column_end":33}},{"value":"/ # use crossbeam_utils::thread;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19308,"byte_end":19342,"line_start":534,"line_end":534,"column_start":5,"column_end":39}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19347,"byte_end":19352,"line_start":535,"line_end":535,"column_start":5,"column_end":10}},{"value":"/ let cnt = ArcSwap::from_pointee(0);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19357,"byte_end":19396,"line_start":536,"line_end":536,"column_start":5,"column_end":44}},{"value":"/ thread::scope(|scope| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19401,"byte_end":19428,"line_start":537,"line_end":537,"column_start":5,"column_end":32}},{"value":"/     for _ in 0..10 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19433,"byte_end":19457,"line_start":538,"line_end":538,"column_start":5,"column_end":29}},{"value":"/         scope.spawn(|_| cnt.rcu(|inner| **inner + 1));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19462,"byte_end":19520,"line_start":539,"line_end":539,"column_start":5,"column_end":63}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19525,"byte_end":19534,"line_start":540,"line_end":540,"column_start":5,"column_end":14}},{"value":"/ }).unwrap();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19539,"byte_end":19555,"line_start":541,"line_end":541,"column_start":5,"column_end":21}},{"value":"/ assert_eq!(10, *cnt.load_full());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19560,"byte_end":19597,"line_start":542,"line_end":542,"column_start":5,"column_end":42}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19602,"byte_end":19609,"line_start":543,"line_end":543,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19614,"byte_end":19617,"line_start":544,"line_end":544,"column_start":5,"column_end":8}},{"value":"/ Due to the retries, you might want to perform all the expensive operations *before* the","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19622,"byte_end":19713,"line_start":545,"line_end":545,"column_start":5,"column_end":96}},{"value":"/ rcu. As an example, if there's a cache of some computations as a map, and the map is cheap","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19718,"byte_end":19812,"line_start":546,"line_end":546,"column_start":5,"column_end":99}},{"value":"/ to clone but the computations are not, you could do something like this:","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19817,"byte_end":19893,"line_start":547,"line_end":547,"column_start":5,"column_end":81}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19898,"byte_end":19901,"line_start":548,"line_end":548,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19906,"byte_end":19917,"line_start":549,"line_end":549,"column_start":5,"column_end":16}},{"value":"/ # use std::collections::HashMap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19922,"byte_end":19958,"line_start":550,"line_end":550,"column_start":5,"column_end":41}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19963,"byte_end":19968,"line_start":551,"line_end":551,"column_start":5,"column_end":10}},{"value":"/ # use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":19973,"byte_end":20001,"line_start":552,"line_end":552,"column_start":5,"column_end":33}},{"value":"/ # use once_cell::sync::Lazy;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20006,"byte_end":20038,"line_start":553,"line_end":553,"column_start":5,"column_end":37}},{"value":"/ #","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20043,"byte_end":20048,"line_start":554,"line_end":554,"column_start":5,"column_end":10}},{"value":"/ fn expensive_computation(x: usize) -> usize {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20053,"byte_end":20102,"line_start":555,"line_end":555,"column_start":5,"column_end":54}},{"value":"/     x * 2 // Let's pretend multiplication is *really expensive expensive*","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20107,"byte_end":20184,"line_start":556,"line_end":556,"column_start":5,"column_end":82}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20189,"byte_end":20194,"line_start":557,"line_end":557,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20199,"byte_end":20202,"line_start":558,"line_end":558,"column_start":5,"column_end":8}},{"value":"/ type Cache = HashMap<usize, usize>;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20207,"byte_end":20246,"line_start":559,"line_end":559,"column_start":5,"column_end":44}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20251,"byte_end":20254,"line_start":560,"line_end":560,"column_start":5,"column_end":8}},{"value":"/ static CACHE: Lazy<ArcSwap<Cache>> = Lazy::new(|| ArcSwap::default());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20259,"byte_end":20333,"line_start":561,"line_end":561,"column_start":5,"column_end":79}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20338,"byte_end":20341,"line_start":562,"line_end":562,"column_start":5,"column_end":8}},{"value":"/ fn cached_computation(x: usize) -> usize {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20346,"byte_end":20392,"line_start":563,"line_end":563,"column_start":5,"column_end":51}},{"value":"/     let cache = CACHE.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20397,"byte_end":20430,"line_start":564,"line_end":564,"column_start":5,"column_end":38}},{"value":"/     if let Some(result) = cache.get(&x) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20435,"byte_end":20480,"line_start":565,"line_end":565,"column_start":5,"column_end":50}},{"value":"/         return *result;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20485,"byte_end":20512,"line_start":566,"line_end":566,"column_start":5,"column_end":32}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20517,"byte_end":20526,"line_start":567,"line_end":567,"column_start":5,"column_end":14}},{"value":"/     // Not in cache. Compute and store.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20531,"byte_end":20574,"line_start":568,"line_end":568,"column_start":5,"column_end":48}},{"value":"/     // The expensive computation goes outside, so it is not retried.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20579,"byte_end":20651,"line_start":569,"line_end":569,"column_start":5,"column_end":77}},{"value":"/     let result = expensive_computation(x);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20656,"byte_end":20702,"line_start":570,"line_end":570,"column_start":5,"column_end":51}},{"value":"/     CACHE.rcu(|cache| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20707,"byte_end":20734,"line_start":571,"line_end":571,"column_start":5,"column_end":32}},{"value":"/         // The cheaper clone of the cache can be retried if need be.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20739,"byte_end":20811,"line_start":572,"line_end":572,"column_start":5,"column_end":77}},{"value":"/         let mut cache = HashMap::clone(&cache);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20816,"byte_end":20867,"line_start":573,"line_end":573,"column_start":5,"column_end":56}},{"value":"/         cache.insert(x, result);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20872,"byte_end":20908,"line_start":574,"line_end":574,"column_start":5,"column_end":41}},{"value":"/         cache","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20913,"byte_end":20930,"line_start":575,"line_end":575,"column_start":5,"column_end":22}},{"value":"/     });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20935,"byte_end":20946,"line_start":576,"line_end":576,"column_start":5,"column_end":16}},{"value":"/     result","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20951,"byte_end":20965,"line_start":577,"line_end":577,"column_start":5,"column_end":19}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20970,"byte_end":20975,"line_start":578,"line_end":578,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20980,"byte_end":20983,"line_start":579,"line_end":579,"column_start":5,"column_end":8}},{"value":"/ assert_eq!(42, cached_computation(21));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":20988,"byte_end":21031,"line_start":580,"line_end":580,"column_start":5,"column_end":48}},{"value":"/ assert_eq!(42, cached_computation(21));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21036,"byte_end":21079,"line_start":581,"line_end":581,"column_start":5,"column_end":48}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21084,"byte_end":21091,"line_start":582,"line_end":582,"column_start":5,"column_end":12}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21096,"byte_end":21099,"line_start":583,"line_end":583,"column_start":5,"column_end":8}},{"value":"/ # The cost of cloning","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21104,"byte_end":21129,"line_start":584,"line_end":584,"column_start":5,"column_end":30}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21134,"byte_end":21137,"line_start":585,"line_end":585,"column_start":5,"column_end":8}},{"value":"/ Depending on the size of cache above, the cloning might not be as cheap. You can however","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21142,"byte_end":21234,"line_start":586,"line_end":586,"column_start":5,"column_end":97}},{"value":"/ use persistent data structures ‒ each modification creates a new data structure, but it","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21239,"byte_end":21332,"line_start":587,"line_end":587,"column_start":5,"column_end":96}},{"value":"/ shares most of the data with the old one (which is usually accomplished by using `Arc`s","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21337,"byte_end":21428,"line_start":588,"line_end":588,"column_start":5,"column_end":96}},{"value":"/ inside to share the unchanged values). Something like","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21433,"byte_end":21490,"line_start":589,"line_end":589,"column_start":5,"column_end":62}},{"value":"/ [`rpds`](https://crates.io/crates/rpds) or [`im`](https://crates.io/crates/im) might do","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21495,"byte_end":21586,"line_start":590,"line_end":590,"column_start":5,"column_end":96}},{"value":"/ what you need.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":21591,"byte_end":21609,"line_start":591,"line_end":591,"column_start":5,"column_end":23}}]},{"kind":"Method","id":{"krate":0,"index":748},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23962,"byte_end":23965,"line_start":661,"line_end":661,"column_start":12,"column_end":15},"name":"map","qualname":"<ArcSwapAny<T, S>>::map","value":"pub fn map<I, R, F>(&Self, F) -> Map<&Self, I, F> where F: Fn(&I) -> &R +\nClone, Self: Access<I>","parent":null,"children":[],"decl_id":null,"docs":" Provides an access to an up to date projection of the carried data.","sig":null,"attributes":[{"value":"/ Provides an access to an up to date projection of the carried data.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22087,"byte_end":22158,"line_start":611,"line_end":611,"column_start":5,"column_end":76}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22163,"byte_end":22166,"line_start":612,"line_end":612,"column_start":5,"column_end":8}},{"value":"/ # Motivation","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22171,"byte_end":22187,"line_start":613,"line_end":613,"column_start":5,"column_end":21}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22192,"byte_end":22195,"line_start":614,"line_end":614,"column_start":5,"column_end":8}},{"value":"/ Sometimes, an application consists of components. Each component has its own configuration","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22200,"byte_end":22294,"line_start":615,"line_end":615,"column_start":5,"column_end":99}},{"value":"/ structure. The whole configuration contains all the smaller config parts.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22299,"byte_end":22376,"line_start":616,"line_end":616,"column_start":5,"column_end":82}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22381,"byte_end":22384,"line_start":617,"line_end":617,"column_start":5,"column_end":8}},{"value":"/ For the sake of separation and abstraction, it is not desirable to pass the whole","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22389,"byte_end":22474,"line_start":618,"line_end":618,"column_start":5,"column_end":90}},{"value":"/ configuration to each of the components. This allows the component to take only access to","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22479,"byte_end":22572,"line_start":619,"line_end":619,"column_start":5,"column_end":98}},{"value":"/ its own part.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22577,"byte_end":22594,"line_start":620,"line_end":620,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22599,"byte_end":22602,"line_start":621,"line_end":621,"column_start":5,"column_end":8}},{"value":"/ # Lifetimes & flexibility","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22607,"byte_end":22636,"line_start":622,"line_end":622,"column_start":5,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22641,"byte_end":22644,"line_start":623,"line_end":623,"column_start":5,"column_end":8}},{"value":"/ This method is not the most flexible way, as the returned type borrows into the `ArcSwap`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22649,"byte_end":22743,"line_start":624,"line_end":624,"column_start":5,"column_end":99}},{"value":"/ To provide access into eg. `Arc<ArcSwap<T>>`, you can create the [`Map`] type directly. See","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22748,"byte_end":22843,"line_start":625,"line_end":625,"column_start":5,"column_end":100}},{"value":"/ the [`access`] module.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22848,"byte_end":22874,"line_start":626,"line_end":626,"column_start":5,"column_end":31}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22879,"byte_end":22882,"line_start":627,"line_end":627,"column_start":5,"column_end":8}},{"value":"/ # Performance","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22887,"byte_end":22904,"line_start":628,"line_end":628,"column_start":5,"column_end":22}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22909,"byte_end":22912,"line_start":629,"line_end":629,"column_start":5,"column_end":8}},{"value":"/ As the provided function is called on each load from the shared storage, it should","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":22917,"byte_end":23003,"line_start":630,"line_end":630,"column_start":5,"column_end":91}},{"value":"/ generally be cheap. It is expected this will usually be just referencing of a field inside","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23008,"byte_end":23102,"line_start":631,"line_end":631,"column_start":5,"column_end":99}},{"value":"/ the structure.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23107,"byte_end":23125,"line_start":632,"line_end":632,"column_start":5,"column_end":23}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23130,"byte_end":23133,"line_start":633,"line_end":633,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23138,"byte_end":23152,"line_start":634,"line_end":634,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23157,"byte_end":23160,"line_start":635,"line_end":635,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23165,"byte_end":23176,"line_start":636,"line_end":636,"column_start":5,"column_end":16}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23181,"byte_end":23204,"line_start":637,"line_end":637,"column_start":5,"column_end":28}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23209,"byte_end":23212,"line_start":638,"line_end":638,"column_start":5,"column_end":8}},{"value":"/ use arc_swap::ArcSwap;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23217,"byte_end":23243,"line_start":639,"line_end":639,"column_start":5,"column_end":31}},{"value":"/ use arc_swap::access::Access;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23248,"byte_end":23281,"line_start":640,"line_end":640,"column_start":5,"column_end":38}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23286,"byte_end":23289,"line_start":641,"line_end":641,"column_start":5,"column_end":8}},{"value":"/ struct Cfg {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23294,"byte_end":23310,"line_start":642,"line_end":642,"column_start":5,"column_end":21}},{"value":"/     value: usize,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23315,"byte_end":23336,"line_start":643,"line_end":643,"column_start":5,"column_end":26}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23341,"byte_end":23346,"line_start":644,"line_end":644,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23351,"byte_end":23354,"line_start":645,"line_end":645,"column_start":5,"column_end":8}},{"value":"/ fn print_many_times<V: Access<usize>>(value: V) {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23359,"byte_end":23412,"line_start":646,"line_end":646,"column_start":5,"column_end":58}},{"value":"/     for _ in 0..25 {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23417,"byte_end":23441,"line_start":647,"line_end":647,"column_start":5,"column_end":29}},{"value":"/         let value = value.load();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23446,"byte_end":23483,"line_start":648,"line_end":648,"column_start":5,"column_end":42}},{"value":"/         println!(\"{}\", *value);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23488,"byte_end":23523,"line_start":649,"line_end":649,"column_start":5,"column_end":40}},{"value":"/     }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23528,"byte_end":23537,"line_start":650,"line_end":650,"column_start":5,"column_end":14}},{"value":"/ }","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23542,"byte_end":23547,"line_start":651,"line_end":651,"column_start":5,"column_end":10}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23552,"byte_end":23555,"line_start":652,"line_end":652,"column_start":5,"column_end":8}},{"value":"/ let shared = ArcSwap::from_pointee(Cfg { value: 0 });","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23560,"byte_end":23617,"line_start":653,"line_end":653,"column_start":5,"column_end":62}},{"value":"/ let mapped = shared.map(|c: &Cfg| &c.value);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23622,"byte_end":23670,"line_start":654,"line_end":654,"column_start":5,"column_end":53}},{"value":"/ crossbeam_utils::thread::scope(|s| {","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23675,"byte_end":23715,"line_start":655,"line_end":655,"column_start":5,"column_end":45}},{"value":"/     // Will print some zeroes and some twos","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23720,"byte_end":23767,"line_start":656,"line_end":656,"column_start":5,"column_end":52}},{"value":"/     s.spawn(|_| print_many_times(mapped));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23772,"byte_end":23818,"line_start":657,"line_end":657,"column_start":5,"column_end":51}},{"value":"/     s.spawn(|_| shared.store(Arc::new(Cfg { value: 2 })));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23823,"byte_end":23885,"line_start":658,"line_end":658,"column_start":5,"column_end":67}},{"value":"/ }).expect(\"Something panicked in a thread\");","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23890,"byte_end":23938,"line_start":659,"line_end":659,"column_start":5,"column_end":53}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":23943,"byte_end":23950,"line_start":660,"line_end":660,"column_start":5,"column_end":12}}]},{"kind":"Type","id":{"krate":0,"index":752},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24275,"byte_end":24282,"line_start":674,"line_end":674,"column_start":10,"column_end":17},"name":"ArcSwap","qualname":"::ArcSwap","value":"ArcSwapAny<Arc<T>>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage for `Arc`.","sig":null,"attributes":[{"value":"/ An atomic storage for `Arc`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24117,"byte_end":24149,"line_start":670,"line_end":670,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24150,"byte_end":24153,"line_start":671,"line_end":671,"column_start":1,"column_end":4}},{"value":"/ This is a type alias only. Most of its methods are described on","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24154,"byte_end":24221,"line_start":672,"line_end":672,"column_start":1,"column_end":68}},{"value":"/ [`ArcSwapAny`](struct.ArcSwapAny.html).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24222,"byte_end":24265,"line_start":673,"line_end":673,"column_start":1,"column_end":44}}]},{"kind":"Method","id":{"krate":0,"index":757},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24512,"byte_end":24524,"line_start":680,"line_end":680,"column_start":12,"column_end":24},"name":"from_pointee","qualname":"<ArcSwapAny<Arc<T>, S>>::from_pointee","value":"pub fn from_pointee(T) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor directly from the pointed-to value.","sig":null,"attributes":[{"value":"/ A convenience constructor directly from the pointed-to value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24366,"byte_end":24431,"line_start":677,"line_end":677,"column_start":5,"column_end":70}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24436,"byte_end":24439,"line_start":678,"line_end":678,"column_start":5,"column_end":8}},{"value":"/ Direct equivalent for `ArcSwap::new(Arc::new(val))`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24444,"byte_end":24500,"line_start":679,"line_end":679,"column_start":5,"column_end":61}}]},{"kind":"Type","id":{"krate":0,"index":758},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25346,"byte_end":25359,"line_start":708,"line_end":708,"column_start":10,"column_end":23},"name":"ArcSwapOption","qualname":"::ArcSwapOption","value":"ArcSwapAny<Option<Arc<T>>>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage for `Option<Arc>`.","sig":null,"attributes":[{"value":"/ An atomic storage for `Option<Arc>`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24620,"byte_end":24660,"line_start":688,"line_end":688,"column_start":1,"column_end":41}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24661,"byte_end":24664,"line_start":689,"line_end":689,"column_start":1,"column_end":4}},{"value":"/ This is very similar to [`ArcSwap`](type.ArcSwap.html), but allows storing NULL values, which","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24665,"byte_end":24762,"line_start":690,"line_end":690,"column_start":1,"column_end":98}},{"value":"/ is useful in some situations.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24763,"byte_end":24796,"line_start":691,"line_end":691,"column_start":1,"column_end":34}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24797,"byte_end":24800,"line_start":692,"line_end":692,"column_start":1,"column_end":4}},{"value":"/ This is a type alias only. Most of the methods are described on","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24801,"byte_end":24868,"line_start":693,"line_end":693,"column_start":1,"column_end":68}},{"value":"/ [`ArcSwapAny`](struct.ArcSwapAny.html). Even though the examples there often use `ArcSwap`,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24869,"byte_end":24964,"line_start":694,"line_end":694,"column_start":1,"column_end":96}},{"value":"/ they are applicable to `ArcSwapOption` with appropriate changes.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24965,"byte_end":25033,"line_start":695,"line_end":695,"column_start":1,"column_end":69}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25034,"byte_end":25037,"line_start":696,"line_end":696,"column_start":1,"column_end":4}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25038,"byte_end":25052,"line_start":697,"line_end":697,"column_start":1,"column_end":15}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25053,"byte_end":25056,"line_start":698,"line_end":698,"column_start":1,"column_end":4}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25057,"byte_end":25064,"line_start":699,"line_end":699,"column_start":1,"column_end":8}},{"value":"/ use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25065,"byte_end":25088,"line_start":700,"line_end":700,"column_start":1,"column_end":24}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25089,"byte_end":25121,"line_start":701,"line_end":701,"column_start":1,"column_end":33}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25122,"byte_end":25125,"line_start":702,"line_end":702,"column_start":1,"column_end":4}},{"value":"/ let shared = ArcSwapOption::from(None);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25126,"byte_end":25169,"line_start":703,"line_end":703,"column_start":1,"column_end":44}},{"value":"/ assert!(shared.load_full().is_none());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25170,"byte_end":25212,"line_start":704,"line_end":704,"column_start":1,"column_end":43}},{"value":"/ assert!(shared.swap(Some(Arc::new(42))).is_none());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25213,"byte_end":25268,"line_start":705,"line_end":705,"column_start":1,"column_end":56}},{"value":"/ assert_eq!(42, **shared.load_full().as_ref().unwrap());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25269,"byte_end":25328,"line_start":706,"line_end":706,"column_start":1,"column_end":60}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25329,"byte_end":25336,"line_start":707,"line_end":707,"column_start":1,"column_end":8}}]},{"kind":"Method","id":{"krate":0,"index":763},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25971,"byte_end":25983,"line_start":725,"line_end":725,"column_start":12,"column_end":24},"name":"from_pointee","qualname":"<ArcSwapAny<Option<Arc<T>>, S>>::from_pointee","value":"pub fn from_pointee<V: Into<Option<T>>>(V) -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor directly from a pointed-to value.","sig":null,"attributes":[{"value":"/ A convenience constructor directly from a pointed-to value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25467,"byte_end":25530,"line_start":711,"line_end":711,"column_start":5,"column_end":68}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25535,"byte_end":25538,"line_start":712,"line_end":712,"column_start":5,"column_end":8}},{"value":"/ This just allocates the `Arc` under the hood.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25543,"byte_end":25592,"line_start":713,"line_end":713,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25597,"byte_end":25600,"line_start":714,"line_end":714,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25605,"byte_end":25619,"line_start":715,"line_end":715,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25624,"byte_end":25627,"line_start":716,"line_end":716,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25632,"byte_end":25643,"line_start":717,"line_end":717,"column_start":5,"column_end":16}},{"value":"/ use arc_swap::ArcSwapOption;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25648,"byte_end":25680,"line_start":718,"line_end":718,"column_start":5,"column_end":37}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25685,"byte_end":25688,"line_start":719,"line_end":719,"column_start":5,"column_end":8}},{"value":"/ let empty: ArcSwapOption<usize> = ArcSwapOption::from_pointee(None);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25693,"byte_end":25765,"line_start":720,"line_end":720,"column_start":5,"column_end":77}},{"value":"/ assert!(empty.load().is_none());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25770,"byte_end":25806,"line_start":721,"line_end":721,"column_start":5,"column_end":41}},{"value":"/ let non_empty: ArcSwapOption<usize> = ArcSwapOption::from_pointee(42);","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25811,"byte_end":25885,"line_start":722,"line_end":722,"column_start":5,"column_end":79}},{"value":"/ assert_eq!(42, **non_empty.load().as_ref().unwrap());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25890,"byte_end":25947,"line_start":723,"line_end":723,"column_start":5,"column_end":62}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25952,"byte_end":25959,"line_start":724,"line_end":724,"column_start":5,"column_end":12}}]},{"kind":"Method","id":{"krate":0,"index":765},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26238,"byte_end":26243,"line_start":735,"line_end":735,"column_start":12,"column_end":17},"name":"empty","qualname":"<ArcSwapAny<Option<Arc<T>>, S>>::empty","value":"pub fn empty() -> Self where S: Default","parent":null,"children":[],"decl_id":null,"docs":" A convenience constructor for an empty value.","sig":null,"attributes":[{"value":"/ A convenience constructor for an empty value.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26111,"byte_end":26160,"line_start":732,"line_end":732,"column_start":5,"column_end":54}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26165,"byte_end":26168,"line_start":733,"line_end":733,"column_start":5,"column_end":8}},{"value":"/ This is equivalent to `ArcSwapOption::new(None)`.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26173,"byte_end":26226,"line_start":734,"line_end":734,"column_start":5,"column_end":58}}]},{"kind":"Method","id":{"krate":0,"index":768},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27104,"byte_end":27115,"line_start":763,"line_end":763,"column_start":18,"column_end":29},"name":"const_empty","qualname":"<ArcSwapOption<T>>::const_empty","value":"pub const fn const_empty() -> Self","parent":null,"children":[],"decl_id":null,"docs":" A const-fn equivalent of [empty].","sig":null,"attributes":[{"value":"/ A const-fn equivalent of [empty].","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26354,"byte_end":26391,"line_start":744,"line_end":744,"column_start":5,"column_end":42}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26396,"byte_end":26399,"line_start":745,"line_end":745,"column_start":5,"column_end":8}},{"value":"/ Just like [empty], this creates an `None`-holding `ArcSwapOption`. The [empty] is, however,","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26404,"byte_end":26499,"line_start":746,"line_end":746,"column_start":5,"column_end":100}},{"value":"/ more general ‒ this is available only for the default strategy, while [empty] is for any","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26504,"byte_end":26598,"line_start":747,"line_end":747,"column_start":5,"column_end":97}},{"value":"/ [Default]-constructible strategy (current or future one).","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26603,"byte_end":26664,"line_start":748,"line_end":748,"column_start":5,"column_end":66}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26669,"byte_end":26672,"line_start":749,"line_end":749,"column_start":5,"column_end":8}},{"value":"/ [empty]: ArcSwapAny::empty","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26677,"byte_end":26707,"line_start":750,"line_end":750,"column_start":5,"column_end":35}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26712,"byte_end":26715,"line_start":751,"line_end":751,"column_start":5,"column_end":8}},{"value":"/ # Examples","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26720,"byte_end":26734,"line_start":752,"line_end":752,"column_start":5,"column_end":19}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26739,"byte_end":26742,"line_start":753,"line_end":753,"column_start":5,"column_end":8}},{"value":"/ ```rust","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26747,"byte_end":26758,"line_start":754,"line_end":754,"column_start":5,"column_end":16}},{"value":"/ # use std::sync::Arc;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26763,"byte_end":26788,"line_start":755,"line_end":755,"column_start":5,"column_end":30}},{"value":"/ # use arc_swap::ArcSwapOption;","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26793,"byte_end":26827,"line_start":756,"line_end":756,"column_start":5,"column_end":39}},{"value":"/ static GLOBAL_DATA: ArcSwapOption<usize> = ArcSwapOption::const_empty();","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26832,"byte_end":26908,"line_start":757,"line_end":757,"column_start":5,"column_end":81}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26913,"byte_end":26916,"line_start":758,"line_end":758,"column_start":5,"column_end":8}},{"value":"/ assert!(GLOBAL_DATA.load().is_none());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26921,"byte_end":26963,"line_start":759,"line_end":759,"column_start":5,"column_end":47}},{"value":"/ GLOBAL_DATA.store(Some(Arc::new(42)));","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26968,"byte_end":27010,"line_start":760,"line_end":760,"column_start":5,"column_end":47}},{"value":"/ assert_eq!(42, **GLOBAL_DATA.load().as_ref().unwrap());","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27015,"byte_end":27074,"line_start":761,"line_end":761,"column_start":5,"column_end":64}},{"value":"/ ```","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27079,"byte_end":27086,"line_start":762,"line_end":762,"column_start":5,"column_end":12}}]},{"kind":"Type","id":{"krate":0,"index":769},"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27796,"byte_end":27814,"line_start":782,"line_end":782,"column_start":10,"column_end":28},"name":"IndependentArcSwap","qualname":"::IndependentArcSwap","value":"ArcSwapAny<Arc<T>, IndependentStrategy>","parent":null,"children":[],"decl_id":null,"docs":" An atomic storage that doesn't share the internal generation locks with others.","sig":null,"attributes":[{"value":"/ An atomic storage that doesn't share the internal generation locks with others.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27345,"byte_end":27428,"line_start":774,"line_end":774,"column_start":1,"column_end":84}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27429,"byte_end":27432,"line_start":775,"line_end":775,"column_start":1,"column_end":4}},{"value":"/ This makes it bigger and it also might suffer contention (on the HW level) if used from many","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27433,"byte_end":27529,"line_start":776,"line_end":776,"column_start":1,"column_end":97}},{"value":"/ threads at once. On the other hand, it can't block writes in other instances.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27530,"byte_end":27611,"line_start":777,"line_end":777,"column_start":1,"column_end":82}},{"value":"/","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27612,"byte_end":27615,"line_start":778,"line_end":778,"column_start":1,"column_end":4}},{"value":"/ See the [`IndependentStrategy`] for further details.","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":27616,"byte_end":27672,"line_start":779,"line_end":779,"column_start":1,"column_end":57}}]}],"impls":[{"id":0,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53807,"byte_end":53808,"line_start":115,"line_end":115,"column_start":59,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":37},{"krate":0,"index":38}],"docs":"","sig":null,"attributes":[]},{"id":1,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53957,"byte_end":53967,"line_start":122,"line_end":122,"column_start":47,"column_end":57},"value":"","parent":null,"children":[{"krate":0,"index":42},{"krate":0,"index":43}],"docs":"","sig":null,"attributes":[]},{"id":2,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54208,"byte_end":54219,"line_start":134,"line_end":134,"column_start":40,"column_end":51},"value":"","parent":null,"children":[{"krate":0,"index":47},{"krate":0,"index":48}],"docs":"","sig":null,"attributes":[]},{"id":3,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54365,"byte_end":54375,"line_start":141,"line_end":141,"column_start":44,"column_end":54},"value":"","parent":null,"children":[{"krate":0,"index":52},{"krate":0,"index":53}],"docs":"","sig":null,"attributes":[]},{"id":4,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54546,"byte_end":54557,"line_start":148,"line_end":148,"column_start":39,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":57},{"krate":0,"index":58}],"docs":"","sig":null,"attributes":[]},{"id":5,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54701,"byte_end":54711,"line_start":155,"line_end":155,"column_start":43,"column_end":53},"value":"","parent":null,"children":[{"krate":0,"index":62},{"krate":0,"index":63}],"docs":"","sig":null,"attributes":[]},{"id":6,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54944,"byte_end":54952,"line_start":165,"line_end":165,"column_start":27,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":70},{"krate":0,"index":71}],"docs":"","sig":null,"attributes":[]},{"id":7,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55845,"byte_end":55846,"line_start":197,"line_end":197,"column_start":29,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":78}],"docs":"","sig":null,"attributes":[]},{"id":8,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56981,"byte_end":56994,"line_start":247,"line_end":247,"column_start":26,"column_end":39},"value":"","parent":null,"children":[{"krate":0,"index":86},{"krate":0,"index":87}],"docs":"","sig":null,"attributes":[]},{"id":9,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57324,"byte_end":57332,"line_start":267,"line_end":267,"column_start":28,"column_end":36},"value":"","parent":null,"children":[{"krate":0,"index":93},{"krate":0,"index":94}],"docs":"","sig":null,"attributes":[]},{"id":10,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57814,"byte_end":57817,"line_start":289,"line_end":289,"column_start":15,"column_end":18},"value":"","parent":null,"children":[{"krate":0,"index":99}],"docs":"","sig":null,"attributes":[]},{"id":11,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58683,"byte_end":58686,"line_start":313,"line_end":313,"column_start":32,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":106},{"krate":0,"index":107}],"docs":"","sig":null,"attributes":[]},{"id":12,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59142,"byte_end":59155,"line_start":333,"line_end":333,"column_start":19,"column_end":32},"value":"","parent":null,"children":[{"krate":0,"index":110},{"krate":0,"index":111}],"docs":"","sig":null,"attributes":[]},{"id":13,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59751,"byte_end":59759,"line_start":351,"line_end":351,"column_start":30,"column_end":38},"value":"","parent":null,"children":[{"krate":0,"index":114},{"krate":0,"index":115}],"docs":"","sig":null,"attributes":[]},{"id":14,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":64204,"byte_end":64209,"line_start":53,"line_end":53,"column_start":32,"column_end":37},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":15,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":64255,"byte_end":64260,"line_start":54,"line_end":54,"column_start":40,"column_end":45},"value":"","parent":null,"children":[{"krate":0,"index":152}],"docs":"","sig":null,"attributes":[]},{"id":16,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68533,"byte_end":68538,"line_start":115,"line_end":115,"column_start":15,"column_end":20},"value":"","parent":null,"children":[{"krate":0,"index":186},{"krate":0,"index":187},{"krate":0,"index":188},{"krate":0,"index":189},{"krate":0,"index":190},{"krate":0,"index":191}],"docs":"","sig":null,"attributes":[]},{"id":17,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72628,"byte_end":72633,"line_start":229,"line_end":229,"column_start":37,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":198}],"docs":"","sig":null,"attributes":[]},{"id":18,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72864,"byte_end":72869,"line_start":240,"line_end":240,"column_start":27,"column_end":32},"value":"","parent":null,"children":[{"krate":0,"index":203}],"docs":"","sig":null,"attributes":[]},{"id":19,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73393,"byte_end":73401,"line_start":261,"line_end":261,"column_start":35,"column_end":43},"value":"","parent":null,"children":[{"krate":0,"index":210}],"docs":"","sig":null,"attributes":[]},{"id":20,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/fast.rs","byte_start":84475,"byte_end":84480,"line_start":38,"line_end":38,"column_start":6,"column_end":11},"value":"","parent":null,"children":[{"krate":0,"index":240}],"docs":"","sig":null,"attributes":[]},{"id":21,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/helping.rs","byte_start":95114,"byte_end":95119,"line_start":169,"line_end":169,"column_start":18,"column_end":23},"value":"","parent":null,"children":[{"krate":0,"index":278}],"docs":"","sig":null,"attributes":[]},{"id":22,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/helping.rs","byte_start":95713,"byte_end":95718,"line_start":186,"line_end":186,"column_start":6,"column_end":11},"value":"","parent":null,"children":[{"krate":0,"index":280},{"krate":0,"index":281},{"krate":0,"index":282},{"krate":0,"index":285},{"krate":0,"index":286}],"docs":"","sig":null,"attributes":[]},{"id":23,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":105690,"byte_end":105705,"line_start":49,"line_end":49,"column_start":15,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":334}],"docs":"","sig":null,"attributes":[]},{"id":24,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":106042,"byte_end":106046,"line_start":65,"line_end":65,"column_start":18,"column_end":22},"value":"","parent":null,"children":[{"krate":0,"index":342}],"docs":"","sig":null,"attributes":[]},{"id":25,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":106323,"byte_end":106327,"line_start":77,"line_end":77,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":344},{"krate":0,"index":347},{"krate":0,"index":348},{"krate":0,"index":349},{"krate":0,"index":350},{"krate":0,"index":353},{"krate":0,"index":354}],"docs":"","sig":null,"attributes":[]},{"id":26,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":111260,"byte_end":111269,"line_start":205,"line_end":205,"column_start":6,"column_end":15},"value":"","parent":null,"children":[{"krate":0,"index":360},{"krate":0,"index":365},{"krate":0,"index":366},{"krate":0,"index":367},{"krate":0,"index":370}],"docs":"","sig":null,"attributes":[]},{"id":27,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":114934,"byte_end":114943,"line_start":296,"line_end":296,"column_start":15,"column_end":24},"value":"","parent":null,"children":[{"krate":0,"index":374}],"docs":"","sig":null,"attributes":[]},{"id":28,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":78923,"byte_end":78927,"line_start":33,"line_end":33,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":376}],"docs":"","sig":null,"attributes":[]},{"id":29,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":79318,"byte_end":79322,"line_start":42,"line_end":42,"column_start":18,"column_end":22},"value":"","parent":null,"children":[{"krate":0,"index":378}],"docs":"","sig":null,"attributes":[]},{"id":30,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":79409,"byte_end":79413,"line_start":48,"line_end":48,"column_start":6,"column_end":10},"value":"","parent":null,"children":[{"krate":0,"index":380},{"krate":0,"index":382}],"docs":"","sig":null,"attributes":[]},{"id":31,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144181,"byte_end":144184,"line_start":89,"line_end":89,"column_start":27,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":411},{"krate":0,"index":412},{"krate":0,"index":413},{"krate":0,"index":414}],"docs":"","sig":null,"attributes":[]},{"id":32,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144487,"byte_end":144489,"line_start":102,"line_end":102,"column_start":27,"column_end":29},"value":"","parent":null,"children":[{"krate":0,"index":417},{"krate":0,"index":418},{"krate":0,"index":419},{"krate":0,"index":420}],"docs":"","sig":null,"attributes":[]},{"id":33,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144795,"byte_end":144801,"line_start":115,"line_end":115,"column_start":35,"column_end":41},"value":"","parent":null,"children":[{"krate":0,"index":423},{"krate":0,"index":424},{"krate":0,"index":425},{"krate":0,"index":426}],"docs":"","sig":null,"attributes":[]},{"id":34,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":153877,"byte_end":153893,"line_start":32,"line_end":32,"column_start":17,"column_end":33},"value":"","parent":null,"children":[{"krate":0,"index":484},{"krate":0,"index":485},{"krate":0,"index":486},{"krate":0,"index":487}],"docs":"","sig":null,"attributes":[]},{"id":35,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":156853,"byte_end":156869,"line_start":99,"line_end":99,"column_start":26,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":490}],"docs":"","sig":null,"attributes":[]},{"id":36,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":157715,"byte_end":157731,"line_start":122,"line_end":122,"column_start":34,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":493},{"krate":0,"index":494}],"docs":"","sig":null,"attributes":[]},{"id":37,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158715,"byte_end":158731,"line_start":153,"line_end":153,"column_start":31,"column_end":47},"value":"","parent":null,"children":[{"krate":0,"index":497}],"docs":"","sig":null,"attributes":[]},{"id":38,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158979,"byte_end":158992,"line_start":168,"line_end":168,"column_start":17,"column_end":30},"value":"","parent":null,"children":[{"krate":0,"index":501}],"docs":"","sig":null,"attributes":[]},{"id":39,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":159156,"byte_end":159170,"line_start":177,"line_end":177,"column_start":35,"column_end":49},"value":"","parent":null,"children":[{"krate":0,"index":505},{"krate":0,"index":506},{"krate":0,"index":509}],"docs":"","sig":null,"attributes":[]},{"id":40,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":160222,"byte_end":160236,"line_start":203,"line_end":203,"column_start":41,"column_end":55},"value":"","parent":null,"children":[{"krate":0,"index":514}],"docs":"","sig":null,"attributes":[]},{"id":41,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":161577,"byte_end":161578,"line_start":8,"line_end":8,"column_start":34,"column_end":35},"value":"","parent":null,"children":[{"krate":0,"index":545},{"krate":0,"index":546}],"docs":"","sig":null,"attributes":[]},{"id":42,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":161754,"byte_end":161760,"line_start":20,"line_end":20,"column_start":38,"column_end":44},"value":"","parent":null,"children":[{"krate":0,"index":549},{"krate":0,"index":550},{"krate":0,"index":551}],"docs":"","sig":null,"attributes":[]},{"id":43,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":162344,"byte_end":162350,"line_start":37,"line_end":37,"column_start":28,"column_end":34},"value":"","parent":null,"children":[{"krate":0,"index":554}],"docs":"","sig":null,"attributes":[]},{"id":44,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152265,"byte_end":152266,"line_start":151,"line_end":151,"column_start":62,"column_end":63},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":45,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152675,"byte_end":152676,"line_start":160,"line_end":160,"column_start":47,"column_end":48},"value":"","parent":null,"children":[],"docs":"","sig":null,"attributes":[]},{"id":46,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6370,"byte_end":6375,"line_start":167,"line_end":167,"column_start":37,"column_end":42},"value":"","parent":null,"children":[{"krate":0,"index":679},{"krate":0,"index":680}],"docs":"","sig":null,"attributes":[]},{"id":47,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7474,"byte_end":7479,"line_start":202,"line_end":202,"column_start":47,"column_end":52},"value":"","parent":null,"children":[{"krate":0,"index":685},{"krate":0,"index":686}],"docs":"","sig":null,"attributes":[]},{"id":48,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7632,"byte_end":7637,"line_start":210,"line_end":210,"column_start":45,"column_end":50},"value":"","parent":null,"children":[{"krate":0,"index":690}],"docs":"","sig":null,"attributes":[]},{"id":49,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7773,"byte_end":7778,"line_start":216,"line_end":216,"column_start":55,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":694}],"docs":"","sig":null,"attributes":[]},{"id":50,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7906,"byte_end":7911,"line_start":222,"line_end":222,"column_start":51,"column_end":56},"value":"","parent":null,"children":[{"krate":0,"index":698}],"docs":"","sig":null,"attributes":[]},{"id":51,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8079,"byte_end":8084,"line_start":228,"line_end":228,"column_start":55,"column_end":60},"value":"","parent":null,"children":[{"krate":0,"index":702}],"docs":"","sig":null,"attributes":[]},{"id":52,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11061,"byte_end":11071,"line_start":309,"line_end":309,"column_start":55,"column_end":65},"value":"","parent":null,"children":[{"krate":0,"index":716}],"docs":"","sig":null,"attributes":[]},{"id":53,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11207,"byte_end":11217,"line_start":315,"line_end":315,"column_start":42,"column_end":52},"value":"","parent":null,"children":[{"krate":0,"index":720}],"docs":"","sig":null,"attributes":[]},{"id":54,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11548,"byte_end":11558,"line_start":327,"line_end":327,"column_start":35,"column_end":45},"value":"","parent":null,"children":[{"krate":0,"index":724}],"docs":"","sig":null,"attributes":[]},{"id":55,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11813,"byte_end":11823,"line_start":339,"line_end":339,"column_start":37,"column_end":47},"value":"","parent":null,"children":[{"krate":0,"index":728}],"docs":"","sig":null,"attributes":[]},{"id":56,"kind":"Direct","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12031,"byte_end":12041,"line_start":348,"line_end":348,"column_start":65,"column_end":75},"value":"","parent":null,"children":[{"krate":0,"index":732}],"docs":"","sig":null,"attributes":[]},{"id":57,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12150,"byte_end":12160,"line_start":354,"line_end":354,"column_start":33,"column_end":43},"value":"","parent":null,"children":[{"krate":0,"index":736},{"krate":0,"index":737},{"krate":0,"index":738},{"krate":0,"index":739},{"krate":0,"index":740},{"krate":0,"index":741},{"krate":0,"index":742},{"krate":0,"index":743},{"krate":0,"index":745},{"krate":0,"index":748}],"docs":"","sig":null,"attributes":[]},{"id":58,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24338,"byte_end":24348,"line_start":676,"line_end":676,"column_start":30,"column_end":40},"value":"","parent":null,"children":[{"krate":0,"index":757}],"docs":"","sig":null,"attributes":[]},{"id":59,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25431,"byte_end":25441,"line_start":710,"line_end":710,"column_start":38,"column_end":48},"value":"","parent":null,"children":[{"krate":0,"index":763},{"krate":0,"index":765}],"docs":"","sig":null,"attributes":[]},{"id":60,"kind":"Inherent","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26331,"byte_end":26344,"line_start":743,"line_end":743,"column_start":9,"column_end":22},"value":"","parent":null,"children":[{"krate":0,"index":768}],"docs":"","sig":null,"attributes":[]}],"refs":[{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5198,"byte_end":5204,"line_start":127,"line_end":127,"column_start":9,"column_end":15},"ref_id":{"krate":0,"index":3}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5226,"byte_end":5231,"line_start":129,"line_end":129,"column_start":9,"column_end":14},"ref_id":{"krate":0,"index":163}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5275,"byte_end":5279,"line_start":132,"line_end":132,"column_start":9,"column_end":13},"ref_id":{"krate":0,"index":387}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117459,"byte_end":117467,"line_start":38,"line_end":38,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":388}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117477,"byte_end":117488,"line_start":39,"line_end":39,"column_start":9,"column_end":20},"ref_id":{"krate":0,"index":389}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117498,"byte_end":117506,"line_start":40,"line_end":40,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":390}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/docs/mod.rs","byte_start":117516,"byte_end":117527,"line_start":41,"line_end":41,"column_start":9,"column_end":20},"ref_id":{"krate":0,"index":391}},{"kind":"Mod","span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":5339,"byte_end":5347,"line_start":136,"line_end":136,"column_start":9,"column_end":17},"ref_id":{"krate":0,"index":427}}],"macro_refs":[],"relations":[{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53807,"byte_end":53808,"line_start":115,"line_end":115,"column_start":59,"column_end":60},"kind":{"Impl":{"id":0}},"from":{"krate":0,"index":36},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":53957,"byte_end":53967,"line_start":122,"line_end":122,"column_start":47,"column_end":57},"kind":{"Impl":{"id":1}},"from":{"krate":0,"index":707},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54208,"byte_end":54219,"line_start":134,"line_end":134,"column_start":40,"column_end":51},"kind":{"Impl":{"id":2}},"from":{"krate":0,"index":772},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54365,"byte_end":54375,"line_start":141,"line_end":141,"column_start":44,"column_end":54},"kind":{"Impl":{"id":3}},"from":{"krate":0,"index":707},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54546,"byte_end":54557,"line_start":148,"line_end":148,"column_start":39,"column_end":50},"kind":{"Impl":{"id":4}},"from":{"krate":0,"index":772},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54701,"byte_end":54711,"line_start":155,"line_end":155,"column_start":43,"column_end":53},"kind":{"Impl":{"id":5}},"from":{"krate":0,"index":707},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":54944,"byte_end":54952,"line_start":165,"line_end":165,"column_start":27,"column_end":35},"kind":{"Impl":{"id":6}},"from":{"krate":0,"index":64},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":55845,"byte_end":55846,"line_start":197,"line_end":197,"column_start":29,"column_end":30},"kind":{"Impl":{"id":7}},"from":{"krate":0,"index":77},"to":{"krate":0,"index":72}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":56981,"byte_end":56994,"line_start":247,"line_end":247,"column_start":26,"column_end":39},"kind":{"Impl":{"id":8}},"from":{"krate":0,"index":79},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57324,"byte_end":57332,"line_start":267,"line_end":267,"column_start":28,"column_end":36},"kind":{"Impl":{"id":9}},"from":{"krate":0,"index":781},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":57814,"byte_end":57817,"line_start":289,"line_end":289,"column_start":15,"column_end":18},"kind":{"Impl":{"id":10}},"from":{"krate":0,"index":806},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":58683,"byte_end":58686,"line_start":313,"line_end":313,"column_start":32,"column_end":35},"kind":{"Impl":{"id":11}},"from":{"krate":0,"index":806},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59142,"byte_end":59155,"line_start":333,"line_end":333,"column_start":19,"column_end":32},"kind":{"Impl":{"id":12}},"from":{"krate":0,"index":827},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/access.rs","byte_start":59751,"byte_end":59759,"line_start":351,"line_end":351,"column_start":30,"column_end":38},"kind":{"Impl":{"id":13}},"from":{"krate":0,"index":860},"to":{"krate":0,"index":29}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":63750,"byte_end":63756,"line_start":34,"line_end":34,"column_start":21,"column_end":27},"kind":"SuperTrait","from":{"krate":0,"index":125},"to":{"krate":0,"index":129}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":64204,"byte_end":64209,"line_start":53,"line_end":53,"column_start":32,"column_end":37},"kind":{"Impl":{"id":14}},"from":{"krate":0,"index":671},"to":{"krate":0,"index":125}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/as_raw.rs","byte_start":64255,"byte_end":64260,"line_start":54,"line_end":54,"column_start":40,"column_end":45},"kind":{"Impl":{"id":15}},"from":{"krate":0,"index":671},"to":{"krate":0,"index":129}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":68533,"byte_end":68538,"line_start":115,"line_end":115,"column_start":15,"column_end":20},"kind":{"Impl":{"id":16}},"from":{"krate":0,"index":893},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72628,"byte_end":72633,"line_start":229,"line_end":229,"column_start":37,"column_end":42},"kind":{"Impl":{"id":17}},"from":{"krate":0,"index":893},"to":{"krate":0,"index":179}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":72864,"byte_end":72869,"line_start":240,"line_end":240,"column_start":27,"column_end":32},"kind":{"Impl":{"id":18}},"from":{"krate":0,"index":893},"to":{"krate":2,"index":2963}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/cache.rs","byte_start":73393,"byte_end":73401,"line_start":261,"line_end":261,"column_start":35,"column_end":43},"kind":{"Impl":{"id":19}},"from":{"krate":0,"index":906},"to":{"krate":0,"index":179}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/fast.rs","byte_start":84475,"byte_end":84480,"line_start":38,"line_end":38,"column_start":6,"column_end":11},"kind":{"Impl":{"id":20}},"from":{"krate":0,"index":926},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/helping.rs","byte_start":95114,"byte_end":95119,"line_start":169,"line_end":169,"column_start":18,"column_end":23},"kind":{"Impl":{"id":21}},"from":{"krate":0,"index":271},"to":{"krate":2,"index":3035}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/helping.rs","byte_start":95713,"byte_end":95718,"line_start":186,"line_end":186,"column_start":6,"column_end":11},"kind":{"Impl":{"id":22}},"from":{"krate":0,"index":271},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":105690,"byte_end":105705,"line_start":49,"line_end":49,"column_start":15,"column_end":30},"kind":{"Impl":{"id":23}},"from":{"krate":0,"index":329},"to":{"krate":2,"index":3300}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":106042,"byte_end":106046,"line_start":65,"line_end":65,"column_start":18,"column_end":22},"kind":{"Impl":{"id":24}},"from":{"krate":0,"index":335},"to":{"krate":2,"index":3035}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":106323,"byte_end":106327,"line_start":77,"line_end":77,"column_start":6,"column_end":10},"kind":{"Impl":{"id":25}},"from":{"krate":0,"index":335},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":111260,"byte_end":111269,"line_start":205,"line_end":205,"column_start":6,"column_end":15},"kind":{"Impl":{"id":26}},"from":{"krate":0,"index":355},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/list.rs","byte_start":114934,"byte_end":114943,"line_start":296,"line_end":296,"column_start":15,"column_end":24},"kind":{"Impl":{"id":27}},"from":{"krate":0,"index":355},"to":{"krate":2,"index":3300}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":78923,"byte_end":78927,"line_start":33,"line_end":33,"column_start":6,"column_end":10},"kind":{"Impl":{"id":28}},"from":{"krate":0,"index":946},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":79318,"byte_end":79322,"line_start":42,"line_end":42,"column_start":18,"column_end":22},"kind":{"Impl":{"id":29}},"from":{"krate":0,"index":946},"to":{"krate":2,"index":3035}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/debt/mod.rs","byte_start":79409,"byte_end":79413,"line_start":48,"line_end":48,"column_start":6,"column_end":10},"kind":{"Impl":{"id":30}},"from":{"krate":0,"index":946},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":142089,"byte_end":142094,"line_start":37,"line_end":37,"column_start":26,"column_end":31},"kind":"SuperTrait","from":{"krate":2,"index":2679},"to":{"krate":0,"index":402}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144181,"byte_end":144184,"line_start":89,"line_end":89,"column_start":27,"column_end":30},"kind":{"Impl":{"id":31}},"from":{"krate":5,"index":5980},"to":{"krate":0,"index":402}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144487,"byte_end":144489,"line_start":102,"line_end":102,"column_start":27,"column_end":29},"kind":{"Impl":{"id":32}},"from":{"krate":5,"index":4659},"to":{"krate":0,"index":402}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/ref_cnt.rs","byte_start":144795,"byte_end":144801,"line_start":115,"line_end":115,"column_start":35,"column_end":41},"kind":{"Impl":{"id":33}},"from":{"krate":2,"index":39667},"to":{"krate":0,"index":402}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":153877,"byte_end":153893,"line_start":32,"line_end":32,"column_start":17,"column_end":33},"kind":{"Impl":{"id":34}},"from":{"krate":0,"index":478},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":156853,"byte_end":156869,"line_start":99,"line_end":99,"column_start":26,"column_end":42},"kind":{"Impl":{"id":35}},"from":{"krate":0,"index":478},"to":{"krate":2,"index":3300}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":157715,"byte_end":157731,"line_start":122,"line_end":122,"column_start":34,"column_end":50},"kind":{"Impl":{"id":36}},"from":{"krate":0,"index":478},"to":{"krate":0,"index":570}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158715,"byte_end":158731,"line_start":153,"line_end":153,"column_start":31,"column_end":47},"kind":{"Impl":{"id":37}},"from":{"krate":0,"index":478},"to":{"krate":2,"index":2654}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":158979,"byte_end":158992,"line_start":168,"line_end":168,"column_start":17,"column_end":30},"kind":{"Impl":{"id":38}},"from":{"krate":0,"index":951},"to":{"krate":0,"index":498}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":159156,"byte_end":159170,"line_start":177,"line_end":177,"column_start":35,"column_end":49},"kind":{"Impl":{"id":39}},"from":{"krate":0,"index":957},"to":{"krate":0,"index":574}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/hybrid.rs","byte_start":160222,"byte_end":160236,"line_start":203,"line_end":203,"column_start":41,"column_end":55},"kind":{"Impl":{"id":40}},"from":{"krate":0,"index":957},"to":{"krate":0,"index":579}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":161577,"byte_end":161578,"line_start":8,"line_end":8,"column_start":34,"column_end":35},"kind":{"Impl":{"id":41}},"from":{"krate":0,"index":544},"to":{"krate":0,"index":570}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":161754,"byte_end":161760,"line_start":20,"line_end":20,"column_start":38,"column_end":44},"kind":{"Impl":{"id":42}},"from":{"krate":1,"index":8816},"to":{"krate":0,"index":574}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/rw_lock.rs","byte_start":162344,"byte_end":162350,"line_start":37,"line_end":37,"column_start":28,"column_end":34},"kind":{"Impl":{"id":43}},"from":{"krate":1,"index":8816},"to":{"krate":0,"index":579}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":150899,"byte_end":150905,"line_start":119,"line_end":119,"column_start":29,"column_end":35},"kind":"SuperTrait","from":{"krate":2,"index":2654},"to":{"krate":0,"index":570}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":151311,"byte_end":151324,"line_start":131,"line_end":131,"column_start":31,"column_end":44},"kind":"SuperTrait","from":{"krate":0,"index":574},"to":{"krate":0,"index":579}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152184,"byte_end":152197,"line_start":150,"line_end":150,"column_start":40,"column_end":53},"kind":"SuperTrait","from":{"krate":0,"index":574},"to":{"krate":0,"index":583}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152265,"byte_end":152266,"line_start":151,"line_end":151,"column_start":62,"column_end":63},"kind":{"Impl":{"id":44}},"from":{"krate":0,"index":587},"to":{"krate":0,"index":583}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152619,"byte_end":152622,"line_start":159,"line_end":159,"column_start":35,"column_end":38},"kind":"SuperTrait","from":{"krate":0,"index":579},"to":{"krate":0,"index":588}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/strategy/mod.rs","byte_start":152675,"byte_end":152676,"line_start":160,"line_end":160,"column_start":47,"column_end":48},"kind":{"Impl":{"id":45}},"from":{"krate":0,"index":592},"to":{"krate":0,"index":588}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":6370,"byte_end":6375,"line_start":167,"line_end":167,"column_start":37,"column_end":42},"kind":{"Impl":{"id":46}},"from":{"krate":0,"index":671},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7474,"byte_end":7479,"line_start":202,"line_end":202,"column_start":47,"column_end":52},"kind":{"Impl":{"id":47}},"from":{"krate":0,"index":671},"to":{"krate":2,"index":3276}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7632,"byte_end":7637,"line_start":210,"line_end":210,"column_start":45,"column_end":50},"kind":{"Impl":{"id":48}},"from":{"krate":0,"index":671},"to":{"krate":2,"index":2963}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7773,"byte_end":7778,"line_start":216,"line_end":216,"column_start":55,"column_end":60},"kind":{"Impl":{"id":49}},"from":{"krate":0,"index":671},"to":{"krate":2,"index":3035}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":7906,"byte_end":7911,"line_start":222,"line_end":222,"column_start":51,"column_end":56},"kind":{"Impl":{"id":50}},"from":{"krate":0,"index":671},"to":{"krate":2,"index":9687}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":8079,"byte_end":8084,"line_start":228,"line_end":228,"column_start":55,"column_end":60},"kind":{"Impl":{"id":51}},"from":{"krate":0,"index":671},"to":{"krate":2,"index":9694}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11061,"byte_end":11071,"line_start":309,"line_end":309,"column_start":55,"column_end":65},"kind":{"Impl":{"id":52}},"from":{"krate":0,"index":707},"to":{"krate":2,"index":2963}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11207,"byte_end":11217,"line_start":315,"line_end":315,"column_start":42,"column_end":52},"kind":{"Impl":{"id":53}},"from":{"krate":0,"index":707},"to":{"krate":2,"index":3300}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11548,"byte_end":11558,"line_start":327,"line_end":327,"column_start":35,"column_end":45},"kind":{"Impl":{"id":54}},"from":{"krate":0,"index":707},"to":{"krate":2,"index":9687}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":11813,"byte_end":11823,"line_start":339,"line_end":339,"column_start":37,"column_end":47},"kind":{"Impl":{"id":55}},"from":{"krate":0,"index":707},"to":{"krate":2,"index":9694}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12031,"byte_end":12041,"line_start":348,"line_end":348,"column_start":65,"column_end":75},"kind":{"Impl":{"id":56}},"from":{"krate":0,"index":707},"to":{"krate":2,"index":3035}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":12150,"byte_end":12160,"line_start":354,"line_end":354,"column_start":33,"column_end":43},"kind":{"Impl":{"id":57}},"from":{"krate":0,"index":707},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":24338,"byte_end":24348,"line_start":676,"line_end":676,"column_start":30,"column_end":40},"kind":{"Impl":{"id":58}},"from":{"krate":0,"index":707},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":25431,"byte_end":25441,"line_start":710,"line_end":710,"column_start":38,"column_end":48},"kind":{"Impl":{"id":59}},"from":{"krate":0,"index":707},"to":{"krate":4294967295,"index":4294967295}},{"span":{"file_name":"/Users/mr.zhou/.cargo/registry/src/github.com-1ecc6299db9ec823/arc-swap-1.5.0/src/lib.rs","byte_start":26331,"byte_end":26344,"line_start":743,"line_end":743,"column_start":9,"column_end":22},"kind":{"Impl":{"id":60}},"from":{"krate":0,"index":758},"to":{"krate":4294967295,"index":4294967295}}]}